<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>User profiles in smart charging • flextools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="User profiles in smart charging">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">flextools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/flextools.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Optimization problems</h6></li>
    <li><a class="dropdown-item" href="../articles/minimize_net_power.html">Net power optimization</a></li>
    <li><a class="dropdown-item" href="../articles/minimize_cost.html">Energy cost optimization</a></li>
    <li><a class="dropdown-item" href="../articles/combined_optimization.html">Combined optimization</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Demand-response</h6></li>
    <li><a class="dropdown-item" href="../articles/smart-charging.html">Smart charging</a></li>
    <li><a class="dropdown-item" href="../articles/smart-charging-advanced.html">Advanced smart charging</a></li>
    <li><a class="dropdown-item" href="../articles/user-profiles.html">User profiles in smart charging</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/resourcefully-dev/flextools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="user-profiles_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="user-profiles_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="user-profiles_files/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="user-profiles_files/dygraphs-1.1.1/dygraph-combined.js"></script><script src="user-profiles_files/dygraphs-1.1.1/shapes.js"></script><script src="user-profiles_files/moment-2.8.4/moment.js"></script><script src="user-profiles_files/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="user-profiles_files/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="user-profiles_files/dygraphs-binding-1.1.1.6/dygraphs.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>User profiles in smart charging</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/resourcefully-dev/flextools/blob/HEAD/vignettes/user-profiles.Rmd" class="external-link"><code>vignettes/user-profiles.Rmd</code></a></small>
      <div class="d-none name"><code>user-profiles.Rmd</code></div>
    </div>

    
    
<p>This article is based on the <a href="https://resourcefully-dev.github.io/evprof/articles/evprof.html" class="external-link">EV
user profile concept</a> from package <code>evprof</code>, and how the
extra-knowledge that a classification of EV users into user profiles
could help in the smart charging ecosystem.</p>
<p>A <strong>user profile</strong> is defined by a pattern in the
connection times of EV users, so in most of cases, there are EV user
profiles with more flexibility potential than others. A Charging Point
Operator (CPO) can take advantage of this knowledge and use this
classification to set priorities when scheduling EV charging
sessions.</p>
<p>Shifting only the sessions of specific EV user profiles can increase
the efficiency of the system since the forecast of the flexibility
potential form EV users is more reliable. The lower number of EV
sessions that have to be re-scheduled, the better the solution, for both
the CPO and the final EV user.</p>
<div class="section level2">
<h2 id="ev-charging-sessions-simulation">EV charging sessions simulation<a class="anchor" aria-label="anchor" href="#ev-charging-sessions-simulation"></a>
</h2>
<p>First of all, we can simulate EV sessions using the
<code>evsim</code> package, which provides the function
<code><a href="https://resourcefully-dev.github.io/evsim/reference/get_custom_ev_model.html" class="external-link">evsim::get_custom_ev_model</a></code> to create a custom EV model to
later simulate EV sessions with <code><a href="https://resourcefully-dev.github.io/evsim/reference/simulate_sessions.html" class="external-link">evsim::simulate_sessions()</a></code>
function. We can create an EV model with custom time-cycles and user
profiles. In this case, we will consider two different EV user
profiles:</p>
<ul>
<li>
<strong>Worktime</strong>: present during working days.
Low-variability in connection times. High flexibility potential.</li>
<li>
<strong>Visit</strong>: present the whole week but with different
behaviour on weekends. High variability in connection times. Low
flexibility potential.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For workdays time cycle</span></span>
<span><span class="va">workdays_parameters</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  profile <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Worktime"</span>, <span class="st">"Visit"</span><span class="op">)</span>,</span>
<span>  ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>  start_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">11</span><span class="op">)</span>,</span>
<span>  start_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  duration_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  duration_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  energy_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  energy_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For weekends time cycle</span></span>
<span><span class="va">weekends_parameters</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  profile <span class="op">=</span> <span class="st">"Visit"</span>,</span>
<span>  ratio <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  start_mean <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  start_sd <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  duration_mean <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  duration_sd <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  energy_mean <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  energy_sd <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">parameters_lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">workdays_parameters</span>, <span class="va">weekends_parameters</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get the whole model</span></span>
<span><span class="va">ev_model</span> <span class="op">&lt;-</span> <span class="fu">get_custom_ev_model</span><span class="op">(</span></span>
<span>  names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Workdays"</span>, <span class="st">"Weekends"</span><span class="op">)</span>,</span>
<span>  months_lst <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>,</span>
<span>  wdays_lst <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">6</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span>,</span>
<span>  parameters_lst <span class="op">=</span> <span class="va">parameters_lst</span>,</span>
<span>  connection_log <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  energy_log <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  data_tz <span class="op">=</span> <span class="st">"Europe/Amsterdam"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Once we have our own model, we can simulate EV sessions for three
different days as example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span></span>
<span><span class="va">ev_sessions</span> <span class="op">&lt;-</span> <span class="fu">simulate_sessions</span><span class="op">(</span></span>
<span>  evmodel <span class="op">=</span> <span class="va">ev_model</span>, </span>
<span>  sessions_day <span class="op">=</span> <span class="fu">tibble</span><span class="op">(</span>time_cycle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Workdays"</span>, <span class="st">"Weekends"</span><span class="op">)</span>, n_sessions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  user_profiles <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  charging_powers <span class="op">=</span> <span class="fu">tibble</span><span class="op">(</span>power <span class="op">=</span> <span class="fl">3.7</span>, ratio <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, </span>
<span>  dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html" class="external-link">seq.Date</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu">dmy</span><span class="op">(</span><span class="st">"05-08-2024"</span><span class="op">)</span>, to <span class="op">=</span> <span class="fu">dmy</span><span class="op">(</span><span class="st">"05-08-2024"</span><span class="op">)</span><span class="op">+</span><span class="fu">days</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span>, </span>
<span>  resolution <span class="op">=</span> <span class="fl">15</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 21 × 11</span></span></span>
<span><span class="co">##    Session Timecycle Profile  ConnectionStartDateTime ConnectionEndDateTime</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> S1      Workdays  Worktime 2024-08-05 <span style="color: #949494;">08:45:00</span>     2024-08-05 <span style="color: #949494;">16:58:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> S2      Workdays  Worktime 2024-08-05 <span style="color: #949494;">09:15:00</span>     2024-08-05 <span style="color: #949494;">17:04:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> S3      Workdays  Worktime 2024-08-05 <span style="color: #949494;">09:30:00</span>     2024-08-05 <span style="color: #949494;">17:37:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> S4      Workdays  Visit    2024-08-05 <span style="color: #949494;">09:45:00</span>     2024-08-05 <span style="color: #949494;">12:29:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> S5      Workdays  Worktime 2024-08-05 <span style="color: #949494;">09:45:00</span>     2024-08-05 <span style="color: #949494;">17:22:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> S6      Workdays  Visit    2024-08-05 <span style="color: #949494;">10:00:00</span>     2024-08-05 <span style="color: #949494;">14:29:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> S7      Workdays  Visit    2024-08-05 <span style="color: #949494;">10:45:00</span>     2024-08-05 <span style="color: #949494;">17:46:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> S8      Workdays  Visit    2024-08-05 <span style="color: #949494;">12:45:00</span>     2024-08-05 <span style="color: #949494;">18:29:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> S9      Workdays  Visit    2024-08-05 <span style="color: #949494;">14:45:00</span>     2024-08-05 <span style="color: #949494;">18:59:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> S10     Workdays  Visit    2024-08-05 <span style="color: #949494;">20:00:00</span>     2024-08-05 <span style="color: #949494;">23:02:00</span>  </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 11 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 6 more variables: ChargingStartDateTime &lt;dttm&gt;, ChargingEndDateTime &lt;dttm&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   Power &lt;dbl&gt;, Energy &lt;dbl&gt;, ConnectionHours &lt;dbl&gt;, ChargingHours &lt;dbl&gt;</span></span></span></code></pre>
<p>Finally we can calculate the time-series power demand from each EV
with function <code><a href="https://resourcefully-dev.github.io/evsim/reference/get_demand.html" class="external-link">evsim::get_demand()</a></code>, using parameter
<code>by="Sessions"</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ev_demand</span> <span class="op">&lt;-</span> <span class="va">ev_sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">get_demand</span><span class="op">(</span>by <span class="op">=</span> <span class="st">"Profile"</span><span class="op">)</span> </span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"attrs":{"ylabel":"Power demand (kW)","labels":["minute","Worktime","Visit"],"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"legend":"always","labelsDivWidth":250,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":true,"fillGraph":true,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false},"scale":"minute","annotations":[],"shadings":[],"events":[],"format":"date","data":[["2024-08-04T22:00:00.000Z","2024-08-04T22:15:00.000Z","2024-08-04T22:30:00.000Z","2024-08-04T22:45:00.000Z","2024-08-04T23:00:00.000Z","2024-08-04T23:15:00.000Z","2024-08-04T23:30:00.000Z","2024-08-04T23:45:00.000Z","2024-08-05T00:00:00.000Z","2024-08-05T00:15:00.000Z","2024-08-05T00:30:00.000Z","2024-08-05T00:45:00.000Z","2024-08-05T01:00:00.000Z","2024-08-05T01:15:00.000Z","2024-08-05T01:30:00.000Z","2024-08-05T01:45:00.000Z","2024-08-05T02:00:00.000Z","2024-08-05T02:15:00.000Z","2024-08-05T02:30:00.000Z","2024-08-05T02:45:00.000Z","2024-08-05T03:00:00.000Z","2024-08-05T03:15:00.000Z","2024-08-05T03:30:00.000Z","2024-08-05T03:45:00.000Z","2024-08-05T04:00:00.000Z","2024-08-05T04:15:00.000Z","2024-08-05T04:30:00.000Z","2024-08-05T04:45:00.000Z","2024-08-05T05:00:00.000Z","2024-08-05T05:15:00.000Z","2024-08-05T05:30:00.000Z","2024-08-05T05:45:00.000Z","2024-08-05T06:00:00.000Z","2024-08-05T06:15:00.000Z","2024-08-05T06:30:00.000Z","2024-08-05T06:45:00.000Z","2024-08-05T07:00:00.000Z","2024-08-05T07:15:00.000Z","2024-08-05T07:30:00.000Z","2024-08-05T07:45:00.000Z","2024-08-05T08:00:00.000Z","2024-08-05T08:15:00.000Z","2024-08-05T08:30:00.000Z","2024-08-05T08:45:00.000Z","2024-08-05T09:00:00.000Z","2024-08-05T09:15:00.000Z","2024-08-05T09:30:00.000Z","2024-08-05T09:45:00.000Z","2024-08-05T10:00:00.000Z","2024-08-05T10:15:00.000Z","2024-08-05T10:30:00.000Z","2024-08-05T10:45:00.000Z","2024-08-05T11:00:00.000Z","2024-08-05T11:15:00.000Z","2024-08-05T11:30:00.000Z","2024-08-05T11:45:00.000Z","2024-08-05T12:00:00.000Z","2024-08-05T12:15:00.000Z","2024-08-05T12:30:00.000Z","2024-08-05T12:45:00.000Z","2024-08-05T13:00:00.000Z","2024-08-05T13:15:00.000Z","2024-08-05T13:30:00.000Z","2024-08-05T13:45:00.000Z","2024-08-05T14:00:00.000Z","2024-08-05T14:15:00.000Z","2024-08-05T14:30:00.000Z","2024-08-05T14:45:00.000Z","2024-08-05T15:00:00.000Z","2024-08-05T15:15:00.000Z","2024-08-05T15:30:00.000Z","2024-08-05T15:45:00.000Z","2024-08-05T16:00:00.000Z","2024-08-05T16:15:00.000Z","2024-08-05T16:30:00.000Z","2024-08-05T16:45:00.000Z","2024-08-05T17:00:00.000Z","2024-08-05T17:15:00.000Z","2024-08-05T17:30:00.000Z","2024-08-05T17:45:00.000Z","2024-08-05T18:00:00.000Z","2024-08-05T18:15:00.000Z","2024-08-05T18:30:00.000Z","2024-08-05T18:45:00.000Z","2024-08-05T19:00:00.000Z","2024-08-05T19:15:00.000Z","2024-08-05T19:30:00.000Z","2024-08-05T19:45:00.000Z","2024-08-05T20:00:00.000Z","2024-08-05T20:15:00.000Z","2024-08-05T20:30:00.000Z","2024-08-05T20:45:00.000Z","2024-08-05T21:00:00.000Z","2024-08-05T21:15:00.000Z","2024-08-05T21:30:00.000Z","2024-08-05T21:45:00.000Z","2024-08-05T22:00:00.000Z","2024-08-05T22:15:00.000Z","2024-08-05T22:30:00.000Z","2024-08-05T22:45:00.000Z","2024-08-05T23:00:00.000Z","2024-08-05T23:15:00.000Z","2024-08-05T23:30:00.000Z","2024-08-05T23:45:00.000Z","2024-08-06T00:00:00.000Z","2024-08-06T00:15:00.000Z","2024-08-06T00:30:00.000Z","2024-08-06T00:45:00.000Z","2024-08-06T01:00:00.000Z","2024-08-06T01:15:00.000Z","2024-08-06T01:30:00.000Z","2024-08-06T01:45:00.000Z","2024-08-06T02:00:00.000Z","2024-08-06T02:15:00.000Z","2024-08-06T02:30:00.000Z","2024-08-06T02:45:00.000Z","2024-08-06T03:00:00.000Z","2024-08-06T03:15:00.000Z","2024-08-06T03:30:00.000Z","2024-08-06T03:45:00.000Z","2024-08-06T04:00:00.000Z","2024-08-06T04:15:00.000Z","2024-08-06T04:30:00.000Z","2024-08-06T04:45:00.000Z","2024-08-06T05:00:00.000Z","2024-08-06T05:15:00.000Z","2024-08-06T05:30:00.000Z","2024-08-06T05:45:00.000Z","2024-08-06T06:00:00.000Z","2024-08-06T06:15:00.000Z","2024-08-06T06:30:00.000Z","2024-08-06T06:45:00.000Z","2024-08-06T07:00:00.000Z","2024-08-06T07:15:00.000Z","2024-08-06T07:30:00.000Z","2024-08-06T07:45:00.000Z","2024-08-06T08:00:00.000Z","2024-08-06T08:15:00.000Z","2024-08-06T08:30:00.000Z","2024-08-06T08:45:00.000Z","2024-08-06T09:00:00.000Z","2024-08-06T09:15:00.000Z","2024-08-06T09:30:00.000Z","2024-08-06T09:45:00.000Z","2024-08-06T10:00:00.000Z","2024-08-06T10:15:00.000Z","2024-08-06T10:30:00.000Z","2024-08-06T10:45:00.000Z","2024-08-06T11:00:00.000Z","2024-08-06T11:15:00.000Z","2024-08-06T11:30:00.000Z","2024-08-06T11:45:00.000Z","2024-08-06T12:00:00.000Z","2024-08-06T12:15:00.000Z","2024-08-06T12:30:00.000Z","2024-08-06T12:45:00.000Z","2024-08-06T13:00:00.000Z","2024-08-06T13:15:00.000Z","2024-08-06T13:30:00.000Z","2024-08-06T13:45:00.000Z","2024-08-06T14:00:00.000Z","2024-08-06T14:15:00.000Z","2024-08-06T14:30:00.000Z","2024-08-06T14:45:00.000Z","2024-08-06T15:00:00.000Z","2024-08-06T15:15:00.000Z","2024-08-06T15:30:00.000Z","2024-08-06T15:45:00.000Z","2024-08-06T16:00:00.000Z","2024-08-06T16:15:00.000Z","2024-08-06T16:30:00.000Z","2024-08-06T16:45:00.000Z","2024-08-06T17:00:00.000Z","2024-08-06T17:15:00.000Z","2024-08-06T17:30:00.000Z","2024-08-06T17:45:00.000Z","2024-08-06T18:00:00.000Z","2024-08-06T18:15:00.000Z","2024-08-06T18:30:00.000Z","2024-08-06T18:45:00.000Z","2024-08-06T19:00:00.000Z","2024-08-06T19:15:00.000Z","2024-08-06T19:30:00.000Z","2024-08-06T19:45:00.000Z","2024-08-06T20:00:00.000Z","2024-08-06T20:15:00.000Z","2024-08-06T20:30:00.000Z","2024-08-06T20:45:00.000Z","2024-08-06T21:00:00.000Z","2024-08-06T21:15:00.000Z","2024-08-06T21:30:00.000Z","2024-08-06T21:45:00.000Z","2024-08-06T22:00:00.000Z","2024-08-06T22:15:00.000Z","2024-08-06T22:30:00.000Z","2024-08-06T22:45:00.000Z","2024-08-06T23:00:00.000Z","2024-08-06T23:15:00.000Z","2024-08-06T23:30:00.000Z","2024-08-06T23:45:00.000Z","2024-08-07T00:00:00.000Z","2024-08-07T00:15:00.000Z","2024-08-07T00:30:00.000Z","2024-08-07T00:45:00.000Z","2024-08-07T01:00:00.000Z","2024-08-07T01:15:00.000Z","2024-08-07T01:30:00.000Z","2024-08-07T01:45:00.000Z","2024-08-07T02:00:00.000Z","2024-08-07T02:15:00.000Z","2024-08-07T02:30:00.000Z","2024-08-07T02:45:00.000Z","2024-08-07T03:00:00.000Z","2024-08-07T03:15:00.000Z","2024-08-07T03:30:00.000Z","2024-08-07T03:45:00.000Z","2024-08-07T04:00:00.000Z","2024-08-07T04:15:00.000Z","2024-08-07T04:30:00.000Z","2024-08-07T04:45:00.000Z","2024-08-07T05:00:00.000Z","2024-08-07T05:15:00.000Z","2024-08-07T05:30:00.000Z","2024-08-07T05:45:00.000Z","2024-08-07T06:00:00.000Z","2024-08-07T06:15:00.000Z","2024-08-07T06:30:00.000Z","2024-08-07T06:45:00.000Z","2024-08-07T07:00:00.000Z","2024-08-07T07:15:00.000Z","2024-08-07T07:30:00.000Z","2024-08-07T07:45:00.000Z","2024-08-07T08:00:00.000Z","2024-08-07T08:15:00.000Z","2024-08-07T08:30:00.000Z","2024-08-07T08:45:00.000Z","2024-08-07T09:00:00.000Z","2024-08-07T09:15:00.000Z","2024-08-07T09:30:00.000Z","2024-08-07T09:45:00.000Z","2024-08-07T10:00:00.000Z","2024-08-07T10:15:00.000Z","2024-08-07T10:30:00.000Z","2024-08-07T10:45:00.000Z","2024-08-07T11:00:00.000Z","2024-08-07T11:15:00.000Z","2024-08-07T11:30:00.000Z","2024-08-07T11:45:00.000Z","2024-08-07T12:00:00.000Z","2024-08-07T12:15:00.000Z","2024-08-07T12:30:00.000Z","2024-08-07T12:45:00.000Z","2024-08-07T13:00:00.000Z","2024-08-07T13:15:00.000Z","2024-08-07T13:30:00.000Z","2024-08-07T13:45:00.000Z","2024-08-07T14:00:00.000Z","2024-08-07T14:15:00.000Z","2024-08-07T14:30:00.000Z","2024-08-07T14:45:00.000Z","2024-08-07T15:00:00.000Z","2024-08-07T15:15:00.000Z","2024-08-07T15:30:00.000Z","2024-08-07T15:45:00.000Z","2024-08-07T16:00:00.000Z","2024-08-07T16:15:00.000Z","2024-08-07T16:30:00.000Z","2024-08-07T16:45:00.000Z","2024-08-07T17:00:00.000Z","2024-08-07T17:15:00.000Z","2024-08-07T17:30:00.000Z","2024-08-07T17:45:00.000Z","2024-08-07T18:00:00.000Z","2024-08-07T18:15:00.000Z","2024-08-07T18:30:00.000Z","2024-08-07T18:45:00.000Z","2024-08-07T19:00:00.000Z","2024-08-07T19:15:00.000Z","2024-08-07T19:30:00.000Z","2024-08-07T19:45:00.000Z","2024-08-07T20:00:00.000Z","2024-08-07T20:15:00.000Z","2024-08-07T20:30:00.000Z","2024-08-07T20:45:00.000Z","2024-08-07T21:00:00.000Z","2024-08-07T21:15:00.000Z","2024-08-07T21:30:00.000Z","2024-08-07T21:45:00.000Z","2024-08-07T22:00:00.000Z"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,7.4,11.1,14.8,14.8,14.8,14.8,14.8,14.8,14.8,12.6,11.1,7.42,7.4,7.4,7.4,7.4,7.4,7.4,6.220000000000001,3.7,0.14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,7.4,7.4,11.1,11.1,11.1,11.1,11.1,12.14,11.1,7.86,7.4,11.1,11.1,11.1,11.1,11.1,11.1,11.1,11.1,7.98,7.4,7.4,7.4,7.4,7.4,7.4,7.4,4.9,3.7,3.7,1.94,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,7.4,6.380000000000001,3.7,7.4,7.4,3.84,3.7,3.7,3.7,3.7,3.7,7.4,6.08,3.7,3.7,3.7,1.5,0,0,3.7,3.7,3.7,2.06,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,0.6,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,0.44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,7.4,7.4,3.38,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="smart-charging-to-solve-grid-congestion">Smart charging to solve grid congestion<a class="anchor" aria-label="anchor" href="#smart-charging-to-solve-grid-congestion"></a>
</h2>
<p>Imagine that we have to charge these EVs in an installation that has
a <strong>maximum grid connection of 12 kW</strong>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grid_capacity</span> <span class="op">&lt;-</span> <span class="fl">12</span></span></code></pre></div>
<p>Since our peak goes above 12kW, we need to use smart charging to
allow the EV users to charge under the grid capacity. In our case, we
decide to only use the flexibility from the <strong>Worktime user
profile</strong>, since it has a clear flexibility potential compared to
the Visit user profile.</p>
<p>In order to define a <strong>grid capacity</strong> in the
<code>smart_charing()</code> function, a column with the same name than
the EV user profile in the <code>sessions</code> parameter (in this
example “Worktime”) must be found in the <code>opt_data</code>
parameter. Therefore, a <code>"Worktime"</code> column is added to the
<code>opt_data</code> object as a setpoint for the EV user profile
“Worktime”, and it is defined as the <strong>difference between the grid
capacity and the rest of power demand</strong> (in this case the “Visit”
demand):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">opt_data</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  datetime <span class="op">=</span> <span class="va">ev_demand</span><span class="op">$</span><span class="va">datetime</span>, <span class="co"># Same date-time sequence than the demand</span></span>
<span>  Worktime <span class="op">=</span> <span class="va">grid_capacity</span> <span class="op">-</span> <span class="va">ev_demand</span><span class="op">$</span><span class="va">Visit</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">opt_data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dyplot</span><span class="op">(</span>ylab <span class="op">=</span> <span class="st">"Power demand (kW)"</span>, stackedGraph <span class="op">=</span> <span class="cn">T</span>, fillGraph <span class="op">=</span> <span class="cn">T</span>, legend_width <span class="op">=</span> <span class="fl">200</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dySeries</span><span class="op">(</span><span class="st">"Worktime"</span>, <span class="st">"Worktime free capacity"</span>, color <span class="op">=</span> <span class="st">"navy"</span>, strokeWidth <span class="op">=</span> <span class="fl">2</span>, strokePattern <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dyLimit</span><span class="op">(</span><span class="va">grid_capacity</span>, <span class="st">"Grid capacity"</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"attrs":{"ylabel":"Power demand (kW)","labels":["minute","Worktime free capacity"],"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"legend":"always","labelsDivWidth":200,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":true,"fillGraph":true,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false,"colors":["navy","navy"],"series":{"Worktime free capacity":{"axis":"y","strokeWidth":2,"strokePattern":[7,3]}}},"scale":"minute","annotations":[],"shadings":[],"events":[{"pos":12,"label":"Grid capacity","labelLoc":"left","color":"red","strokePattern":[7,3],"axis":"y"}],"format":"date","data":[["2024-08-04T22:00:00.000Z","2024-08-04T22:15:00.000Z","2024-08-04T22:30:00.000Z","2024-08-04T22:45:00.000Z","2024-08-04T23:00:00.000Z","2024-08-04T23:15:00.000Z","2024-08-04T23:30:00.000Z","2024-08-04T23:45:00.000Z","2024-08-05T00:00:00.000Z","2024-08-05T00:15:00.000Z","2024-08-05T00:30:00.000Z","2024-08-05T00:45:00.000Z","2024-08-05T01:00:00.000Z","2024-08-05T01:15:00.000Z","2024-08-05T01:30:00.000Z","2024-08-05T01:45:00.000Z","2024-08-05T02:00:00.000Z","2024-08-05T02:15:00.000Z","2024-08-05T02:30:00.000Z","2024-08-05T02:45:00.000Z","2024-08-05T03:00:00.000Z","2024-08-05T03:15:00.000Z","2024-08-05T03:30:00.000Z","2024-08-05T03:45:00.000Z","2024-08-05T04:00:00.000Z","2024-08-05T04:15:00.000Z","2024-08-05T04:30:00.000Z","2024-08-05T04:45:00.000Z","2024-08-05T05:00:00.000Z","2024-08-05T05:15:00.000Z","2024-08-05T05:30:00.000Z","2024-08-05T05:45:00.000Z","2024-08-05T06:00:00.000Z","2024-08-05T06:15:00.000Z","2024-08-05T06:30:00.000Z","2024-08-05T06:45:00.000Z","2024-08-05T07:00:00.000Z","2024-08-05T07:15:00.000Z","2024-08-05T07:30:00.000Z","2024-08-05T07:45:00.000Z","2024-08-05T08:00:00.000Z","2024-08-05T08:15:00.000Z","2024-08-05T08:30:00.000Z","2024-08-05T08:45:00.000Z","2024-08-05T09:00:00.000Z","2024-08-05T09:15:00.000Z","2024-08-05T09:30:00.000Z","2024-08-05T09:45:00.000Z","2024-08-05T10:00:00.000Z","2024-08-05T10:15:00.000Z","2024-08-05T10:30:00.000Z","2024-08-05T10:45:00.000Z","2024-08-05T11:00:00.000Z","2024-08-05T11:15:00.000Z","2024-08-05T11:30:00.000Z","2024-08-05T11:45:00.000Z","2024-08-05T12:00:00.000Z","2024-08-05T12:15:00.000Z","2024-08-05T12:30:00.000Z","2024-08-05T12:45:00.000Z","2024-08-05T13:00:00.000Z","2024-08-05T13:15:00.000Z","2024-08-05T13:30:00.000Z","2024-08-05T13:45:00.000Z","2024-08-05T14:00:00.000Z","2024-08-05T14:15:00.000Z","2024-08-05T14:30:00.000Z","2024-08-05T14:45:00.000Z","2024-08-05T15:00:00.000Z","2024-08-05T15:15:00.000Z","2024-08-05T15:30:00.000Z","2024-08-05T15:45:00.000Z","2024-08-05T16:00:00.000Z","2024-08-05T16:15:00.000Z","2024-08-05T16:30:00.000Z","2024-08-05T16:45:00.000Z","2024-08-05T17:00:00.000Z","2024-08-05T17:15:00.000Z","2024-08-05T17:30:00.000Z","2024-08-05T17:45:00.000Z","2024-08-05T18:00:00.000Z","2024-08-05T18:15:00.000Z","2024-08-05T18:30:00.000Z","2024-08-05T18:45:00.000Z","2024-08-05T19:00:00.000Z","2024-08-05T19:15:00.000Z","2024-08-05T19:30:00.000Z","2024-08-05T19:45:00.000Z","2024-08-05T20:00:00.000Z","2024-08-05T20:15:00.000Z","2024-08-05T20:30:00.000Z","2024-08-05T20:45:00.000Z","2024-08-05T21:00:00.000Z","2024-08-05T21:15:00.000Z","2024-08-05T21:30:00.000Z","2024-08-05T21:45:00.000Z","2024-08-05T22:00:00.000Z","2024-08-05T22:15:00.000Z","2024-08-05T22:30:00.000Z","2024-08-05T22:45:00.000Z","2024-08-05T23:00:00.000Z","2024-08-05T23:15:00.000Z","2024-08-05T23:30:00.000Z","2024-08-05T23:45:00.000Z","2024-08-06T00:00:00.000Z","2024-08-06T00:15:00.000Z","2024-08-06T00:30:00.000Z","2024-08-06T00:45:00.000Z","2024-08-06T01:00:00.000Z","2024-08-06T01:15:00.000Z","2024-08-06T01:30:00.000Z","2024-08-06T01:45:00.000Z","2024-08-06T02:00:00.000Z","2024-08-06T02:15:00.000Z","2024-08-06T02:30:00.000Z","2024-08-06T02:45:00.000Z","2024-08-06T03:00:00.000Z","2024-08-06T03:15:00.000Z","2024-08-06T03:30:00.000Z","2024-08-06T03:45:00.000Z","2024-08-06T04:00:00.000Z","2024-08-06T04:15:00.000Z","2024-08-06T04:30:00.000Z","2024-08-06T04:45:00.000Z","2024-08-06T05:00:00.000Z","2024-08-06T05:15:00.000Z","2024-08-06T05:30:00.000Z","2024-08-06T05:45:00.000Z","2024-08-06T06:00:00.000Z","2024-08-06T06:15:00.000Z","2024-08-06T06:30:00.000Z","2024-08-06T06:45:00.000Z","2024-08-06T07:00:00.000Z","2024-08-06T07:15:00.000Z","2024-08-06T07:30:00.000Z","2024-08-06T07:45:00.000Z","2024-08-06T08:00:00.000Z","2024-08-06T08:15:00.000Z","2024-08-06T08:30:00.000Z","2024-08-06T08:45:00.000Z","2024-08-06T09:00:00.000Z","2024-08-06T09:15:00.000Z","2024-08-06T09:30:00.000Z","2024-08-06T09:45:00.000Z","2024-08-06T10:00:00.000Z","2024-08-06T10:15:00.000Z","2024-08-06T10:30:00.000Z","2024-08-06T10:45:00.000Z","2024-08-06T11:00:00.000Z","2024-08-06T11:15:00.000Z","2024-08-06T11:30:00.000Z","2024-08-06T11:45:00.000Z","2024-08-06T12:00:00.000Z","2024-08-06T12:15:00.000Z","2024-08-06T12:30:00.000Z","2024-08-06T12:45:00.000Z","2024-08-06T13:00:00.000Z","2024-08-06T13:15:00.000Z","2024-08-06T13:30:00.000Z","2024-08-06T13:45:00.000Z","2024-08-06T14:00:00.000Z","2024-08-06T14:15:00.000Z","2024-08-06T14:30:00.000Z","2024-08-06T14:45:00.000Z","2024-08-06T15:00:00.000Z","2024-08-06T15:15:00.000Z","2024-08-06T15:30:00.000Z","2024-08-06T15:45:00.000Z","2024-08-06T16:00:00.000Z","2024-08-06T16:15:00.000Z","2024-08-06T16:30:00.000Z","2024-08-06T16:45:00.000Z","2024-08-06T17:00:00.000Z","2024-08-06T17:15:00.000Z","2024-08-06T17:30:00.000Z","2024-08-06T17:45:00.000Z","2024-08-06T18:00:00.000Z","2024-08-06T18:15:00.000Z","2024-08-06T18:30:00.000Z","2024-08-06T18:45:00.000Z","2024-08-06T19:00:00.000Z","2024-08-06T19:15:00.000Z","2024-08-06T19:30:00.000Z","2024-08-06T19:45:00.000Z","2024-08-06T20:00:00.000Z","2024-08-06T20:15:00.000Z","2024-08-06T20:30:00.000Z","2024-08-06T20:45:00.000Z","2024-08-06T21:00:00.000Z","2024-08-06T21:15:00.000Z","2024-08-06T21:30:00.000Z","2024-08-06T21:45:00.000Z","2024-08-06T22:00:00.000Z","2024-08-06T22:15:00.000Z","2024-08-06T22:30:00.000Z","2024-08-06T22:45:00.000Z","2024-08-06T23:00:00.000Z","2024-08-06T23:15:00.000Z","2024-08-06T23:30:00.000Z","2024-08-06T23:45:00.000Z","2024-08-07T00:00:00.000Z","2024-08-07T00:15:00.000Z","2024-08-07T00:30:00.000Z","2024-08-07T00:45:00.000Z","2024-08-07T01:00:00.000Z","2024-08-07T01:15:00.000Z","2024-08-07T01:30:00.000Z","2024-08-07T01:45:00.000Z","2024-08-07T02:00:00.000Z","2024-08-07T02:15:00.000Z","2024-08-07T02:30:00.000Z","2024-08-07T02:45:00.000Z","2024-08-07T03:00:00.000Z","2024-08-07T03:15:00.000Z","2024-08-07T03:30:00.000Z","2024-08-07T03:45:00.000Z","2024-08-07T04:00:00.000Z","2024-08-07T04:15:00.000Z","2024-08-07T04:30:00.000Z","2024-08-07T04:45:00.000Z","2024-08-07T05:00:00.000Z","2024-08-07T05:15:00.000Z","2024-08-07T05:30:00.000Z","2024-08-07T05:45:00.000Z","2024-08-07T06:00:00.000Z","2024-08-07T06:15:00.000Z","2024-08-07T06:30:00.000Z","2024-08-07T06:45:00.000Z","2024-08-07T07:00:00.000Z","2024-08-07T07:15:00.000Z","2024-08-07T07:30:00.000Z","2024-08-07T07:45:00.000Z","2024-08-07T08:00:00.000Z","2024-08-07T08:15:00.000Z","2024-08-07T08:30:00.000Z","2024-08-07T08:45:00.000Z","2024-08-07T09:00:00.000Z","2024-08-07T09:15:00.000Z","2024-08-07T09:30:00.000Z","2024-08-07T09:45:00.000Z","2024-08-07T10:00:00.000Z","2024-08-07T10:15:00.000Z","2024-08-07T10:30:00.000Z","2024-08-07T10:45:00.000Z","2024-08-07T11:00:00.000Z","2024-08-07T11:15:00.000Z","2024-08-07T11:30:00.000Z","2024-08-07T11:45:00.000Z","2024-08-07T12:00:00.000Z","2024-08-07T12:15:00.000Z","2024-08-07T12:30:00.000Z","2024-08-07T12:45:00.000Z","2024-08-07T13:00:00.000Z","2024-08-07T13:15:00.000Z","2024-08-07T13:30:00.000Z","2024-08-07T13:45:00.000Z","2024-08-07T14:00:00.000Z","2024-08-07T14:15:00.000Z","2024-08-07T14:30:00.000Z","2024-08-07T14:45:00.000Z","2024-08-07T15:00:00.000Z","2024-08-07T15:15:00.000Z","2024-08-07T15:30:00.000Z","2024-08-07T15:45:00.000Z","2024-08-07T16:00:00.000Z","2024-08-07T16:15:00.000Z","2024-08-07T16:30:00.000Z","2024-08-07T16:45:00.000Z","2024-08-07T17:00:00.000Z","2024-08-07T17:15:00.000Z","2024-08-07T17:30:00.000Z","2024-08-07T17:45:00.000Z","2024-08-07T18:00:00.000Z","2024-08-07T18:15:00.000Z","2024-08-07T18:30:00.000Z","2024-08-07T18:45:00.000Z","2024-08-07T19:00:00.000Z","2024-08-07T19:15:00.000Z","2024-08-07T19:30:00.000Z","2024-08-07T19:45:00.000Z","2024-08-07T20:00:00.000Z","2024-08-07T20:15:00.000Z","2024-08-07T20:30:00.000Z","2024-08-07T20:45:00.000Z","2024-08-07T21:00:00.000Z","2024-08-07T21:15:00.000Z","2024-08-07T21:30:00.000Z","2024-08-07T21:45:00.000Z","2024-08-07T22:00:00.000Z"],[12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,8.300000000000001,4.6,5.619999999999999,8.300000000000001,4.6,4.6,8.16,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,4.6,5.92,8.300000000000001,8.300000000000001,8.300000000000001,10.5,12,12,8.300000000000001,8.300000000000001,8.300000000000001,9.94,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,10.52,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,11.4,12,12,12,12,12,12,12,12,12,12,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,11.56,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,8.300000000000001,8.300000000000001,8.300000000000001,4.6,4.6,8.620000000000001,12,12,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,10.36,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,10.22,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":[],"jsHooks":[]}</script><p>Considering optimization windows of 24 hours from 6:00AM to 6:00AM,
and <code>"curtail"</code> as a smart charging method:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc_results</span> <span class="op">&lt;-</span> <span class="va">ev_sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/smart_charging.html">smart_charging</a></span><span class="op">(</span></span>
<span>    opt_data <span class="op">=</span> <span class="va">opt_data</span>, </span>
<span>    opt_objective <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"curtail"</span>,</span>
<span>    window_days <span class="op">=</span> <span class="fl">1</span>, </span>
<span>    window_start_hour <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    responsive <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Workdays <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Worktime <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ev_demand_opt</span> <span class="op">&lt;-</span> <span class="va">sc_results</span><span class="op">$</span><span class="va">sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">get_demand</span><span class="op">(</span>by <span class="op">=</span> <span class="st">"Profile"</span><span class="op">)</span> </span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"attrs":{"ylabel":"Power demand (kW)","labels":["minute","Worktime","Visit"],"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"legend":"always","labelsDivWidth":150,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":true,"fillGraph":true,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false},"scale":"minute","annotations":[],"shadings":[],"events":[{"pos":12,"label":"Grid capacity","labelLoc":"left","color":"red","strokePattern":[7,3],"axis":"y"}],"format":"date","data":[["2024-08-04T22:00:00.000Z","2024-08-04T22:15:00.000Z","2024-08-04T22:30:00.000Z","2024-08-04T22:45:00.000Z","2024-08-04T23:00:00.000Z","2024-08-04T23:15:00.000Z","2024-08-04T23:30:00.000Z","2024-08-04T23:45:00.000Z","2024-08-05T00:00:00.000Z","2024-08-05T00:15:00.000Z","2024-08-05T00:30:00.000Z","2024-08-05T00:45:00.000Z","2024-08-05T01:00:00.000Z","2024-08-05T01:15:00.000Z","2024-08-05T01:30:00.000Z","2024-08-05T01:45:00.000Z","2024-08-05T02:00:00.000Z","2024-08-05T02:15:00.000Z","2024-08-05T02:30:00.000Z","2024-08-05T02:45:00.000Z","2024-08-05T03:00:00.000Z","2024-08-05T03:15:00.000Z","2024-08-05T03:30:00.000Z","2024-08-05T03:45:00.000Z","2024-08-05T04:00:00.000Z","2024-08-05T04:15:00.000Z","2024-08-05T04:30:00.000Z","2024-08-05T04:45:00.000Z","2024-08-05T05:00:00.000Z","2024-08-05T05:15:00.000Z","2024-08-05T05:30:00.000Z","2024-08-05T05:45:00.000Z","2024-08-05T06:00:00.000Z","2024-08-05T06:15:00.000Z","2024-08-05T06:30:00.000Z","2024-08-05T06:45:00.000Z","2024-08-05T07:00:00.000Z","2024-08-05T07:15:00.000Z","2024-08-05T07:30:00.000Z","2024-08-05T07:45:00.000Z","2024-08-05T08:00:00.000Z","2024-08-05T08:15:00.000Z","2024-08-05T08:30:00.000Z","2024-08-05T08:45:00.000Z","2024-08-05T09:00:00.000Z","2024-08-05T09:15:00.000Z","2024-08-05T09:30:00.000Z","2024-08-05T09:45:00.000Z","2024-08-05T10:00:00.000Z","2024-08-05T10:15:00.000Z","2024-08-05T10:30:00.000Z","2024-08-05T10:45:00.000Z","2024-08-05T11:00:00.000Z","2024-08-05T11:15:00.000Z","2024-08-05T11:30:00.000Z","2024-08-05T11:45:00.000Z","2024-08-05T12:00:00.000Z","2024-08-05T12:15:00.000Z","2024-08-05T12:30:00.000Z","2024-08-05T12:45:00.000Z","2024-08-05T13:00:00.000Z","2024-08-05T13:15:00.000Z","2024-08-05T13:30:00.000Z","2024-08-05T13:45:00.000Z","2024-08-05T14:00:00.000Z","2024-08-05T14:15:00.000Z","2024-08-05T14:30:00.000Z","2024-08-05T14:45:00.000Z","2024-08-05T15:00:00.000Z","2024-08-05T15:15:00.000Z","2024-08-05T15:30:00.000Z","2024-08-05T15:45:00.000Z","2024-08-05T16:00:00.000Z","2024-08-05T16:15:00.000Z","2024-08-05T16:30:00.000Z","2024-08-05T16:45:00.000Z","2024-08-05T17:00:00.000Z","2024-08-05T17:15:00.000Z","2024-08-05T17:30:00.000Z","2024-08-05T17:45:00.000Z","2024-08-05T18:00:00.000Z","2024-08-05T18:15:00.000Z","2024-08-05T18:30:00.000Z","2024-08-05T18:45:00.000Z","2024-08-05T19:00:00.000Z","2024-08-05T19:15:00.000Z","2024-08-05T19:30:00.000Z","2024-08-05T19:45:00.000Z","2024-08-05T20:00:00.000Z","2024-08-05T20:15:00.000Z","2024-08-05T20:30:00.000Z","2024-08-05T20:45:00.000Z","2024-08-05T21:00:00.000Z","2024-08-05T21:15:00.000Z","2024-08-05T21:30:00.000Z","2024-08-05T21:45:00.000Z","2024-08-05T22:00:00.000Z","2024-08-05T22:15:00.000Z","2024-08-05T22:30:00.000Z","2024-08-05T22:45:00.000Z","2024-08-05T23:00:00.000Z","2024-08-05T23:15:00.000Z","2024-08-05T23:30:00.000Z","2024-08-05T23:45:00.000Z","2024-08-06T00:00:00.000Z","2024-08-06T00:15:00.000Z","2024-08-06T00:30:00.000Z","2024-08-06T00:45:00.000Z","2024-08-06T01:00:00.000Z","2024-08-06T01:15:00.000Z","2024-08-06T01:30:00.000Z","2024-08-06T01:45:00.000Z","2024-08-06T02:00:00.000Z","2024-08-06T02:15:00.000Z","2024-08-06T02:30:00.000Z","2024-08-06T02:45:00.000Z","2024-08-06T03:00:00.000Z","2024-08-06T03:15:00.000Z","2024-08-06T03:30:00.000Z","2024-08-06T03:45:00.000Z","2024-08-06T04:00:00.000Z","2024-08-06T04:15:00.000Z","2024-08-06T04:30:00.000Z","2024-08-06T04:45:00.000Z","2024-08-06T05:00:00.000Z","2024-08-06T05:15:00.000Z","2024-08-06T05:30:00.000Z","2024-08-06T05:45:00.000Z","2024-08-06T06:00:00.000Z","2024-08-06T06:15:00.000Z","2024-08-06T06:30:00.000Z","2024-08-06T06:45:00.000Z","2024-08-06T07:00:00.000Z","2024-08-06T07:15:00.000Z","2024-08-06T07:30:00.000Z","2024-08-06T07:45:00.000Z","2024-08-06T08:00:00.000Z","2024-08-06T08:15:00.000Z","2024-08-06T08:30:00.000Z","2024-08-06T08:45:00.000Z","2024-08-06T09:00:00.000Z","2024-08-06T09:15:00.000Z","2024-08-06T09:30:00.000Z","2024-08-06T09:45:00.000Z","2024-08-06T10:00:00.000Z","2024-08-06T10:15:00.000Z","2024-08-06T10:30:00.000Z","2024-08-06T10:45:00.000Z","2024-08-06T11:00:00.000Z","2024-08-06T11:15:00.000Z","2024-08-06T11:30:00.000Z","2024-08-06T11:45:00.000Z","2024-08-06T12:00:00.000Z","2024-08-06T12:15:00.000Z","2024-08-06T12:30:00.000Z","2024-08-06T12:45:00.000Z","2024-08-06T13:00:00.000Z","2024-08-06T13:15:00.000Z","2024-08-06T13:30:00.000Z","2024-08-06T13:45:00.000Z","2024-08-06T14:00:00.000Z","2024-08-06T14:15:00.000Z","2024-08-06T14:30:00.000Z","2024-08-06T14:45:00.000Z","2024-08-06T15:00:00.000Z","2024-08-06T15:15:00.000Z","2024-08-06T15:30:00.000Z","2024-08-06T15:45:00.000Z","2024-08-06T16:00:00.000Z","2024-08-06T16:15:00.000Z","2024-08-06T16:30:00.000Z","2024-08-06T16:45:00.000Z","2024-08-06T17:00:00.000Z","2024-08-06T17:15:00.000Z","2024-08-06T17:30:00.000Z","2024-08-06T17:45:00.000Z","2024-08-06T18:00:00.000Z","2024-08-06T18:15:00.000Z","2024-08-06T18:30:00.000Z","2024-08-06T18:45:00.000Z","2024-08-06T19:00:00.000Z","2024-08-06T19:15:00.000Z","2024-08-06T19:30:00.000Z","2024-08-06T19:45:00.000Z","2024-08-06T20:00:00.000Z","2024-08-06T20:15:00.000Z","2024-08-06T20:30:00.000Z","2024-08-06T20:45:00.000Z","2024-08-06T21:00:00.000Z","2024-08-06T21:15:00.000Z","2024-08-06T21:30:00.000Z","2024-08-06T21:45:00.000Z"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,7.4,11.1,8.32,4.6,5.64,8.32,4.6,4.6,8.16,8.32,8.32,8.32,8.32,8.32,4.6,5.92,8.309999999999999,8.289999999999999,8.300000000000001,9.58,7.4,7.4,7.4,7.4,7.4,7.4,7.4,4.54,2.16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,7.4,7.4,11.1,11.1,11.1,11.1,11.1,12.01,11.11,7.9,7.4,11.1,11.1,11.1,11.1,11.1,11.1,11.1,11.1,8.02,7.4,7.4,7.4,7.4,4.6,4.6,7.4,7.4,4,3.7,3.7,1.08,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,7.4,6.380000000000001,3.7,7.4,7.4,3.84,3.7,3.7,3.7,3.7,3.7,7.4,6.08,3.7,3.7,3.7,1.5,0,0,3.7,3.7,3.7,2.06,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,0.6,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,0.44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,7.4,7.4,3.38,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":[],"jsHooks":[]}</script><p>We can see that the Worktime power demand has been adapted to the
non-flexbile users, i.e. Visit user profile, in order to not surpass the
capacity limit of 12 kW.</p>
<p>Moreover, we can define which percentage of every user profile is
responsive to the smart charging signals with the parameter
<code>responsive</code> from <code><a href="../reference/smart_charging.html">smart_charging()</a></code> function. For
example, we can set that, during working days, <strong>60% of the
Worktime users</strong> and <strong>20% of the Visit users</strong>
accept to participate to the demand-response program.</p>
<p>To do that, since now we consider different user profiles for an
aggregated grid capacity, the grid capacity limit has to be configured
in the <code>opt_data</code> as <code>"grid_capacity"</code> name:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">opt_data</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  datetime <span class="op">=</span> <span class="va">ev_demand</span><span class="op">$</span><span class="va">datetime</span>, <span class="co"># Same date-time sequence than the demand</span></span>
<span>  <span class="va">grid_capacity</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>We configure the <strong>responsiveness</strong> of every user
profile with the <code>responsive</code> parameter. <strong>It’s always
advised that the responsiveness values are sorted from highest to
lowest</strong>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc_results</span> <span class="op">&lt;-</span> <span class="va">ev_sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/smart_charging.html">smart_charging</a></span><span class="op">(</span></span>
<span>    opt_data <span class="op">=</span> <span class="va">opt_data</span>, </span>
<span>    opt_objective <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"curtail"</span>,</span>
<span>    window_days <span class="op">=</span> <span class="fl">1</span>, </span>
<span>    window_start_hour <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    responsive <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      Workdays <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Worktime <span class="op">=</span> <span class="fl">0.6</span>, Visit <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sc_results</span>, <span class="va">ev_sessions</span><span class="op">)</span></span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-febe03efa1a2d8d52a86" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"attrs":{"ylabel":"Power (kW)","labels":["minute","Setpoint","Flexible EVs","Original EVs"],"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"legend":"auto","labelsDivWidth":250,"labelsShowZeroValues":false,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":false,"fillGraph":false,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":2,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false,"colors":["red","navy","gray"],"series":{"Setpoint":{"axis":"y","strokeWidth":2,"strokePattern":[7,3]},"Flexible EVs":{"axis":"y"},"Original EVs":{"axis":"y","strokeWidth":2,"strokePattern":[7,3]}}},"scale":"minute","annotations":[],"shadings":[],"events":[],"format":"date","data":[["2024-08-04T22:00:00.000Z","2024-08-04T22:15:00.000Z","2024-08-04T22:30:00.000Z","2024-08-04T22:45:00.000Z","2024-08-04T23:00:00.000Z","2024-08-04T23:15:00.000Z","2024-08-04T23:30:00.000Z","2024-08-04T23:45:00.000Z","2024-08-05T00:00:00.000Z","2024-08-05T00:15:00.000Z","2024-08-05T00:30:00.000Z","2024-08-05T00:45:00.000Z","2024-08-05T01:00:00.000Z","2024-08-05T01:15:00.000Z","2024-08-05T01:30:00.000Z","2024-08-05T01:45:00.000Z","2024-08-05T02:00:00.000Z","2024-08-05T02:15:00.000Z","2024-08-05T02:30:00.000Z","2024-08-05T02:45:00.000Z","2024-08-05T03:00:00.000Z","2024-08-05T03:15:00.000Z","2024-08-05T03:30:00.000Z","2024-08-05T03:45:00.000Z","2024-08-05T04:00:00.000Z","2024-08-05T04:15:00.000Z","2024-08-05T04:30:00.000Z","2024-08-05T04:45:00.000Z","2024-08-05T05:00:00.000Z","2024-08-05T05:15:00.000Z","2024-08-05T05:30:00.000Z","2024-08-05T05:45:00.000Z","2024-08-05T06:00:00.000Z","2024-08-05T06:15:00.000Z","2024-08-05T06:30:00.000Z","2024-08-05T06:45:00.000Z","2024-08-05T07:00:00.000Z","2024-08-05T07:15:00.000Z","2024-08-05T07:30:00.000Z","2024-08-05T07:45:00.000Z","2024-08-05T08:00:00.000Z","2024-08-05T08:15:00.000Z","2024-08-05T08:30:00.000Z","2024-08-05T08:45:00.000Z","2024-08-05T09:00:00.000Z","2024-08-05T09:15:00.000Z","2024-08-05T09:30:00.000Z","2024-08-05T09:45:00.000Z","2024-08-05T10:00:00.000Z","2024-08-05T10:15:00.000Z","2024-08-05T10:30:00.000Z","2024-08-05T10:45:00.000Z","2024-08-05T11:00:00.000Z","2024-08-05T11:15:00.000Z","2024-08-05T11:30:00.000Z","2024-08-05T11:45:00.000Z","2024-08-05T12:00:00.000Z","2024-08-05T12:15:00.000Z","2024-08-05T12:30:00.000Z","2024-08-05T12:45:00.000Z","2024-08-05T13:00:00.000Z","2024-08-05T13:15:00.000Z","2024-08-05T13:30:00.000Z","2024-08-05T13:45:00.000Z","2024-08-05T14:00:00.000Z","2024-08-05T14:15:00.000Z","2024-08-05T14:30:00.000Z","2024-08-05T14:45:00.000Z","2024-08-05T15:00:00.000Z","2024-08-05T15:15:00.000Z","2024-08-05T15:30:00.000Z","2024-08-05T15:45:00.000Z","2024-08-05T16:00:00.000Z","2024-08-05T16:15:00.000Z","2024-08-05T16:30:00.000Z","2024-08-05T16:45:00.000Z","2024-08-05T17:00:00.000Z","2024-08-05T17:15:00.000Z","2024-08-05T17:30:00.000Z","2024-08-05T17:45:00.000Z","2024-08-05T18:00:00.000Z","2024-08-05T18:15:00.000Z","2024-08-05T18:30:00.000Z","2024-08-05T18:45:00.000Z","2024-08-05T19:00:00.000Z","2024-08-05T19:15:00.000Z","2024-08-05T19:30:00.000Z","2024-08-05T19:45:00.000Z","2024-08-05T20:00:00.000Z","2024-08-05T20:15:00.000Z","2024-08-05T20:30:00.000Z","2024-08-05T20:45:00.000Z","2024-08-05T21:00:00.000Z","2024-08-05T21:15:00.000Z","2024-08-05T21:30:00.000Z","2024-08-05T21:45:00.000Z","2024-08-05T22:00:00.000Z","2024-08-05T22:15:00.000Z","2024-08-05T22:30:00.000Z","2024-08-05T22:45:00.000Z","2024-08-05T23:00:00.000Z","2024-08-05T23:15:00.000Z","2024-08-05T23:30:00.000Z","2024-08-05T23:45:00.000Z","2024-08-06T00:00:00.000Z","2024-08-06T00:15:00.000Z","2024-08-06T00:30:00.000Z","2024-08-06T00:45:00.000Z","2024-08-06T01:00:00.000Z","2024-08-06T01:15:00.000Z","2024-08-06T01:30:00.000Z","2024-08-06T01:45:00.000Z","2024-08-06T02:00:00.000Z","2024-08-06T02:15:00.000Z","2024-08-06T02:30:00.000Z","2024-08-06T02:45:00.000Z","2024-08-06T03:00:00.000Z","2024-08-06T03:15:00.000Z","2024-08-06T03:30:00.000Z","2024-08-06T03:45:00.000Z","2024-08-06T04:00:00.000Z","2024-08-06T04:15:00.000Z","2024-08-06T04:30:00.000Z","2024-08-06T04:45:00.000Z","2024-08-06T05:00:00.000Z","2024-08-06T05:15:00.000Z","2024-08-06T05:30:00.000Z","2024-08-06T05:45:00.000Z","2024-08-06T06:00:00.000Z","2024-08-06T06:15:00.000Z","2024-08-06T06:30:00.000Z","2024-08-06T06:45:00.000Z","2024-08-06T07:00:00.000Z","2024-08-06T07:15:00.000Z","2024-08-06T07:30:00.000Z","2024-08-06T07:45:00.000Z","2024-08-06T08:00:00.000Z","2024-08-06T08:15:00.000Z","2024-08-06T08:30:00.000Z","2024-08-06T08:45:00.000Z","2024-08-06T09:00:00.000Z","2024-08-06T09:15:00.000Z","2024-08-06T09:30:00.000Z","2024-08-06T09:45:00.000Z","2024-08-06T10:00:00.000Z","2024-08-06T10:15:00.000Z","2024-08-06T10:30:00.000Z","2024-08-06T10:45:00.000Z","2024-08-06T11:00:00.000Z","2024-08-06T11:15:00.000Z","2024-08-06T11:30:00.000Z","2024-08-06T11:45:00.000Z","2024-08-06T12:00:00.000Z","2024-08-06T12:15:00.000Z","2024-08-06T12:30:00.000Z","2024-08-06T12:45:00.000Z","2024-08-06T13:00:00.000Z","2024-08-06T13:15:00.000Z","2024-08-06T13:30:00.000Z","2024-08-06T13:45:00.000Z","2024-08-06T14:00:00.000Z","2024-08-06T14:15:00.000Z","2024-08-06T14:30:00.000Z","2024-08-06T14:45:00.000Z","2024-08-06T15:00:00.000Z","2024-08-06T15:15:00.000Z","2024-08-06T15:30:00.000Z","2024-08-06T15:45:00.000Z","2024-08-06T16:00:00.000Z","2024-08-06T16:15:00.000Z","2024-08-06T16:30:00.000Z","2024-08-06T16:45:00.000Z","2024-08-06T17:00:00.000Z","2024-08-06T17:15:00.000Z","2024-08-06T17:30:00.000Z","2024-08-06T17:45:00.000Z","2024-08-06T18:00:00.000Z","2024-08-06T18:15:00.000Z","2024-08-06T18:30:00.000Z","2024-08-06T18:45:00.000Z","2024-08-06T19:00:00.000Z","2024-08-06T19:15:00.000Z","2024-08-06T19:30:00.000Z","2024-08-06T19:45:00.000Z","2024-08-06T20:00:00.000Z","2024-08-06T20:15:00.000Z","2024-08-06T20:30:00.000Z","2024-08-06T20:45:00.000Z","2024-08-06T21:00:00.000Z","2024-08-06T21:15:00.000Z","2024-08-06T21:30:00.000Z","2024-08-06T21:45:00.000Z","2024-08-06T22:00:00.000Z","2024-08-06T22:15:00.000Z","2024-08-06T22:30:00.000Z","2024-08-06T22:45:00.000Z","2024-08-06T23:00:00.000Z","2024-08-06T23:15:00.000Z","2024-08-06T23:30:00.000Z","2024-08-06T23:45:00.000Z","2024-08-07T00:00:00.000Z","2024-08-07T00:15:00.000Z","2024-08-07T00:30:00.000Z","2024-08-07T00:45:00.000Z","2024-08-07T01:00:00.000Z","2024-08-07T01:15:00.000Z","2024-08-07T01:30:00.000Z","2024-08-07T01:45:00.000Z","2024-08-07T02:00:00.000Z","2024-08-07T02:15:00.000Z","2024-08-07T02:30:00.000Z","2024-08-07T02:45:00.000Z","2024-08-07T03:00:00.000Z","2024-08-07T03:15:00.000Z","2024-08-07T03:30:00.000Z","2024-08-07T03:45:00.000Z","2024-08-07T04:00:00.000Z","2024-08-07T04:15:00.000Z","2024-08-07T04:30:00.000Z","2024-08-07T04:45:00.000Z","2024-08-07T05:00:00.000Z","2024-08-07T05:15:00.000Z","2024-08-07T05:30:00.000Z","2024-08-07T05:45:00.000Z","2024-08-07T06:00:00.000Z","2024-08-07T06:15:00.000Z","2024-08-07T06:30:00.000Z","2024-08-07T06:45:00.000Z","2024-08-07T07:00:00.000Z","2024-08-07T07:15:00.000Z","2024-08-07T07:30:00.000Z","2024-08-07T07:45:00.000Z","2024-08-07T08:00:00.000Z","2024-08-07T08:15:00.000Z","2024-08-07T08:30:00.000Z","2024-08-07T08:45:00.000Z","2024-08-07T09:00:00.000Z","2024-08-07T09:15:00.000Z","2024-08-07T09:30:00.000Z","2024-08-07T09:45:00.000Z","2024-08-07T10:00:00.000Z","2024-08-07T10:15:00.000Z","2024-08-07T10:30:00.000Z","2024-08-07T10:45:00.000Z","2024-08-07T11:00:00.000Z","2024-08-07T11:15:00.000Z","2024-08-07T11:30:00.000Z","2024-08-07T11:45:00.000Z","2024-08-07T12:00:00.000Z","2024-08-07T12:15:00.000Z","2024-08-07T12:30:00.000Z","2024-08-07T12:45:00.000Z","2024-08-07T13:00:00.000Z","2024-08-07T13:15:00.000Z","2024-08-07T13:30:00.000Z","2024-08-07T13:45:00.000Z","2024-08-07T14:00:00.000Z","2024-08-07T14:15:00.000Z","2024-08-07T14:30:00.000Z","2024-08-07T14:45:00.000Z","2024-08-07T15:00:00.000Z","2024-08-07T15:15:00.000Z","2024-08-07T15:30:00.000Z","2024-08-07T15:45:00.000Z","2024-08-07T16:00:00.000Z","2024-08-07T16:15:00.000Z","2024-08-07T16:30:00.000Z","2024-08-07T16:45:00.000Z","2024-08-07T17:00:00.000Z","2024-08-07T17:15:00.000Z","2024-08-07T17:30:00.000Z","2024-08-07T17:45:00.000Z","2024-08-07T18:00:00.000Z","2024-08-07T18:15:00.000Z","2024-08-07T18:30:00.000Z","2024-08-07T18:45:00.000Z","2024-08-07T19:00:00.000Z","2024-08-07T19:15:00.000Z","2024-08-07T19:30:00.000Z","2024-08-07T19:45:00.000Z","2024-08-07T20:00:00.000Z","2024-08-07T20:15:00.000Z","2024-08-07T20:30:00.000Z","2024-08-07T20:45:00.000Z","2024-08-07T21:00:00.000Z","2024-08-07T21:15:00.000Z","2024-08-07T21:30:00.000Z","2024-08-07T21:45:00.000Z","2024-08-07T22:00:00.000Z"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,7.4,11.1,12,12,12,12,12,12,12,12,12,11.12,11.1,11.1,12,12,11.1,11.1,9.920000000000002,5.2,0.14,0,3.7,3.7,3.7,2.06,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,0.6,0,0,0,0,0,0,0,0,3.7,3.7,7.4,7.4,7.4,11.1,7.840000000000001,11.1,11.1,11.1,11.1,11.1,12,11.1,7.86,7.4,11.1,11.1,11.1,11.1,11.1,11.1,11.1,11.1,7.98,7.4,11.1,11.1,11.1,12,12,10.78,4.9,3.7,7.4,5.640000000000001,3.7,3.7,3.7,3.7,1.64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,7.4,11.1,12,14.8,13.78,12,14.8,14.8,12,12,12,11.12,11.1,11.1,12,12,11.1,11.1,9.92,7.970000000000001,3.84,3.7,7.4,7.4,7.4,5.76,3.7,3.7,6.93,7.4,7.4,4.74,1.78,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,0.6,0,0,0,0,0,0,0,0,3.7,3.7,7.4,7.4,7.4,11.1,7.840000000000001,11.1,11.1,11.1,11.1,11.1,12,11.1,7.860000000000001,7.4,11.1,11.1,11.1,11.1,11.1,11.1,11.1,11.1,7.98,7.4,11.1,11.1,11.1,12,12,10.78,4.9,3.7,7.4,5.64,3.7,3.7,4.71,7.4,2.68,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,7.4,11.1,18.5,22.2,21.18,18.5,22.2,22.2,18.64,16.3,14.8,11.12,11.1,11.1,14.8,13.48,11.1,11.1,9.920000000000002,5.2,0.14,0,3.7,3.7,3.7,2.06,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,0.6,0,0,0,0,0,0,0,0,3.7,3.7,7.4,7.4,7.4,11.1,7.840000000000001,11.1,11.1,11.1,11.1,11.1,12.14,11.1,7.86,7.4,11.1,11.1,11.1,11.1,11.1,11.1,11.1,11.1,7.98,7.4,11.1,11.1,11.1,14.8,14.8,10.78,4.9,3.7,7.4,5.640000000000001,3.7,3.7,3.7,3.7,1.64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":[],"jsHooks":[]}</script><p>From the plot we see that the grid capacity limit of 12 kW can’t be
always respected. Also, the setpoint in this plot doesn’t make a lot of
sense because represents the power limitation of the EV demand, but our
setpoint is avoiding a demand higher than 12 kW. The setpoint line in
the plot can be removed using the parameter
<code>show_setpoint = FALSE</code>.</p>
<p>Is it for the lack of flexibility of the responsive sessions? Or
maybe there aren’t enough responsive sessions? These questions can be
answered by plotting the smart charging results <strong>by flexbility
type</strong>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sc_results</span>, <span class="va">ev_sessions</span>, by <span class="op">=</span> <span class="st">"FlexType"</span>, show_setpoint <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dyLimit</span><span class="op">(</span><span class="va">grid_capacity</span>, <span class="st">"Grid capacity"</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-1fb4450895fe099f74a1" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-1fb4450895fe099f74a1">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true,"valueRange":[0,23.31]}},"series":{"Not considered":{"axis":"y","plotter":"// the _lineplotter function extracted from dygraphs-combined-dev.js, available for use in conjunction with other per-series plotters and group plotters\n\nfunction linePlotter(e) {\n  //extracting and reducing the Dygraph.stackPoints_ function\n  stackPoints = function(points, cumulativeYval, seriesExtremes, fillMethod) {\n    var lastXval = null;\n    var prevPoint = null;\n    var nextPoint = null;\n    var nextPointIdx = -1;\n  \n    // Find the next stackable point starting from the given index.\n    var updateNextPoint = function(idx) {\n      // If we've previously found a non-NaN point and haven't gone past it yet,\n      // just use that.\n      if (nextPointIdx >= idx) return;\n  \n      // We haven't found a non-NaN point yet or have moved past it,\n      // look towards the right to find a non-NaN point.\n      for (var j = idx; j < points.length; ++j) {\n        // Clear out a previously-found point (if any) since it's no longer\n        // valid, we shouldn't use it for interpolation anymore.\n        nextPoint = null;\n        if (!isNaN(points[j].yval) && points[j].yval !== null) {\n          nextPointIdx = j;\n          nextPoint = points[j];\n          break;\n        }\n      }\n    };\n  \n    for (var i = 0; i < points.length; ++i) {\n      var point = points[i];\n      var xval = point.xval;\n      if (cumulativeYval[xval] === undefined) {\n        cumulativeYval[xval] = 0;\n      }\n  \n      var actualYval = point.yval;\n      if (isNaN(actualYval) || actualYval === null) {\n        if(fillMethod == 'none') {\n          actualYval = 0;\n        } else {\n          // Interpolate/extend for stacking purposes if possible.\n          updateNextPoint(i);\n          if (prevPoint && nextPoint && fillMethod != 'none') {\n            // Use linear interpolation between prevPoint and nextPoint.\n            actualYval = prevPoint.yval + (nextPoint.yval - prevPoint.yval) *\n                ((xval - prevPoint.xval) / (nextPoint.xval - prevPoint.xval));\n          } else if (prevPoint && fillMethod == 'all') {\n            actualYval = prevPoint.yval;\n          } else if (nextPoint && fillMethod == 'all') {\n            actualYval = nextPoint.yval;\n          } else {\n            actualYval = 0;\n          }\n        }\n      } else {\n        prevPoint = point;\n      }\n  \n      var stackedYval = cumulativeYval[xval];\n      if (lastXval != xval) {\n        // If an x-value is repeated, we ignore the duplicates.\n        stackedYval += actualYval;\n        cumulativeYval[xval] = stackedYval;\n      }\n      lastXval = xval;\n  \n      point.yval_stacked = stackedYval;\n      \n      if (stackedYval > seriesExtremes[1]) {\n        seriesExtremes[1] = stackedYval;\n      }\n      if (stackedYval < seriesExtremes[0]) {\n        seriesExtremes[0] = stackedYval;\n      }\n  \n    }\n  };\n  \n  // BEGIN HEADER BLOCK\n  // This first block can be copied to other plotters to capture the group \n  var g = e.dygraph;\n  \n  var group;\n  var groupIdx = [];\n  var sets = [];\n  var allSets = e.allSeriesPoints;\n  var minIdx = Infinity;\n  var setName = e.setName;\n  var setNames = g.getLabels().slice(1);\n  var groupSetNames = [];\n  var fillColors = [];\n  var strokeColors = g.getColors();\n  // this next one we use further down, but will be populated in a decreasing loop,\n  // so we'll establish the size in this forward loop so it has the structure to accept\n  // later on.\n  var seriesExtremes = [];\n  \n  var currGroup = g.attr_(\"group\", setName);\n  \n  for (var setIdx = 0; setIdx < allSets.length; setIdx++) {\n    // get the name and group of the current setIdx\n    setName = setNames[setIdx];\n    group = g.attr_(\"group\", setName);\n\n    if (group === currGroup) {\n      //save the indv index and the points\n      groupIdx.push(setIdx);\n      sets.push(allSets[setIdx]);\n      groupSetNames.push(setName);\n      fillColors.push(strokeColors[setIdx]);\n     \n      // the aforementioned stuff for later on \n      var tmpExtremes = [];\n      tmpExtremes[0] = Infinity;\n      tmpExtremes[1] = -Infinity;\n      \n      seriesExtremes.push(tmpExtremes);\n      \n      // capturing the min indx helps to ensure we don't render the plotter\n      // multiple times\n      if (setIdx < minIdx) minIdx = setIdx;\n    }\n  }\n  // END HEADER BLOCK\n\t\n\t//Stack the points\n  // set up cumulative records\n  var cumulativeYval = [];\n  var packed = g.gatherDatasets_(g.rolledSeries_, null);\n  var extremes = packed.extremes;\n  var seriesName;\n  \n  for (var j = sets.length - 1; j >= 0; j--) {\n    points = sets[j];\n    seriesName = groupSetNames[j]; \n    \n    //  stack the data \n    stackPoints(points, cumulativeYval, seriesExtremes[j],\n          g.getBooleanOption(\"stackedGraphNaNFill\"));\n    \n    extremes[seriesName] = seriesExtremes[j];\n  }\n  \n\t// Helper function to trace a line back along the baseline.\n  var traceBackPath = function(ctx, baselineX, baselineY, pathBack) {\n    ctx.lineTo(baselineX, baselineY);\n    for (var i = pathBack.length - 1; i >= 0; i--) {\n      var pt = pathBack[i];\n      ctx.lineTo(pt[0], pt[1]);\n    }\n  };\n  \n\t// Do the actual plotting.\n\t\t\t\t// First, we'll plot the line for this series, then...\n\t\t\t\t// Second, we'll add the fills\n\t\t\t\t// In contrast to stackedlinegroup, we do this in reverse\n\t\t\t\t// order to align with the fillplotter\n\tvar area = e.plotArea;\n  var fillAlpha = g.getNumericOption('fillAlpha');\n\t\n\tvar baseline = {};\n  var currBaseline;\n  var prevStepPlot;  // for different line drawing modes (line/step) per series\n\n  var ctx = e.drawingContext;\n    \n\t// For filled charts, we draw points from left to right, then back along\n  // the x-axis to complete a shape for filling.\n  // For stacked plots, this \"back path\" is a more complex shape. This array\n  // stores the [x, y] values needed to trace that shape.\n  var pathBack = [];\n\n\t//We'll save the group indices of the current set,\n\t\t\t\t// so as to test later and hopefully skip \n\t\t\t\t// past needless iterations of the loops\n\tvar currSetIdx;\n\t//Now a quick FOR loop to capture the group indices\n  for (var j = sets.length - 1; j >= 0; j--) {\n    seriesName = groupSetNames[j]; \n\t\tif (seriesName === e.setName) currSetIdx = j;\n  }\n  \n\tfor (var j = sets.length - 1; j >= 0; j--) {\n\t\t// If we're not dealing with the immediate plotted series or it's\n\t\t\t\t\t// immediate predecesor, skip all this stuff below\n\t\tif (j > (currSetIdx + 1) || j < currSetIdx) continue;\n\n    setName = groupSetNames[j];\n\n\t\tvar connectSeparated = g.getOption('connectSeparatedPoints', setName);\n    var logscale = g.attributes_.getForSeries(\"logscale\", setName);\n    \n    axis = g.axisPropertiesForSeries(setName);\n    \n    points = sets[j];\n    \n    for (var i = 0; i < points.length; i++) {\n      var point = points[i];\n      \n      var yval = point.yval;\n      \n      point.y_stacked = DygraphLayout.calcYNormal_(\n          axis, point.yval_stacked, logscale);\n          \n      if (yval !== null && !isNaN(yval)) {\n        yval = point.yval_stacked;\n      }\n      if (yval === null) {\n        yval = NaN;\n        if (!connectSeparated) {\n          point.yval = NaN;\n        }\n      }\n      point.y = DygraphLayout.calcYNormal_(axis, yval, logscale);\n    \n      point.canvasx = g.plotter_.area.w * point.x + g.plotter_.area.x;\n      point.canvasy = g.plotter_.area.h * point.y + g.plotter_.area.y;\n\t\t}\n\n\t\te.points = points;\n\n\t  var strokeWidth = e.strokeWidth;\n\t\n\t  var borderWidth = g.getNumericOption(\"strokeBorderWidth\", setName);\n\t  var drawPointCallback = g.getOption(\"drawPointCallback\", setName) ||\n\t      Dygraph.Circles.DEFAULT;\n\t  var strokePattern = g.getOption(\"strokePattern\", setName);\n\t  var drawPoints = g.getBooleanOption(\"drawPoints\", setName);\n\t  var pointSize = g.getNumericOption(\"pointSize\", setName);\n\t\t\n\t\t// We'll only draw the line plotter if the current series matches\n\t\t\t\t\t// the one in the top-level plotter call\n\t\tif (setName === e.setName) {\n\t  \tif (borderWidth && strokeWidth) {\n\t  \t  DygraphCanvasRenderer._drawStyledLine(e,\n\t  \t      g.getOption(\"strokeBorderColor\", setName),\n\t  \t      strokeWidth + 2 * borderWidth,\n\t  \t      strokePattern,\n\t  \t      drawPoints,\n\t  \t      drawPointCallback,\n\t  \t      pointSize\n\t  \t      );\n\t  \t}\n\t\n\t  \tDygraphCanvasRenderer._drawStyledLine(e,\n\t  \t    e.color,\n\t  \t    strokeWidth,\n\t  \t    strokePattern,\n\t  \t    drawPoints,\n\t  \t    drawPointCallback,\n\t  \t    pointSize\n\t  \t);\n\t\t}\n\t\t//END OF THE LINE PLOTTER\n\t\t\t\t\t//\n\t\t//BEGIN THE FILL\n    var stepPlot = g.getBooleanOption('stepPlot', setName);\n\t\tvar color = e.color;\n\t\tvar axis = g.axisPropertiesForSeries(setName);\n    var axisY = 1.0 + axis.minyval * axis.yscale;\n    if (axisY < 0.0) axisY = 0.0;\n    else if (axisY > 1.0) axisY = 1.0;\n    axisY = area.h * axisY + area.y;\n\n\n\t\t// setup graphics context\n  \tvar prevX = NaN;\n  \tvar prevYs = [-1, -1];\n  \tvar newYs;\n  \t\n\t\t// should be same color as the lines but only 15% opaque.\n  \tvar rgb = Dygraph.toRGB_(color);\n  \tvar err_color =\n  \t    'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + fillAlpha + ')';\n    \n\n    var iter = Dygraph.createIterator(points, 0, points.length,\n        DygraphCanvasRenderer._getIteratorPredicate(\n            g.getBooleanOption(\"connectSeparatedPoints\", setName)));\n\n    ctx.fillStyle = err_color;\n    ctx.beginPath();\n    var last_x, is_first = true;\n\n    // If the point density is high enough, dropping segments on their way to\n    // the canvas justifies the overhead of doing so.\n    if (points.length > 2 * g.width_ || Dygraph.FORCE_FAST_PROXY) {\n      ctx = DygraphCanvasRenderer._fastCanvasProxy(ctx);\n    }\n\n    // TODO(danvk): there are a lot of options at play in this loop.\n    //     The logic would be much clearer if some (e.g. stackGraph and\n    //     stepPlot) were split off into separate sub-plotters.\n    var point;\n\n\t\t// Throughout this loop, we test to see if the top-level called series\n\t\t\t\t\t// matches the one current in the parent FOR loop.  If not, we skip\n\t\t\t\t\t// the parts that draw the line but leave the others so the pathback\n\t\t\t\t\t// and prevYs and prevXs still get properly populated\n    while (iter.hasNext) {\n      point = iter.next();\n      if (!Dygraph.isOK(point.y) && !stepPlot) {\n\t\t\t\t//\n        if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\t\tctx, prevX, prevYs[1], pathBack);\n        pathBack = [];\n        prevX = NaN;\n        if (point.y_stacked !== null && !isNaN(point.y_stacked)) {\n          baseline[point.canvasx] = area.h * point.y_stacked + area.y;\n        }\n        continue;\n      }\n      if (!is_first && last_x == point.xval) {\n        continue;\n      } else {\n        is_first = false;\n        last_x = point.xval;\n      }\n\n      currBaseline = baseline[point.canvasx];\n      var lastY;\n      if (currBaseline === undefined) {\n        lastY = axisY;\n      } else {\n        if(prevStepPlot) {\n          lastY = currBaseline[0];\n        } else {\n          lastY = currBaseline;\n        }\n      }\n      newYs = [ point.canvasy, lastY ];\n\n      if (stepPlot) {\n        // Step plots must keep track of the top and bottom of\n        // the baseline at each point.\n        if (prevYs[0] === -1) {\n          baseline[point.canvasx] = [ point.canvasy, axisY ];\n        } else {\n          baseline[point.canvasx] = [ point.canvasy, prevYs[0] ];\n        }\n      } else {\n        baseline[point.canvasx] = point.canvasy;\n      }\n\n      if (!isNaN(prevX)) {\n\t\t\t\tif (e.setName === setName) {\n        \t// Move to top fill point\n        \tif (stepPlot) {\n        \t  ctx.lineTo(point.canvasx, prevYs[0]);\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t} else {\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t}\n        }\n\n        // Record the baseline for the reverse path.\n        pathBack.push([prevX, prevYs[1]]);\n        if (prevStepPlot && currBaseline) {\n          // Draw to the bottom of the baseline\n          pathBack.push([point.canvasx, currBaseline[1]]);\n        } else {\n          pathBack.push([point.canvasx, newYs[1]]);\n        }\n      } else if (e.setName === setName) {\n        ctx.moveTo(point.canvasx, newYs[1]);\n        ctx.lineTo(point.canvasx, newYs[0]);\n      }\n      prevYs = newYs;\n      prevX = point.canvasx;\n\t\t}\n    prevStepPlot = stepPlot;\n    if (newYs && point) {\n      if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\tctx, point.canvasx, newYs[1], pathBack);\n      pathBack = [];\n    }\n    ctx.fill();\n\t}\n}","group":"Not consideredNot responsiveNot flexibleNot exploitedExploited"},"Not responsive":{"axis":"y","plotter":"// the _lineplotter function extracted from dygraphs-combined-dev.js, available for use in conjunction with other per-series plotters and group plotters\n\nfunction linePlotter(e) {\n  //extracting and reducing the Dygraph.stackPoints_ function\n  stackPoints = function(points, cumulativeYval, seriesExtremes, fillMethod) {\n    var lastXval = null;\n    var prevPoint = null;\n    var nextPoint = null;\n    var nextPointIdx = -1;\n  \n    // Find the next stackable point starting from the given index.\n    var updateNextPoint = function(idx) {\n      // If we've previously found a non-NaN point and haven't gone past it yet,\n      // just use that.\n      if (nextPointIdx >= idx) return;\n  \n      // We haven't found a non-NaN point yet or have moved past it,\n      // look towards the right to find a non-NaN point.\n      for (var j = idx; j < points.length; ++j) {\n        // Clear out a previously-found point (if any) since it's no longer\n        // valid, we shouldn't use it for interpolation anymore.\n        nextPoint = null;\n        if (!isNaN(points[j].yval) && points[j].yval !== null) {\n          nextPointIdx = j;\n          nextPoint = points[j];\n          break;\n        }\n      }\n    };\n  \n    for (var i = 0; i < points.length; ++i) {\n      var point = points[i];\n      var xval = point.xval;\n      if (cumulativeYval[xval] === undefined) {\n        cumulativeYval[xval] = 0;\n      }\n  \n      var actualYval = point.yval;\n      if (isNaN(actualYval) || actualYval === null) {\n        if(fillMethod == 'none') {\n          actualYval = 0;\n        } else {\n          // Interpolate/extend for stacking purposes if possible.\n          updateNextPoint(i);\n          if (prevPoint && nextPoint && fillMethod != 'none') {\n            // Use linear interpolation between prevPoint and nextPoint.\n            actualYval = prevPoint.yval + (nextPoint.yval - prevPoint.yval) *\n                ((xval - prevPoint.xval) / (nextPoint.xval - prevPoint.xval));\n          } else if (prevPoint && fillMethod == 'all') {\n            actualYval = prevPoint.yval;\n          } else if (nextPoint && fillMethod == 'all') {\n            actualYval = nextPoint.yval;\n          } else {\n            actualYval = 0;\n          }\n        }\n      } else {\n        prevPoint = point;\n      }\n  \n      var stackedYval = cumulativeYval[xval];\n      if (lastXval != xval) {\n        // If an x-value is repeated, we ignore the duplicates.\n        stackedYval += actualYval;\n        cumulativeYval[xval] = stackedYval;\n      }\n      lastXval = xval;\n  \n      point.yval_stacked = stackedYval;\n      \n      if (stackedYval > seriesExtremes[1]) {\n        seriesExtremes[1] = stackedYval;\n      }\n      if (stackedYval < seriesExtremes[0]) {\n        seriesExtremes[0] = stackedYval;\n      }\n  \n    }\n  };\n  \n  // BEGIN HEADER BLOCK\n  // This first block can be copied to other plotters to capture the group \n  var g = e.dygraph;\n  \n  var group;\n  var groupIdx = [];\n  var sets = [];\n  var allSets = e.allSeriesPoints;\n  var minIdx = Infinity;\n  var setName = e.setName;\n  var setNames = g.getLabels().slice(1);\n  var groupSetNames = [];\n  var fillColors = [];\n  var strokeColors = g.getColors();\n  // this next one we use further down, but will be populated in a decreasing loop,\n  // so we'll establish the size in this forward loop so it has the structure to accept\n  // later on.\n  var seriesExtremes = [];\n  \n  var currGroup = g.attr_(\"group\", setName);\n  \n  for (var setIdx = 0; setIdx < allSets.length; setIdx++) {\n    // get the name and group of the current setIdx\n    setName = setNames[setIdx];\n    group = g.attr_(\"group\", setName);\n\n    if (group === currGroup) {\n      //save the indv index and the points\n      groupIdx.push(setIdx);\n      sets.push(allSets[setIdx]);\n      groupSetNames.push(setName);\n      fillColors.push(strokeColors[setIdx]);\n     \n      // the aforementioned stuff for later on \n      var tmpExtremes = [];\n      tmpExtremes[0] = Infinity;\n      tmpExtremes[1] = -Infinity;\n      \n      seriesExtremes.push(tmpExtremes);\n      \n      // capturing the min indx helps to ensure we don't render the plotter\n      // multiple times\n      if (setIdx < minIdx) minIdx = setIdx;\n    }\n  }\n  // END HEADER BLOCK\n\t\n\t//Stack the points\n  // set up cumulative records\n  var cumulativeYval = [];\n  var packed = g.gatherDatasets_(g.rolledSeries_, null);\n  var extremes = packed.extremes;\n  var seriesName;\n  \n  for (var j = sets.length - 1; j >= 0; j--) {\n    points = sets[j];\n    seriesName = groupSetNames[j]; \n    \n    //  stack the data \n    stackPoints(points, cumulativeYval, seriesExtremes[j],\n          g.getBooleanOption(\"stackedGraphNaNFill\"));\n    \n    extremes[seriesName] = seriesExtremes[j];\n  }\n  \n\t// Helper function to trace a line back along the baseline.\n  var traceBackPath = function(ctx, baselineX, baselineY, pathBack) {\n    ctx.lineTo(baselineX, baselineY);\n    for (var i = pathBack.length - 1; i >= 0; i--) {\n      var pt = pathBack[i];\n      ctx.lineTo(pt[0], pt[1]);\n    }\n  };\n  \n\t// Do the actual plotting.\n\t\t\t\t// First, we'll plot the line for this series, then...\n\t\t\t\t// Second, we'll add the fills\n\t\t\t\t// In contrast to stackedlinegroup, we do this in reverse\n\t\t\t\t// order to align with the fillplotter\n\tvar area = e.plotArea;\n  var fillAlpha = g.getNumericOption('fillAlpha');\n\t\n\tvar baseline = {};\n  var currBaseline;\n  var prevStepPlot;  // for different line drawing modes (line/step) per series\n\n  var ctx = e.drawingContext;\n    \n\t// For filled charts, we draw points from left to right, then back along\n  // the x-axis to complete a shape for filling.\n  // For stacked plots, this \"back path\" is a more complex shape. This array\n  // stores the [x, y] values needed to trace that shape.\n  var pathBack = [];\n\n\t//We'll save the group indices of the current set,\n\t\t\t\t// so as to test later and hopefully skip \n\t\t\t\t// past needless iterations of the loops\n\tvar currSetIdx;\n\t//Now a quick FOR loop to capture the group indices\n  for (var j = sets.length - 1; j >= 0; j--) {\n    seriesName = groupSetNames[j]; \n\t\tif (seriesName === e.setName) currSetIdx = j;\n  }\n  \n\tfor (var j = sets.length - 1; j >= 0; j--) {\n\t\t// If we're not dealing with the immediate plotted series or it's\n\t\t\t\t\t// immediate predecesor, skip all this stuff below\n\t\tif (j > (currSetIdx + 1) || j < currSetIdx) continue;\n\n    setName = groupSetNames[j];\n\n\t\tvar connectSeparated = g.getOption('connectSeparatedPoints', setName);\n    var logscale = g.attributes_.getForSeries(\"logscale\", setName);\n    \n    axis = g.axisPropertiesForSeries(setName);\n    \n    points = sets[j];\n    \n    for (var i = 0; i < points.length; i++) {\n      var point = points[i];\n      \n      var yval = point.yval;\n      \n      point.y_stacked = DygraphLayout.calcYNormal_(\n          axis, point.yval_stacked, logscale);\n          \n      if (yval !== null && !isNaN(yval)) {\n        yval = point.yval_stacked;\n      }\n      if (yval === null) {\n        yval = NaN;\n        if (!connectSeparated) {\n          point.yval = NaN;\n        }\n      }\n      point.y = DygraphLayout.calcYNormal_(axis, yval, logscale);\n    \n      point.canvasx = g.plotter_.area.w * point.x + g.plotter_.area.x;\n      point.canvasy = g.plotter_.area.h * point.y + g.plotter_.area.y;\n\t\t}\n\n\t\te.points = points;\n\n\t  var strokeWidth = e.strokeWidth;\n\t\n\t  var borderWidth = g.getNumericOption(\"strokeBorderWidth\", setName);\n\t  var drawPointCallback = g.getOption(\"drawPointCallback\", setName) ||\n\t      Dygraph.Circles.DEFAULT;\n\t  var strokePattern = g.getOption(\"strokePattern\", setName);\n\t  var drawPoints = g.getBooleanOption(\"drawPoints\", setName);\n\t  var pointSize = g.getNumericOption(\"pointSize\", setName);\n\t\t\n\t\t// We'll only draw the line plotter if the current series matches\n\t\t\t\t\t// the one in the top-level plotter call\n\t\tif (setName === e.setName) {\n\t  \tif (borderWidth && strokeWidth) {\n\t  \t  DygraphCanvasRenderer._drawStyledLine(e,\n\t  \t      g.getOption(\"strokeBorderColor\", setName),\n\t  \t      strokeWidth + 2 * borderWidth,\n\t  \t      strokePattern,\n\t  \t      drawPoints,\n\t  \t      drawPointCallback,\n\t  \t      pointSize\n\t  \t      );\n\t  \t}\n\t\n\t  \tDygraphCanvasRenderer._drawStyledLine(e,\n\t  \t    e.color,\n\t  \t    strokeWidth,\n\t  \t    strokePattern,\n\t  \t    drawPoints,\n\t  \t    drawPointCallback,\n\t  \t    pointSize\n\t  \t);\n\t\t}\n\t\t//END OF THE LINE PLOTTER\n\t\t\t\t\t//\n\t\t//BEGIN THE FILL\n    var stepPlot = g.getBooleanOption('stepPlot', setName);\n\t\tvar color = e.color;\n\t\tvar axis = g.axisPropertiesForSeries(setName);\n    var axisY = 1.0 + axis.minyval * axis.yscale;\n    if (axisY < 0.0) axisY = 0.0;\n    else if (axisY > 1.0) axisY = 1.0;\n    axisY = area.h * axisY + area.y;\n\n\n\t\t// setup graphics context\n  \tvar prevX = NaN;\n  \tvar prevYs = [-1, -1];\n  \tvar newYs;\n  \t\n\t\t// should be same color as the lines but only 15% opaque.\n  \tvar rgb = Dygraph.toRGB_(color);\n  \tvar err_color =\n  \t    'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + fillAlpha + ')';\n    \n\n    var iter = Dygraph.createIterator(points, 0, points.length,\n        DygraphCanvasRenderer._getIteratorPredicate(\n            g.getBooleanOption(\"connectSeparatedPoints\", setName)));\n\n    ctx.fillStyle = err_color;\n    ctx.beginPath();\n    var last_x, is_first = true;\n\n    // If the point density is high enough, dropping segments on their way to\n    // the canvas justifies the overhead of doing so.\n    if (points.length > 2 * g.width_ || Dygraph.FORCE_FAST_PROXY) {\n      ctx = DygraphCanvasRenderer._fastCanvasProxy(ctx);\n    }\n\n    // TODO(danvk): there are a lot of options at play in this loop.\n    //     The logic would be much clearer if some (e.g. stackGraph and\n    //     stepPlot) were split off into separate sub-plotters.\n    var point;\n\n\t\t// Throughout this loop, we test to see if the top-level called series\n\t\t\t\t\t// matches the one current in the parent FOR loop.  If not, we skip\n\t\t\t\t\t// the parts that draw the line but leave the others so the pathback\n\t\t\t\t\t// and prevYs and prevXs still get properly populated\n    while (iter.hasNext) {\n      point = iter.next();\n      if (!Dygraph.isOK(point.y) && !stepPlot) {\n\t\t\t\t//\n        if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\t\tctx, prevX, prevYs[1], pathBack);\n        pathBack = [];\n        prevX = NaN;\n        if (point.y_stacked !== null && !isNaN(point.y_stacked)) {\n          baseline[point.canvasx] = area.h * point.y_stacked + area.y;\n        }\n        continue;\n      }\n      if (!is_first && last_x == point.xval) {\n        continue;\n      } else {\n        is_first = false;\n        last_x = point.xval;\n      }\n\n      currBaseline = baseline[point.canvasx];\n      var lastY;\n      if (currBaseline === undefined) {\n        lastY = axisY;\n      } else {\n        if(prevStepPlot) {\n          lastY = currBaseline[0];\n        } else {\n          lastY = currBaseline;\n        }\n      }\n      newYs = [ point.canvasy, lastY ];\n\n      if (stepPlot) {\n        // Step plots must keep track of the top and bottom of\n        // the baseline at each point.\n        if (prevYs[0] === -1) {\n          baseline[point.canvasx] = [ point.canvasy, axisY ];\n        } else {\n          baseline[point.canvasx] = [ point.canvasy, prevYs[0] ];\n        }\n      } else {\n        baseline[point.canvasx] = point.canvasy;\n      }\n\n      if (!isNaN(prevX)) {\n\t\t\t\tif (e.setName === setName) {\n        \t// Move to top fill point\n        \tif (stepPlot) {\n        \t  ctx.lineTo(point.canvasx, prevYs[0]);\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t} else {\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t}\n        }\n\n        // Record the baseline for the reverse path.\n        pathBack.push([prevX, prevYs[1]]);\n        if (prevStepPlot && currBaseline) {\n          // Draw to the bottom of the baseline\n          pathBack.push([point.canvasx, currBaseline[1]]);\n        } else {\n          pathBack.push([point.canvasx, newYs[1]]);\n        }\n      } else if (e.setName === setName) {\n        ctx.moveTo(point.canvasx, newYs[1]);\n        ctx.lineTo(point.canvasx, newYs[0]);\n      }\n      prevYs = newYs;\n      prevX = point.canvasx;\n\t\t}\n    prevStepPlot = stepPlot;\n    if (newYs && point) {\n      if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\tctx, point.canvasx, newYs[1], pathBack);\n      pathBack = [];\n    }\n    ctx.fill();\n\t}\n}","group":"Not consideredNot responsiveNot flexibleNot exploitedExploited"},"Not flexible":{"axis":"y","plotter":"// the _lineplotter function extracted from dygraphs-combined-dev.js, available for use in conjunction with other per-series plotters and group plotters\n\nfunction linePlotter(e) {\n  //extracting and reducing the Dygraph.stackPoints_ function\n  stackPoints = function(points, cumulativeYval, seriesExtremes, fillMethod) {\n    var lastXval = null;\n    var prevPoint = null;\n    var nextPoint = null;\n    var nextPointIdx = -1;\n  \n    // Find the next stackable point starting from the given index.\n    var updateNextPoint = function(idx) {\n      // If we've previously found a non-NaN point and haven't gone past it yet,\n      // just use that.\n      if (nextPointIdx >= idx) return;\n  \n      // We haven't found a non-NaN point yet or have moved past it,\n      // look towards the right to find a non-NaN point.\n      for (var j = idx; j < points.length; ++j) {\n        // Clear out a previously-found point (if any) since it's no longer\n        // valid, we shouldn't use it for interpolation anymore.\n        nextPoint = null;\n        if (!isNaN(points[j].yval) && points[j].yval !== null) {\n          nextPointIdx = j;\n          nextPoint = points[j];\n          break;\n        }\n      }\n    };\n  \n    for (var i = 0; i < points.length; ++i) {\n      var point = points[i];\n      var xval = point.xval;\n      if (cumulativeYval[xval] === undefined) {\n        cumulativeYval[xval] = 0;\n      }\n  \n      var actualYval = point.yval;\n      if (isNaN(actualYval) || actualYval === null) {\n        if(fillMethod == 'none') {\n          actualYval = 0;\n        } else {\n          // Interpolate/extend for stacking purposes if possible.\n          updateNextPoint(i);\n          if (prevPoint && nextPoint && fillMethod != 'none') {\n            // Use linear interpolation between prevPoint and nextPoint.\n            actualYval = prevPoint.yval + (nextPoint.yval - prevPoint.yval) *\n                ((xval - prevPoint.xval) / (nextPoint.xval - prevPoint.xval));\n          } else if (prevPoint && fillMethod == 'all') {\n            actualYval = prevPoint.yval;\n          } else if (nextPoint && fillMethod == 'all') {\n            actualYval = nextPoint.yval;\n          } else {\n            actualYval = 0;\n          }\n        }\n      } else {\n        prevPoint = point;\n      }\n  \n      var stackedYval = cumulativeYval[xval];\n      if (lastXval != xval) {\n        // If an x-value is repeated, we ignore the duplicates.\n        stackedYval += actualYval;\n        cumulativeYval[xval] = stackedYval;\n      }\n      lastXval = xval;\n  \n      point.yval_stacked = stackedYval;\n      \n      if (stackedYval > seriesExtremes[1]) {\n        seriesExtremes[1] = stackedYval;\n      }\n      if (stackedYval < seriesExtremes[0]) {\n        seriesExtremes[0] = stackedYval;\n      }\n  \n    }\n  };\n  \n  // BEGIN HEADER BLOCK\n  // This first block can be copied to other plotters to capture the group \n  var g = e.dygraph;\n  \n  var group;\n  var groupIdx = [];\n  var sets = [];\n  var allSets = e.allSeriesPoints;\n  var minIdx = Infinity;\n  var setName = e.setName;\n  var setNames = g.getLabels().slice(1);\n  var groupSetNames = [];\n  var fillColors = [];\n  var strokeColors = g.getColors();\n  // this next one we use further down, but will be populated in a decreasing loop,\n  // so we'll establish the size in this forward loop so it has the structure to accept\n  // later on.\n  var seriesExtremes = [];\n  \n  var currGroup = g.attr_(\"group\", setName);\n  \n  for (var setIdx = 0; setIdx < allSets.length; setIdx++) {\n    // get the name and group of the current setIdx\n    setName = setNames[setIdx];\n    group = g.attr_(\"group\", setName);\n\n    if (group === currGroup) {\n      //save the indv index and the points\n      groupIdx.push(setIdx);\n      sets.push(allSets[setIdx]);\n      groupSetNames.push(setName);\n      fillColors.push(strokeColors[setIdx]);\n     \n      // the aforementioned stuff for later on \n      var tmpExtremes = [];\n      tmpExtremes[0] = Infinity;\n      tmpExtremes[1] = -Infinity;\n      \n      seriesExtremes.push(tmpExtremes);\n      \n      // capturing the min indx helps to ensure we don't render the plotter\n      // multiple times\n      if (setIdx < minIdx) minIdx = setIdx;\n    }\n  }\n  // END HEADER BLOCK\n\t\n\t//Stack the points\n  // set up cumulative records\n  var cumulativeYval = [];\n  var packed = g.gatherDatasets_(g.rolledSeries_, null);\n  var extremes = packed.extremes;\n  var seriesName;\n  \n  for (var j = sets.length - 1; j >= 0; j--) {\n    points = sets[j];\n    seriesName = groupSetNames[j]; \n    \n    //  stack the data \n    stackPoints(points, cumulativeYval, seriesExtremes[j],\n          g.getBooleanOption(\"stackedGraphNaNFill\"));\n    \n    extremes[seriesName] = seriesExtremes[j];\n  }\n  \n\t// Helper function to trace a line back along the baseline.\n  var traceBackPath = function(ctx, baselineX, baselineY, pathBack) {\n    ctx.lineTo(baselineX, baselineY);\n    for (var i = pathBack.length - 1; i >= 0; i--) {\n      var pt = pathBack[i];\n      ctx.lineTo(pt[0], pt[1]);\n    }\n  };\n  \n\t// Do the actual plotting.\n\t\t\t\t// First, we'll plot the line for this series, then...\n\t\t\t\t// Second, we'll add the fills\n\t\t\t\t// In contrast to stackedlinegroup, we do this in reverse\n\t\t\t\t// order to align with the fillplotter\n\tvar area = e.plotArea;\n  var fillAlpha = g.getNumericOption('fillAlpha');\n\t\n\tvar baseline = {};\n  var currBaseline;\n  var prevStepPlot;  // for different line drawing modes (line/step) per series\n\n  var ctx = e.drawingContext;\n    \n\t// For filled charts, we draw points from left to right, then back along\n  // the x-axis to complete a shape for filling.\n  // For stacked plots, this \"back path\" is a more complex shape. This array\n  // stores the [x, y] values needed to trace that shape.\n  var pathBack = [];\n\n\t//We'll save the group indices of the current set,\n\t\t\t\t// so as to test later and hopefully skip \n\t\t\t\t// past needless iterations of the loops\n\tvar currSetIdx;\n\t//Now a quick FOR loop to capture the group indices\n  for (var j = sets.length - 1; j >= 0; j--) {\n    seriesName = groupSetNames[j]; \n\t\tif (seriesName === e.setName) currSetIdx = j;\n  }\n  \n\tfor (var j = sets.length - 1; j >= 0; j--) {\n\t\t// If we're not dealing with the immediate plotted series or it's\n\t\t\t\t\t// immediate predecesor, skip all this stuff below\n\t\tif (j > (currSetIdx + 1) || j < currSetIdx) continue;\n\n    setName = groupSetNames[j];\n\n\t\tvar connectSeparated = g.getOption('connectSeparatedPoints', setName);\n    var logscale = g.attributes_.getForSeries(\"logscale\", setName);\n    \n    axis = g.axisPropertiesForSeries(setName);\n    \n    points = sets[j];\n    \n    for (var i = 0; i < points.length; i++) {\n      var point = points[i];\n      \n      var yval = point.yval;\n      \n      point.y_stacked = DygraphLayout.calcYNormal_(\n          axis, point.yval_stacked, logscale);\n          \n      if (yval !== null && !isNaN(yval)) {\n        yval = point.yval_stacked;\n      }\n      if (yval === null) {\n        yval = NaN;\n        if (!connectSeparated) {\n          point.yval = NaN;\n        }\n      }\n      point.y = DygraphLayout.calcYNormal_(axis, yval, logscale);\n    \n      point.canvasx = g.plotter_.area.w * point.x + g.plotter_.area.x;\n      point.canvasy = g.plotter_.area.h * point.y + g.plotter_.area.y;\n\t\t}\n\n\t\te.points = points;\n\n\t  var strokeWidth = e.strokeWidth;\n\t\n\t  var borderWidth = g.getNumericOption(\"strokeBorderWidth\", setName);\n\t  var drawPointCallback = g.getOption(\"drawPointCallback\", setName) ||\n\t      Dygraph.Circles.DEFAULT;\n\t  var strokePattern = g.getOption(\"strokePattern\", setName);\n\t  var drawPoints = g.getBooleanOption(\"drawPoints\", setName);\n\t  var pointSize = g.getNumericOption(\"pointSize\", setName);\n\t\t\n\t\t// We'll only draw the line plotter if the current series matches\n\t\t\t\t\t// the one in the top-level plotter call\n\t\tif (setName === e.setName) {\n\t  \tif (borderWidth && strokeWidth) {\n\t  \t  DygraphCanvasRenderer._drawStyledLine(e,\n\t  \t      g.getOption(\"strokeBorderColor\", setName),\n\t  \t      strokeWidth + 2 * borderWidth,\n\t  \t      strokePattern,\n\t  \t      drawPoints,\n\t  \t      drawPointCallback,\n\t  \t      pointSize\n\t  \t      );\n\t  \t}\n\t\n\t  \tDygraphCanvasRenderer._drawStyledLine(e,\n\t  \t    e.color,\n\t  \t    strokeWidth,\n\t  \t    strokePattern,\n\t  \t    drawPoints,\n\t  \t    drawPointCallback,\n\t  \t    pointSize\n\t  \t);\n\t\t}\n\t\t//END OF THE LINE PLOTTER\n\t\t\t\t\t//\n\t\t//BEGIN THE FILL\n    var stepPlot = g.getBooleanOption('stepPlot', setName);\n\t\tvar color = e.color;\n\t\tvar axis = g.axisPropertiesForSeries(setName);\n    var axisY = 1.0 + axis.minyval * axis.yscale;\n    if (axisY < 0.0) axisY = 0.0;\n    else if (axisY > 1.0) axisY = 1.0;\n    axisY = area.h * axisY + area.y;\n\n\n\t\t// setup graphics context\n  \tvar prevX = NaN;\n  \tvar prevYs = [-1, -1];\n  \tvar newYs;\n  \t\n\t\t// should be same color as the lines but only 15% opaque.\n  \tvar rgb = Dygraph.toRGB_(color);\n  \tvar err_color =\n  \t    'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + fillAlpha + ')';\n    \n\n    var iter = Dygraph.createIterator(points, 0, points.length,\n        DygraphCanvasRenderer._getIteratorPredicate(\n            g.getBooleanOption(\"connectSeparatedPoints\", setName)));\n\n    ctx.fillStyle = err_color;\n    ctx.beginPath();\n    var last_x, is_first = true;\n\n    // If the point density is high enough, dropping segments on their way to\n    // the canvas justifies the overhead of doing so.\n    if (points.length > 2 * g.width_ || Dygraph.FORCE_FAST_PROXY) {\n      ctx = DygraphCanvasRenderer._fastCanvasProxy(ctx);\n    }\n\n    // TODO(danvk): there are a lot of options at play in this loop.\n    //     The logic would be much clearer if some (e.g. stackGraph and\n    //     stepPlot) were split off into separate sub-plotters.\n    var point;\n\n\t\t// Throughout this loop, we test to see if the top-level called series\n\t\t\t\t\t// matches the one current in the parent FOR loop.  If not, we skip\n\t\t\t\t\t// the parts that draw the line but leave the others so the pathback\n\t\t\t\t\t// and prevYs and prevXs still get properly populated\n    while (iter.hasNext) {\n      point = iter.next();\n      if (!Dygraph.isOK(point.y) && !stepPlot) {\n\t\t\t\t//\n        if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\t\tctx, prevX, prevYs[1], pathBack);\n        pathBack = [];\n        prevX = NaN;\n        if (point.y_stacked !== null && !isNaN(point.y_stacked)) {\n          baseline[point.canvasx] = area.h * point.y_stacked + area.y;\n        }\n        continue;\n      }\n      if (!is_first && last_x == point.xval) {\n        continue;\n      } else {\n        is_first = false;\n        last_x = point.xval;\n      }\n\n      currBaseline = baseline[point.canvasx];\n      var lastY;\n      if (currBaseline === undefined) {\n        lastY = axisY;\n      } else {\n        if(prevStepPlot) {\n          lastY = currBaseline[0];\n        } else {\n          lastY = currBaseline;\n        }\n      }\n      newYs = [ point.canvasy, lastY ];\n\n      if (stepPlot) {\n        // Step plots must keep track of the top and bottom of\n        // the baseline at each point.\n        if (prevYs[0] === -1) {\n          baseline[point.canvasx] = [ point.canvasy, axisY ];\n        } else {\n          baseline[point.canvasx] = [ point.canvasy, prevYs[0] ];\n        }\n      } else {\n        baseline[point.canvasx] = point.canvasy;\n      }\n\n      if (!isNaN(prevX)) {\n\t\t\t\tif (e.setName === setName) {\n        \t// Move to top fill point\n        \tif (stepPlot) {\n        \t  ctx.lineTo(point.canvasx, prevYs[0]);\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t} else {\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t}\n        }\n\n        // Record the baseline for the reverse path.\n        pathBack.push([prevX, prevYs[1]]);\n        if (prevStepPlot && currBaseline) {\n          // Draw to the bottom of the baseline\n          pathBack.push([point.canvasx, currBaseline[1]]);\n        } else {\n          pathBack.push([point.canvasx, newYs[1]]);\n        }\n      } else if (e.setName === setName) {\n        ctx.moveTo(point.canvasx, newYs[1]);\n        ctx.lineTo(point.canvasx, newYs[0]);\n      }\n      prevYs = newYs;\n      prevX = point.canvasx;\n\t\t}\n    prevStepPlot = stepPlot;\n    if (newYs && point) {\n      if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\tctx, point.canvasx, newYs[1], pathBack);\n      pathBack = [];\n    }\n    ctx.fill();\n\t}\n}","group":"Not consideredNot responsiveNot flexibleNot exploitedExploited"},"Not exploited":{"axis":"y","plotter":"// the _lineplotter function extracted from dygraphs-combined-dev.js, available for use in conjunction with other per-series plotters and group plotters\n\nfunction linePlotter(e) {\n  //extracting and reducing the Dygraph.stackPoints_ function\n  stackPoints = function(points, cumulativeYval, seriesExtremes, fillMethod) {\n    var lastXval = null;\n    var prevPoint = null;\n    var nextPoint = null;\n    var nextPointIdx = -1;\n  \n    // Find the next stackable point starting from the given index.\n    var updateNextPoint = function(idx) {\n      // If we've previously found a non-NaN point and haven't gone past it yet,\n      // just use that.\n      if (nextPointIdx >= idx) return;\n  \n      // We haven't found a non-NaN point yet or have moved past it,\n      // look towards the right to find a non-NaN point.\n      for (var j = idx; j < points.length; ++j) {\n        // Clear out a previously-found point (if any) since it's no longer\n        // valid, we shouldn't use it for interpolation anymore.\n        nextPoint = null;\n        if (!isNaN(points[j].yval) && points[j].yval !== null) {\n          nextPointIdx = j;\n          nextPoint = points[j];\n          break;\n        }\n      }\n    };\n  \n    for (var i = 0; i < points.length; ++i) {\n      var point = points[i];\n      var xval = point.xval;\n      if (cumulativeYval[xval] === undefined) {\n        cumulativeYval[xval] = 0;\n      }\n  \n      var actualYval = point.yval;\n      if (isNaN(actualYval) || actualYval === null) {\n        if(fillMethod == 'none') {\n          actualYval = 0;\n        } else {\n          // Interpolate/extend for stacking purposes if possible.\n          updateNextPoint(i);\n          if (prevPoint && nextPoint && fillMethod != 'none') {\n            // Use linear interpolation between prevPoint and nextPoint.\n            actualYval = prevPoint.yval + (nextPoint.yval - prevPoint.yval) *\n                ((xval - prevPoint.xval) / (nextPoint.xval - prevPoint.xval));\n          } else if (prevPoint && fillMethod == 'all') {\n            actualYval = prevPoint.yval;\n          } else if (nextPoint && fillMethod == 'all') {\n            actualYval = nextPoint.yval;\n          } else {\n            actualYval = 0;\n          }\n        }\n      } else {\n        prevPoint = point;\n      }\n  \n      var stackedYval = cumulativeYval[xval];\n      if (lastXval != xval) {\n        // If an x-value is repeated, we ignore the duplicates.\n        stackedYval += actualYval;\n        cumulativeYval[xval] = stackedYval;\n      }\n      lastXval = xval;\n  \n      point.yval_stacked = stackedYval;\n      \n      if (stackedYval > seriesExtremes[1]) {\n        seriesExtremes[1] = stackedYval;\n      }\n      if (stackedYval < seriesExtremes[0]) {\n        seriesExtremes[0] = stackedYval;\n      }\n  \n    }\n  };\n  \n  // BEGIN HEADER BLOCK\n  // This first block can be copied to other plotters to capture the group \n  var g = e.dygraph;\n  \n  var group;\n  var groupIdx = [];\n  var sets = [];\n  var allSets = e.allSeriesPoints;\n  var minIdx = Infinity;\n  var setName = e.setName;\n  var setNames = g.getLabels().slice(1);\n  var groupSetNames = [];\n  var fillColors = [];\n  var strokeColors = g.getColors();\n  // this next one we use further down, but will be populated in a decreasing loop,\n  // so we'll establish the size in this forward loop so it has the structure to accept\n  // later on.\n  var seriesExtremes = [];\n  \n  var currGroup = g.attr_(\"group\", setName);\n  \n  for (var setIdx = 0; setIdx < allSets.length; setIdx++) {\n    // get the name and group of the current setIdx\n    setName = setNames[setIdx];\n    group = g.attr_(\"group\", setName);\n\n    if (group === currGroup) {\n      //save the indv index and the points\n      groupIdx.push(setIdx);\n      sets.push(allSets[setIdx]);\n      groupSetNames.push(setName);\n      fillColors.push(strokeColors[setIdx]);\n     \n      // the aforementioned stuff for later on \n      var tmpExtremes = [];\n      tmpExtremes[0] = Infinity;\n      tmpExtremes[1] = -Infinity;\n      \n      seriesExtremes.push(tmpExtremes);\n      \n      // capturing the min indx helps to ensure we don't render the plotter\n      // multiple times\n      if (setIdx < minIdx) minIdx = setIdx;\n    }\n  }\n  // END HEADER BLOCK\n\t\n\t//Stack the points\n  // set up cumulative records\n  var cumulativeYval = [];\n  var packed = g.gatherDatasets_(g.rolledSeries_, null);\n  var extremes = packed.extremes;\n  var seriesName;\n  \n  for (var j = sets.length - 1; j >= 0; j--) {\n    points = sets[j];\n    seriesName = groupSetNames[j]; \n    \n    //  stack the data \n    stackPoints(points, cumulativeYval, seriesExtremes[j],\n          g.getBooleanOption(\"stackedGraphNaNFill\"));\n    \n    extremes[seriesName] = seriesExtremes[j];\n  }\n  \n\t// Helper function to trace a line back along the baseline.\n  var traceBackPath = function(ctx, baselineX, baselineY, pathBack) {\n    ctx.lineTo(baselineX, baselineY);\n    for (var i = pathBack.length - 1; i >= 0; i--) {\n      var pt = pathBack[i];\n      ctx.lineTo(pt[0], pt[1]);\n    }\n  };\n  \n\t// Do the actual plotting.\n\t\t\t\t// First, we'll plot the line for this series, then...\n\t\t\t\t// Second, we'll add the fills\n\t\t\t\t// In contrast to stackedlinegroup, we do this in reverse\n\t\t\t\t// order to align with the fillplotter\n\tvar area = e.plotArea;\n  var fillAlpha = g.getNumericOption('fillAlpha');\n\t\n\tvar baseline = {};\n  var currBaseline;\n  var prevStepPlot;  // for different line drawing modes (line/step) per series\n\n  var ctx = e.drawingContext;\n    \n\t// For filled charts, we draw points from left to right, then back along\n  // the x-axis to complete a shape for filling.\n  // For stacked plots, this \"back path\" is a more complex shape. This array\n  // stores the [x, y] values needed to trace that shape.\n  var pathBack = [];\n\n\t//We'll save the group indices of the current set,\n\t\t\t\t// so as to test later and hopefully skip \n\t\t\t\t// past needless iterations of the loops\n\tvar currSetIdx;\n\t//Now a quick FOR loop to capture the group indices\n  for (var j = sets.length - 1; j >= 0; j--) {\n    seriesName = groupSetNames[j]; \n\t\tif (seriesName === e.setName) currSetIdx = j;\n  }\n  \n\tfor (var j = sets.length - 1; j >= 0; j--) {\n\t\t// If we're not dealing with the immediate plotted series or it's\n\t\t\t\t\t// immediate predecesor, skip all this stuff below\n\t\tif (j > (currSetIdx + 1) || j < currSetIdx) continue;\n\n    setName = groupSetNames[j];\n\n\t\tvar connectSeparated = g.getOption('connectSeparatedPoints', setName);\n    var logscale = g.attributes_.getForSeries(\"logscale\", setName);\n    \n    axis = g.axisPropertiesForSeries(setName);\n    \n    points = sets[j];\n    \n    for (var i = 0; i < points.length; i++) {\n      var point = points[i];\n      \n      var yval = point.yval;\n      \n      point.y_stacked = DygraphLayout.calcYNormal_(\n          axis, point.yval_stacked, logscale);\n          \n      if (yval !== null && !isNaN(yval)) {\n        yval = point.yval_stacked;\n      }\n      if (yval === null) {\n        yval = NaN;\n        if (!connectSeparated) {\n          point.yval = NaN;\n        }\n      }\n      point.y = DygraphLayout.calcYNormal_(axis, yval, logscale);\n    \n      point.canvasx = g.plotter_.area.w * point.x + g.plotter_.area.x;\n      point.canvasy = g.plotter_.area.h * point.y + g.plotter_.area.y;\n\t\t}\n\n\t\te.points = points;\n\n\t  var strokeWidth = e.strokeWidth;\n\t\n\t  var borderWidth = g.getNumericOption(\"strokeBorderWidth\", setName);\n\t  var drawPointCallback = g.getOption(\"drawPointCallback\", setName) ||\n\t      Dygraph.Circles.DEFAULT;\n\t  var strokePattern = g.getOption(\"strokePattern\", setName);\n\t  var drawPoints = g.getBooleanOption(\"drawPoints\", setName);\n\t  var pointSize = g.getNumericOption(\"pointSize\", setName);\n\t\t\n\t\t// We'll only draw the line plotter if the current series matches\n\t\t\t\t\t// the one in the top-level plotter call\n\t\tif (setName === e.setName) {\n\t  \tif (borderWidth && strokeWidth) {\n\t  \t  DygraphCanvasRenderer._drawStyledLine(e,\n\t  \t      g.getOption(\"strokeBorderColor\", setName),\n\t  \t      strokeWidth + 2 * borderWidth,\n\t  \t      strokePattern,\n\t  \t      drawPoints,\n\t  \t      drawPointCallback,\n\t  \t      pointSize\n\t  \t      );\n\t  \t}\n\t\n\t  \tDygraphCanvasRenderer._drawStyledLine(e,\n\t  \t    e.color,\n\t  \t    strokeWidth,\n\t  \t    strokePattern,\n\t  \t    drawPoints,\n\t  \t    drawPointCallback,\n\t  \t    pointSize\n\t  \t);\n\t\t}\n\t\t//END OF THE LINE PLOTTER\n\t\t\t\t\t//\n\t\t//BEGIN THE FILL\n    var stepPlot = g.getBooleanOption('stepPlot', setName);\n\t\tvar color = e.color;\n\t\tvar axis = g.axisPropertiesForSeries(setName);\n    var axisY = 1.0 + axis.minyval * axis.yscale;\n    if (axisY < 0.0) axisY = 0.0;\n    else if (axisY > 1.0) axisY = 1.0;\n    axisY = area.h * axisY + area.y;\n\n\n\t\t// setup graphics context\n  \tvar prevX = NaN;\n  \tvar prevYs = [-1, -1];\n  \tvar newYs;\n  \t\n\t\t// should be same color as the lines but only 15% opaque.\n  \tvar rgb = Dygraph.toRGB_(color);\n  \tvar err_color =\n  \t    'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + fillAlpha + ')';\n    \n\n    var iter = Dygraph.createIterator(points, 0, points.length,\n        DygraphCanvasRenderer._getIteratorPredicate(\n            g.getBooleanOption(\"connectSeparatedPoints\", setName)));\n\n    ctx.fillStyle = err_color;\n    ctx.beginPath();\n    var last_x, is_first = true;\n\n    // If the point density is high enough, dropping segments on their way to\n    // the canvas justifies the overhead of doing so.\n    if (points.length > 2 * g.width_ || Dygraph.FORCE_FAST_PROXY) {\n      ctx = DygraphCanvasRenderer._fastCanvasProxy(ctx);\n    }\n\n    // TODO(danvk): there are a lot of options at play in this loop.\n    //     The logic would be much clearer if some (e.g. stackGraph and\n    //     stepPlot) were split off into separate sub-plotters.\n    var point;\n\n\t\t// Throughout this loop, we test to see if the top-level called series\n\t\t\t\t\t// matches the one current in the parent FOR loop.  If not, we skip\n\t\t\t\t\t// the parts that draw the line but leave the others so the pathback\n\t\t\t\t\t// and prevYs and prevXs still get properly populated\n    while (iter.hasNext) {\n      point = iter.next();\n      if (!Dygraph.isOK(point.y) && !stepPlot) {\n\t\t\t\t//\n        if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\t\tctx, prevX, prevYs[1], pathBack);\n        pathBack = [];\n        prevX = NaN;\n        if (point.y_stacked !== null && !isNaN(point.y_stacked)) {\n          baseline[point.canvasx] = area.h * point.y_stacked + area.y;\n        }\n        continue;\n      }\n      if (!is_first && last_x == point.xval) {\n        continue;\n      } else {\n        is_first = false;\n        last_x = point.xval;\n      }\n\n      currBaseline = baseline[point.canvasx];\n      var lastY;\n      if (currBaseline === undefined) {\n        lastY = axisY;\n      } else {\n        if(prevStepPlot) {\n          lastY = currBaseline[0];\n        } else {\n          lastY = currBaseline;\n        }\n      }\n      newYs = [ point.canvasy, lastY ];\n\n      if (stepPlot) {\n        // Step plots must keep track of the top and bottom of\n        // the baseline at each point.\n        if (prevYs[0] === -1) {\n          baseline[point.canvasx] = [ point.canvasy, axisY ];\n        } else {\n          baseline[point.canvasx] = [ point.canvasy, prevYs[0] ];\n        }\n      } else {\n        baseline[point.canvasx] = point.canvasy;\n      }\n\n      if (!isNaN(prevX)) {\n\t\t\t\tif (e.setName === setName) {\n        \t// Move to top fill point\n        \tif (stepPlot) {\n        \t  ctx.lineTo(point.canvasx, prevYs[0]);\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t} else {\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t}\n        }\n\n        // Record the baseline for the reverse path.\n        pathBack.push([prevX, prevYs[1]]);\n        if (prevStepPlot && currBaseline) {\n          // Draw to the bottom of the baseline\n          pathBack.push([point.canvasx, currBaseline[1]]);\n        } else {\n          pathBack.push([point.canvasx, newYs[1]]);\n        }\n      } else if (e.setName === setName) {\n        ctx.moveTo(point.canvasx, newYs[1]);\n        ctx.lineTo(point.canvasx, newYs[0]);\n      }\n      prevYs = newYs;\n      prevX = point.canvasx;\n\t\t}\n    prevStepPlot = stepPlot;\n    if (newYs && point) {\n      if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\tctx, point.canvasx, newYs[1], pathBack);\n      pathBack = [];\n    }\n    ctx.fill();\n\t}\n}","group":"Not consideredNot responsiveNot flexibleNot exploitedExploited"},"Exploited":{"axis":"y","plotter":"// the _lineplotter function extracted from dygraphs-combined-dev.js, available for use in conjunction with other per-series plotters and group plotters\n\nfunction linePlotter(e) {\n  //extracting and reducing the Dygraph.stackPoints_ function\n  stackPoints = function(points, cumulativeYval, seriesExtremes, fillMethod) {\n    var lastXval = null;\n    var prevPoint = null;\n    var nextPoint = null;\n    var nextPointIdx = -1;\n  \n    // Find the next stackable point starting from the given index.\n    var updateNextPoint = function(idx) {\n      // If we've previously found a non-NaN point and haven't gone past it yet,\n      // just use that.\n      if (nextPointIdx >= idx) return;\n  \n      // We haven't found a non-NaN point yet or have moved past it,\n      // look towards the right to find a non-NaN point.\n      for (var j = idx; j < points.length; ++j) {\n        // Clear out a previously-found point (if any) since it's no longer\n        // valid, we shouldn't use it for interpolation anymore.\n        nextPoint = null;\n        if (!isNaN(points[j].yval) && points[j].yval !== null) {\n          nextPointIdx = j;\n          nextPoint = points[j];\n          break;\n        }\n      }\n    };\n  \n    for (var i = 0; i < points.length; ++i) {\n      var point = points[i];\n      var xval = point.xval;\n      if (cumulativeYval[xval] === undefined) {\n        cumulativeYval[xval] = 0;\n      }\n  \n      var actualYval = point.yval;\n      if (isNaN(actualYval) || actualYval === null) {\n        if(fillMethod == 'none') {\n          actualYval = 0;\n        } else {\n          // Interpolate/extend for stacking purposes if possible.\n          updateNextPoint(i);\n          if (prevPoint && nextPoint && fillMethod != 'none') {\n            // Use linear interpolation between prevPoint and nextPoint.\n            actualYval = prevPoint.yval + (nextPoint.yval - prevPoint.yval) *\n                ((xval - prevPoint.xval) / (nextPoint.xval - prevPoint.xval));\n          } else if (prevPoint && fillMethod == 'all') {\n            actualYval = prevPoint.yval;\n          } else if (nextPoint && fillMethod == 'all') {\n            actualYval = nextPoint.yval;\n          } else {\n            actualYval = 0;\n          }\n        }\n      } else {\n        prevPoint = point;\n      }\n  \n      var stackedYval = cumulativeYval[xval];\n      if (lastXval != xval) {\n        // If an x-value is repeated, we ignore the duplicates.\n        stackedYval += actualYval;\n        cumulativeYval[xval] = stackedYval;\n      }\n      lastXval = xval;\n  \n      point.yval_stacked = stackedYval;\n      \n      if (stackedYval > seriesExtremes[1]) {\n        seriesExtremes[1] = stackedYval;\n      }\n      if (stackedYval < seriesExtremes[0]) {\n        seriesExtremes[0] = stackedYval;\n      }\n  \n    }\n  };\n  \n  // BEGIN HEADER BLOCK\n  // This first block can be copied to other plotters to capture the group \n  var g = e.dygraph;\n  \n  var group;\n  var groupIdx = [];\n  var sets = [];\n  var allSets = e.allSeriesPoints;\n  var minIdx = Infinity;\n  var setName = e.setName;\n  var setNames = g.getLabels().slice(1);\n  var groupSetNames = [];\n  var fillColors = [];\n  var strokeColors = g.getColors();\n  // this next one we use further down, but will be populated in a decreasing loop,\n  // so we'll establish the size in this forward loop so it has the structure to accept\n  // later on.\n  var seriesExtremes = [];\n  \n  var currGroup = g.attr_(\"group\", setName);\n  \n  for (var setIdx = 0; setIdx < allSets.length; setIdx++) {\n    // get the name and group of the current setIdx\n    setName = setNames[setIdx];\n    group = g.attr_(\"group\", setName);\n\n    if (group === currGroup) {\n      //save the indv index and the points\n      groupIdx.push(setIdx);\n      sets.push(allSets[setIdx]);\n      groupSetNames.push(setName);\n      fillColors.push(strokeColors[setIdx]);\n     \n      // the aforementioned stuff for later on \n      var tmpExtremes = [];\n      tmpExtremes[0] = Infinity;\n      tmpExtremes[1] = -Infinity;\n      \n      seriesExtremes.push(tmpExtremes);\n      \n      // capturing the min indx helps to ensure we don't render the plotter\n      // multiple times\n      if (setIdx < minIdx) minIdx = setIdx;\n    }\n  }\n  // END HEADER BLOCK\n\t\n\t//Stack the points\n  // set up cumulative records\n  var cumulativeYval = [];\n  var packed = g.gatherDatasets_(g.rolledSeries_, null);\n  var extremes = packed.extremes;\n  var seriesName;\n  \n  for (var j = sets.length - 1; j >= 0; j--) {\n    points = sets[j];\n    seriesName = groupSetNames[j]; \n    \n    //  stack the data \n    stackPoints(points, cumulativeYval, seriesExtremes[j],\n          g.getBooleanOption(\"stackedGraphNaNFill\"));\n    \n    extremes[seriesName] = seriesExtremes[j];\n  }\n  \n\t// Helper function to trace a line back along the baseline.\n  var traceBackPath = function(ctx, baselineX, baselineY, pathBack) {\n    ctx.lineTo(baselineX, baselineY);\n    for (var i = pathBack.length - 1; i >= 0; i--) {\n      var pt = pathBack[i];\n      ctx.lineTo(pt[0], pt[1]);\n    }\n  };\n  \n\t// Do the actual plotting.\n\t\t\t\t// First, we'll plot the line for this series, then...\n\t\t\t\t// Second, we'll add the fills\n\t\t\t\t// In contrast to stackedlinegroup, we do this in reverse\n\t\t\t\t// order to align with the fillplotter\n\tvar area = e.plotArea;\n  var fillAlpha = g.getNumericOption('fillAlpha');\n\t\n\tvar baseline = {};\n  var currBaseline;\n  var prevStepPlot;  // for different line drawing modes (line/step) per series\n\n  var ctx = e.drawingContext;\n    \n\t// For filled charts, we draw points from left to right, then back along\n  // the x-axis to complete a shape for filling.\n  // For stacked plots, this \"back path\" is a more complex shape. This array\n  // stores the [x, y] values needed to trace that shape.\n  var pathBack = [];\n\n\t//We'll save the group indices of the current set,\n\t\t\t\t// so as to test later and hopefully skip \n\t\t\t\t// past needless iterations of the loops\n\tvar currSetIdx;\n\t//Now a quick FOR loop to capture the group indices\n  for (var j = sets.length - 1; j >= 0; j--) {\n    seriesName = groupSetNames[j]; \n\t\tif (seriesName === e.setName) currSetIdx = j;\n  }\n  \n\tfor (var j = sets.length - 1; j >= 0; j--) {\n\t\t// If we're not dealing with the immediate plotted series or it's\n\t\t\t\t\t// immediate predecesor, skip all this stuff below\n\t\tif (j > (currSetIdx + 1) || j < currSetIdx) continue;\n\n    setName = groupSetNames[j];\n\n\t\tvar connectSeparated = g.getOption('connectSeparatedPoints', setName);\n    var logscale = g.attributes_.getForSeries(\"logscale\", setName);\n    \n    axis = g.axisPropertiesForSeries(setName);\n    \n    points = sets[j];\n    \n    for (var i = 0; i < points.length; i++) {\n      var point = points[i];\n      \n      var yval = point.yval;\n      \n      point.y_stacked = DygraphLayout.calcYNormal_(\n          axis, point.yval_stacked, logscale);\n          \n      if (yval !== null && !isNaN(yval)) {\n        yval = point.yval_stacked;\n      }\n      if (yval === null) {\n        yval = NaN;\n        if (!connectSeparated) {\n          point.yval = NaN;\n        }\n      }\n      point.y = DygraphLayout.calcYNormal_(axis, yval, logscale);\n    \n      point.canvasx = g.plotter_.area.w * point.x + g.plotter_.area.x;\n      point.canvasy = g.plotter_.area.h * point.y + g.plotter_.area.y;\n\t\t}\n\n\t\te.points = points;\n\n\t  var strokeWidth = e.strokeWidth;\n\t\n\t  var borderWidth = g.getNumericOption(\"strokeBorderWidth\", setName);\n\t  var drawPointCallback = g.getOption(\"drawPointCallback\", setName) ||\n\t      Dygraph.Circles.DEFAULT;\n\t  var strokePattern = g.getOption(\"strokePattern\", setName);\n\t  var drawPoints = g.getBooleanOption(\"drawPoints\", setName);\n\t  var pointSize = g.getNumericOption(\"pointSize\", setName);\n\t\t\n\t\t// We'll only draw the line plotter if the current series matches\n\t\t\t\t\t// the one in the top-level plotter call\n\t\tif (setName === e.setName) {\n\t  \tif (borderWidth && strokeWidth) {\n\t  \t  DygraphCanvasRenderer._drawStyledLine(e,\n\t  \t      g.getOption(\"strokeBorderColor\", setName),\n\t  \t      strokeWidth + 2 * borderWidth,\n\t  \t      strokePattern,\n\t  \t      drawPoints,\n\t  \t      drawPointCallback,\n\t  \t      pointSize\n\t  \t      );\n\t  \t}\n\t\n\t  \tDygraphCanvasRenderer._drawStyledLine(e,\n\t  \t    e.color,\n\t  \t    strokeWidth,\n\t  \t    strokePattern,\n\t  \t    drawPoints,\n\t  \t    drawPointCallback,\n\t  \t    pointSize\n\t  \t);\n\t\t}\n\t\t//END OF THE LINE PLOTTER\n\t\t\t\t\t//\n\t\t//BEGIN THE FILL\n    var stepPlot = g.getBooleanOption('stepPlot', setName);\n\t\tvar color = e.color;\n\t\tvar axis = g.axisPropertiesForSeries(setName);\n    var axisY = 1.0 + axis.minyval * axis.yscale;\n    if (axisY < 0.0) axisY = 0.0;\n    else if (axisY > 1.0) axisY = 1.0;\n    axisY = area.h * axisY + area.y;\n\n\n\t\t// setup graphics context\n  \tvar prevX = NaN;\n  \tvar prevYs = [-1, -1];\n  \tvar newYs;\n  \t\n\t\t// should be same color as the lines but only 15% opaque.\n  \tvar rgb = Dygraph.toRGB_(color);\n  \tvar err_color =\n  \t    'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + fillAlpha + ')';\n    \n\n    var iter = Dygraph.createIterator(points, 0, points.length,\n        DygraphCanvasRenderer._getIteratorPredicate(\n            g.getBooleanOption(\"connectSeparatedPoints\", setName)));\n\n    ctx.fillStyle = err_color;\n    ctx.beginPath();\n    var last_x, is_first = true;\n\n    // If the point density is high enough, dropping segments on their way to\n    // the canvas justifies the overhead of doing so.\n    if (points.length > 2 * g.width_ || Dygraph.FORCE_FAST_PROXY) {\n      ctx = DygraphCanvasRenderer._fastCanvasProxy(ctx);\n    }\n\n    // TODO(danvk): there are a lot of options at play in this loop.\n    //     The logic would be much clearer if some (e.g. stackGraph and\n    //     stepPlot) were split off into separate sub-plotters.\n    var point;\n\n\t\t// Throughout this loop, we test to see if the top-level called series\n\t\t\t\t\t// matches the one current in the parent FOR loop.  If not, we skip\n\t\t\t\t\t// the parts that draw the line but leave the others so the pathback\n\t\t\t\t\t// and prevYs and prevXs still get properly populated\n    while (iter.hasNext) {\n      point = iter.next();\n      if (!Dygraph.isOK(point.y) && !stepPlot) {\n\t\t\t\t//\n        if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\t\tctx, prevX, prevYs[1], pathBack);\n        pathBack = [];\n        prevX = NaN;\n        if (point.y_stacked !== null && !isNaN(point.y_stacked)) {\n          baseline[point.canvasx] = area.h * point.y_stacked + area.y;\n        }\n        continue;\n      }\n      if (!is_first && last_x == point.xval) {\n        continue;\n      } else {\n        is_first = false;\n        last_x = point.xval;\n      }\n\n      currBaseline = baseline[point.canvasx];\n      var lastY;\n      if (currBaseline === undefined) {\n        lastY = axisY;\n      } else {\n        if(prevStepPlot) {\n          lastY = currBaseline[0];\n        } else {\n          lastY = currBaseline;\n        }\n      }\n      newYs = [ point.canvasy, lastY ];\n\n      if (stepPlot) {\n        // Step plots must keep track of the top and bottom of\n        // the baseline at each point.\n        if (prevYs[0] === -1) {\n          baseline[point.canvasx] = [ point.canvasy, axisY ];\n        } else {\n          baseline[point.canvasx] = [ point.canvasy, prevYs[0] ];\n        }\n      } else {\n        baseline[point.canvasx] = point.canvasy;\n      }\n\n      if (!isNaN(prevX)) {\n\t\t\t\tif (e.setName === setName) {\n        \t// Move to top fill point\n        \tif (stepPlot) {\n        \t  ctx.lineTo(point.canvasx, prevYs[0]);\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t} else {\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t}\n        }\n\n        // Record the baseline for the reverse path.\n        pathBack.push([prevX, prevYs[1]]);\n        if (prevStepPlot && currBaseline) {\n          // Draw to the bottom of the baseline\n          pathBack.push([point.canvasx, currBaseline[1]]);\n        } else {\n          pathBack.push([point.canvasx, newYs[1]]);\n        }\n      } else if (e.setName === setName) {\n        ctx.moveTo(point.canvasx, newYs[1]);\n        ctx.lineTo(point.canvasx, newYs[0]);\n      }\n      prevYs = newYs;\n      prevX = point.canvasx;\n\t\t}\n    prevStepPlot = stepPlot;\n    if (newYs && point) {\n      if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\tctx, point.canvasx, newYs[1], pathBack);\n      pathBack = [];\n    }\n    ctx.fill();\n\t}\n}","group":"Not consideredNot responsiveNot flexibleNot exploitedExploited"},"Original EVs":{"axis":"y","strokeWidth":2,"strokePattern":[7,3]}},"ylabel":"Power (kW)","labels":["minute","Not considered","Not responsive","Not flexible","Not exploited","Exploited","Original EVs"],"legend":"auto","labelsDivWidth":250,"labelsShowZeroValues":false,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":false,"fillGraph":false,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":2,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false,"colors":["#660066","#003366","#003300","#663300","#ff9900","gray"]},"scale":"minute","annotations":[],"shadings":[],"events":[{"pos":12,"label":"Grid capacity","labelLoc":"left","color":"red","strokePattern":[7,3],"axis":"y"}],"format":"date","data":[["2024-08-04T22:00:00.000Z","2024-08-04T22:15:00.000Z","2024-08-04T22:30:00.000Z","2024-08-04T22:45:00.000Z","2024-08-04T23:00:00.000Z","2024-08-04T23:15:00.000Z","2024-08-04T23:30:00.000Z","2024-08-04T23:45:00.000Z","2024-08-05T00:00:00.000Z","2024-08-05T00:15:00.000Z","2024-08-05T00:30:00.000Z","2024-08-05T00:45:00.000Z","2024-08-05T01:00:00.000Z","2024-08-05T01:15:00.000Z","2024-08-05T01:30:00.000Z","2024-08-05T01:45:00.000Z","2024-08-05T02:00:00.000Z","2024-08-05T02:15:00.000Z","2024-08-05T02:30:00.000Z","2024-08-05T02:45:00.000Z","2024-08-05T03:00:00.000Z","2024-08-05T03:15:00.000Z","2024-08-05T03:30:00.000Z","2024-08-05T03:45:00.000Z","2024-08-05T04:00:00.000Z","2024-08-05T04:15:00.000Z","2024-08-05T04:30:00.000Z","2024-08-05T04:45:00.000Z","2024-08-05T05:00:00.000Z","2024-08-05T05:15:00.000Z","2024-08-05T05:30:00.000Z","2024-08-05T05:45:00.000Z","2024-08-05T06:00:00.000Z","2024-08-05T06:15:00.000Z","2024-08-05T06:30:00.000Z","2024-08-05T06:45:00.000Z","2024-08-05T07:00:00.000Z","2024-08-05T07:15:00.000Z","2024-08-05T07:30:00.000Z","2024-08-05T07:45:00.000Z","2024-08-05T08:00:00.000Z","2024-08-05T08:15:00.000Z","2024-08-05T08:30:00.000Z","2024-08-05T08:45:00.000Z","2024-08-05T09:00:00.000Z","2024-08-05T09:15:00.000Z","2024-08-05T09:30:00.000Z","2024-08-05T09:45:00.000Z","2024-08-05T10:00:00.000Z","2024-08-05T10:15:00.000Z","2024-08-05T10:30:00.000Z","2024-08-05T10:45:00.000Z","2024-08-05T11:00:00.000Z","2024-08-05T11:15:00.000Z","2024-08-05T11:30:00.000Z","2024-08-05T11:45:00.000Z","2024-08-05T12:00:00.000Z","2024-08-05T12:15:00.000Z","2024-08-05T12:30:00.000Z","2024-08-05T12:45:00.000Z","2024-08-05T13:00:00.000Z","2024-08-05T13:15:00.000Z","2024-08-05T13:30:00.000Z","2024-08-05T13:45:00.000Z","2024-08-05T14:00:00.000Z","2024-08-05T14:15:00.000Z","2024-08-05T14:30:00.000Z","2024-08-05T14:45:00.000Z","2024-08-05T15:00:00.000Z","2024-08-05T15:15:00.000Z","2024-08-05T15:30:00.000Z","2024-08-05T15:45:00.000Z","2024-08-05T16:00:00.000Z","2024-08-05T16:15:00.000Z","2024-08-05T16:30:00.000Z","2024-08-05T16:45:00.000Z","2024-08-05T17:00:00.000Z","2024-08-05T17:15:00.000Z","2024-08-05T17:30:00.000Z","2024-08-05T17:45:00.000Z","2024-08-05T18:00:00.000Z","2024-08-05T18:15:00.000Z","2024-08-05T18:30:00.000Z","2024-08-05T18:45:00.000Z","2024-08-05T19:00:00.000Z","2024-08-05T19:15:00.000Z","2024-08-05T19:30:00.000Z","2024-08-05T19:45:00.000Z","2024-08-05T20:00:00.000Z","2024-08-05T20:15:00.000Z","2024-08-05T20:30:00.000Z","2024-08-05T20:45:00.000Z","2024-08-05T21:00:00.000Z","2024-08-05T21:15:00.000Z","2024-08-05T21:30:00.000Z","2024-08-05T21:45:00.000Z","2024-08-05T22:00:00.000Z","2024-08-05T22:15:00.000Z","2024-08-05T22:30:00.000Z","2024-08-05T22:45:00.000Z","2024-08-05T23:00:00.000Z","2024-08-05T23:15:00.000Z","2024-08-05T23:30:00.000Z","2024-08-05T23:45:00.000Z","2024-08-06T00:00:00.000Z","2024-08-06T00:15:00.000Z","2024-08-06T00:30:00.000Z","2024-08-06T00:45:00.000Z","2024-08-06T01:00:00.000Z","2024-08-06T01:15:00.000Z","2024-08-06T01:30:00.000Z","2024-08-06T01:45:00.000Z","2024-08-06T02:00:00.000Z","2024-08-06T02:15:00.000Z","2024-08-06T02:30:00.000Z","2024-08-06T02:45:00.000Z","2024-08-06T03:00:00.000Z","2024-08-06T03:15:00.000Z","2024-08-06T03:30:00.000Z","2024-08-06T03:45:00.000Z","2024-08-06T04:00:00.000Z","2024-08-06T04:15:00.000Z","2024-08-06T04:30:00.000Z","2024-08-06T04:45:00.000Z","2024-08-06T05:00:00.000Z","2024-08-06T05:15:00.000Z","2024-08-06T05:30:00.000Z","2024-08-06T05:45:00.000Z","2024-08-06T06:00:00.000Z","2024-08-06T06:15:00.000Z","2024-08-06T06:30:00.000Z","2024-08-06T06:45:00.000Z","2024-08-06T07:00:00.000Z","2024-08-06T07:15:00.000Z","2024-08-06T07:30:00.000Z","2024-08-06T07:45:00.000Z","2024-08-06T08:00:00.000Z","2024-08-06T08:15:00.000Z","2024-08-06T08:30:00.000Z","2024-08-06T08:45:00.000Z","2024-08-06T09:00:00.000Z","2024-08-06T09:15:00.000Z","2024-08-06T09:30:00.000Z","2024-08-06T09:45:00.000Z","2024-08-06T10:00:00.000Z","2024-08-06T10:15:00.000Z","2024-08-06T10:30:00.000Z","2024-08-06T10:45:00.000Z","2024-08-06T11:00:00.000Z","2024-08-06T11:15:00.000Z","2024-08-06T11:30:00.000Z","2024-08-06T11:45:00.000Z","2024-08-06T12:00:00.000Z","2024-08-06T12:15:00.000Z","2024-08-06T12:30:00.000Z","2024-08-06T12:45:00.000Z","2024-08-06T13:00:00.000Z","2024-08-06T13:15:00.000Z","2024-08-06T13:30:00.000Z","2024-08-06T13:45:00.000Z","2024-08-06T14:00:00.000Z","2024-08-06T14:15:00.000Z","2024-08-06T14:30:00.000Z","2024-08-06T14:45:00.000Z","2024-08-06T15:00:00.000Z","2024-08-06T15:15:00.000Z","2024-08-06T15:30:00.000Z","2024-08-06T15:45:00.000Z","2024-08-06T16:00:00.000Z","2024-08-06T16:15:00.000Z","2024-08-06T16:30:00.000Z","2024-08-06T16:45:00.000Z","2024-08-06T17:00:00.000Z","2024-08-06T17:15:00.000Z","2024-08-06T17:30:00.000Z","2024-08-06T17:45:00.000Z","2024-08-06T18:00:00.000Z","2024-08-06T18:15:00.000Z","2024-08-06T18:30:00.000Z","2024-08-06T18:45:00.000Z","2024-08-06T19:00:00.000Z","2024-08-06T19:15:00.000Z","2024-08-06T19:30:00.000Z","2024-08-06T19:45:00.000Z","2024-08-06T20:00:00.000Z","2024-08-06T20:15:00.000Z","2024-08-06T20:30:00.000Z","2024-08-06T20:45:00.000Z","2024-08-06T21:00:00.000Z","2024-08-06T21:15:00.000Z","2024-08-06T21:30:00.000Z","2024-08-06T21:45:00.000Z","2024-08-06T22:00:00.000Z","2024-08-06T22:15:00.000Z","2024-08-06T22:30:00.000Z","2024-08-06T22:45:00.000Z","2024-08-06T23:00:00.000Z","2024-08-06T23:15:00.000Z","2024-08-06T23:30:00.000Z","2024-08-06T23:45:00.000Z","2024-08-07T00:00:00.000Z","2024-08-07T00:15:00.000Z","2024-08-07T00:30:00.000Z","2024-08-07T00:45:00.000Z","2024-08-07T01:00:00.000Z","2024-08-07T01:15:00.000Z","2024-08-07T01:30:00.000Z","2024-08-07T01:45:00.000Z","2024-08-07T02:00:00.000Z","2024-08-07T02:15:00.000Z","2024-08-07T02:30:00.000Z","2024-08-07T02:45:00.000Z","2024-08-07T03:00:00.000Z","2024-08-07T03:15:00.000Z","2024-08-07T03:30:00.000Z","2024-08-07T03:45:00.000Z","2024-08-07T04:00:00.000Z","2024-08-07T04:15:00.000Z","2024-08-07T04:30:00.000Z","2024-08-07T04:45:00.000Z","2024-08-07T05:00:00.000Z","2024-08-07T05:15:00.000Z","2024-08-07T05:30:00.000Z","2024-08-07T05:45:00.000Z","2024-08-07T06:00:00.000Z","2024-08-07T06:15:00.000Z","2024-08-07T06:30:00.000Z","2024-08-07T06:45:00.000Z","2024-08-07T07:00:00.000Z","2024-08-07T07:15:00.000Z","2024-08-07T07:30:00.000Z","2024-08-07T07:45:00.000Z","2024-08-07T08:00:00.000Z","2024-08-07T08:15:00.000Z","2024-08-07T08:30:00.000Z","2024-08-07T08:45:00.000Z","2024-08-07T09:00:00.000Z","2024-08-07T09:15:00.000Z","2024-08-07T09:30:00.000Z","2024-08-07T09:45:00.000Z","2024-08-07T10:00:00.000Z","2024-08-07T10:15:00.000Z","2024-08-07T10:30:00.000Z","2024-08-07T10:45:00.000Z","2024-08-07T11:00:00.000Z","2024-08-07T11:15:00.000Z","2024-08-07T11:30:00.000Z","2024-08-07T11:45:00.000Z","2024-08-07T12:00:00.000Z","2024-08-07T12:15:00.000Z","2024-08-07T12:30:00.000Z","2024-08-07T12:45:00.000Z","2024-08-07T13:00:00.000Z","2024-08-07T13:15:00.000Z","2024-08-07T13:30:00.000Z","2024-08-07T13:45:00.000Z","2024-08-07T14:00:00.000Z","2024-08-07T14:15:00.000Z","2024-08-07T14:30:00.000Z","2024-08-07T14:45:00.000Z","2024-08-07T15:00:00.000Z","2024-08-07T15:15:00.000Z","2024-08-07T15:30:00.000Z","2024-08-07T15:45:00.000Z","2024-08-07T16:00:00.000Z","2024-08-07T16:15:00.000Z","2024-08-07T16:30:00.000Z","2024-08-07T16:45:00.000Z","2024-08-07T17:00:00.000Z","2024-08-07T17:15:00.000Z","2024-08-07T17:30:00.000Z","2024-08-07T17:45:00.000Z","2024-08-07T18:00:00.000Z","2024-08-07T18:15:00.000Z","2024-08-07T18:30:00.000Z","2024-08-07T18:45:00.000Z","2024-08-07T19:00:00.000Z","2024-08-07T19:15:00.000Z","2024-08-07T19:30:00.000Z","2024-08-07T19:45:00.000Z","2024-08-07T20:00:00.000Z","2024-08-07T20:15:00.000Z","2024-08-07T20:30:00.000Z","2024-08-07T20:45:00.000Z","2024-08-07T21:00:00.000Z","2024-08-07T21:15:00.000Z","2024-08-07T21:30:00.000Z","2024-08-07T21:45:00.000Z","2024-08-07T22:00:00.000Z"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,7.4,11.1,14.8,13.78,11.1,14.8,14.8,11.24,8.9,7.4,7.4,7.4,7.4,7.4,6.08,3.7,3.7,3.7,3.7,0.14,0,3.7,3.7,3.7,2.06,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,0.6,0,0,0,0,0,0,0,0,3.7,3.7,7.4,7.4,7.4,7.4,4.140000000000001,7.4,7.4,7.4,7.4,7.4,4.74,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,0.58,0,3.7,3.7,3.7,7.4,7.4,3.38,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,7.4,7.4,4.74,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.05,0,0,0,3.7,1.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,1.5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,3.7,0,7.4,0,0,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,7.4,0,0,7.4,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.9,0,0,0.9,0,0,0.76,3.1,4.6,3.72,3.7,3.7,0.9,2.22,3.7,3.7,2.52,2.77,0,0,0,0,0,0,0,0,3.23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,7.26,0,4.16,3.69,0,0,0,0,0,0,0,0,0,0,0,0,0,4.6,4.6,0,4.9,3.7,3.7,1.89,0,0,1.01,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,7.4,11.1,18.5,22.2,21.18,18.5,22.2,22.2,18.64,16.3,14.8,11.12,11.1,11.1,14.8,13.48,11.1,11.1,9.920000000000002,5.2,0.14,0,3.7,3.7,3.7,2.06,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,0.6,0,0,0,0,0,0,0,0,3.7,3.7,7.4,7.4,7.4,11.1,7.840000000000001,11.1,11.1,11.1,11.1,11.1,12.14,11.1,7.86,7.4,11.1,11.1,11.1,11.1,11.1,11.1,11.1,11.1,7.98,7.4,11.1,11.1,11.1,14.8,14.8,10.78,4.9,3.7,7.4,5.640000000000001,3.7,3.7,3.7,3.7,1.64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":["attrs.series.Not considered.plotter","attrs.series.Not responsive.plotter","attrs.series.Not flexible.plotter","attrs.series.Not exploited.plotter","attrs.series.Exploited.plotter"],"jsHooks":[]}</script><p>The results show that during the hours where the grid capacity is
surpassed the demand corresponds to <strong>Exploited</strong> and
<strong>Not responsive</strong> sessions. Therefore, <strong>more
responsive sessions are needed.</strong></p>
<p>We can also plot the smart charging results <strong>by user
profile</strong> to see that the demand causing the peaks over the grid
capacity comes from <strong>non-responsive Visit sessions</strong> from
10:00 to 11:00:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sc_results</span>, <span class="va">ev_sessions</span>, by <span class="op">=</span> <span class="st">"Profile"</span>, show_setpoint <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dyLimit</span><span class="op">(</span><span class="va">grid_capacity</span>, <span class="st">"Grid capacity"</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-10b3b7155e8045a1b2ad" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-10b3b7155e8045a1b2ad">{"x":{"attrs":{"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true,"valueRange":[0,23.31]}},"series":{"Worktime":{"axis":"y","plotter":"// the _lineplotter function extracted from dygraphs-combined-dev.js, available for use in conjunction with other per-series plotters and group plotters\n\nfunction linePlotter(e) {\n  //extracting and reducing the Dygraph.stackPoints_ function\n  stackPoints = function(points, cumulativeYval, seriesExtremes, fillMethod) {\n    var lastXval = null;\n    var prevPoint = null;\n    var nextPoint = null;\n    var nextPointIdx = -1;\n  \n    // Find the next stackable point starting from the given index.\n    var updateNextPoint = function(idx) {\n      // If we've previously found a non-NaN point and haven't gone past it yet,\n      // just use that.\n      if (nextPointIdx >= idx) return;\n  \n      // We haven't found a non-NaN point yet or have moved past it,\n      // look towards the right to find a non-NaN point.\n      for (var j = idx; j < points.length; ++j) {\n        // Clear out a previously-found point (if any) since it's no longer\n        // valid, we shouldn't use it for interpolation anymore.\n        nextPoint = null;\n        if (!isNaN(points[j].yval) && points[j].yval !== null) {\n          nextPointIdx = j;\n          nextPoint = points[j];\n          break;\n        }\n      }\n    };\n  \n    for (var i = 0; i < points.length; ++i) {\n      var point = points[i];\n      var xval = point.xval;\n      if (cumulativeYval[xval] === undefined) {\n        cumulativeYval[xval] = 0;\n      }\n  \n      var actualYval = point.yval;\n      if (isNaN(actualYval) || actualYval === null) {\n        if(fillMethod == 'none') {\n          actualYval = 0;\n        } else {\n          // Interpolate/extend for stacking purposes if possible.\n          updateNextPoint(i);\n          if (prevPoint && nextPoint && fillMethod != 'none') {\n            // Use linear interpolation between prevPoint and nextPoint.\n            actualYval = prevPoint.yval + (nextPoint.yval - prevPoint.yval) *\n                ((xval - prevPoint.xval) / (nextPoint.xval - prevPoint.xval));\n          } else if (prevPoint && fillMethod == 'all') {\n            actualYval = prevPoint.yval;\n          } else if (nextPoint && fillMethod == 'all') {\n            actualYval = nextPoint.yval;\n          } else {\n            actualYval = 0;\n          }\n        }\n      } else {\n        prevPoint = point;\n      }\n  \n      var stackedYval = cumulativeYval[xval];\n      if (lastXval != xval) {\n        // If an x-value is repeated, we ignore the duplicates.\n        stackedYval += actualYval;\n        cumulativeYval[xval] = stackedYval;\n      }\n      lastXval = xval;\n  \n      point.yval_stacked = stackedYval;\n      \n      if (stackedYval > seriesExtremes[1]) {\n        seriesExtremes[1] = stackedYval;\n      }\n      if (stackedYval < seriesExtremes[0]) {\n        seriesExtremes[0] = stackedYval;\n      }\n  \n    }\n  };\n  \n  // BEGIN HEADER BLOCK\n  // This first block can be copied to other plotters to capture the group \n  var g = e.dygraph;\n  \n  var group;\n  var groupIdx = [];\n  var sets = [];\n  var allSets = e.allSeriesPoints;\n  var minIdx = Infinity;\n  var setName = e.setName;\n  var setNames = g.getLabels().slice(1);\n  var groupSetNames = [];\n  var fillColors = [];\n  var strokeColors = g.getColors();\n  // this next one we use further down, but will be populated in a decreasing loop,\n  // so we'll establish the size in this forward loop so it has the structure to accept\n  // later on.\n  var seriesExtremes = [];\n  \n  var currGroup = g.attr_(\"group\", setName);\n  \n  for (var setIdx = 0; setIdx < allSets.length; setIdx++) {\n    // get the name and group of the current setIdx\n    setName = setNames[setIdx];\n    group = g.attr_(\"group\", setName);\n\n    if (group === currGroup) {\n      //save the indv index and the points\n      groupIdx.push(setIdx);\n      sets.push(allSets[setIdx]);\n      groupSetNames.push(setName);\n      fillColors.push(strokeColors[setIdx]);\n     \n      // the aforementioned stuff for later on \n      var tmpExtremes = [];\n      tmpExtremes[0] = Infinity;\n      tmpExtremes[1] = -Infinity;\n      \n      seriesExtremes.push(tmpExtremes);\n      \n      // capturing the min indx helps to ensure we don't render the plotter\n      // multiple times\n      if (setIdx < minIdx) minIdx = setIdx;\n    }\n  }\n  // END HEADER BLOCK\n\t\n\t//Stack the points\n  // set up cumulative records\n  var cumulativeYval = [];\n  var packed = g.gatherDatasets_(g.rolledSeries_, null);\n  var extremes = packed.extremes;\n  var seriesName;\n  \n  for (var j = sets.length - 1; j >= 0; j--) {\n    points = sets[j];\n    seriesName = groupSetNames[j]; \n    \n    //  stack the data \n    stackPoints(points, cumulativeYval, seriesExtremes[j],\n          g.getBooleanOption(\"stackedGraphNaNFill\"));\n    \n    extremes[seriesName] = seriesExtremes[j];\n  }\n  \n\t// Helper function to trace a line back along the baseline.\n  var traceBackPath = function(ctx, baselineX, baselineY, pathBack) {\n    ctx.lineTo(baselineX, baselineY);\n    for (var i = pathBack.length - 1; i >= 0; i--) {\n      var pt = pathBack[i];\n      ctx.lineTo(pt[0], pt[1]);\n    }\n  };\n  \n\t// Do the actual plotting.\n\t\t\t\t// First, we'll plot the line for this series, then...\n\t\t\t\t// Second, we'll add the fills\n\t\t\t\t// In contrast to stackedlinegroup, we do this in reverse\n\t\t\t\t// order to align with the fillplotter\n\tvar area = e.plotArea;\n  var fillAlpha = g.getNumericOption('fillAlpha');\n\t\n\tvar baseline = {};\n  var currBaseline;\n  var prevStepPlot;  // for different line drawing modes (line/step) per series\n\n  var ctx = e.drawingContext;\n    \n\t// For filled charts, we draw points from left to right, then back along\n  // the x-axis to complete a shape for filling.\n  // For stacked plots, this \"back path\" is a more complex shape. This array\n  // stores the [x, y] values needed to trace that shape.\n  var pathBack = [];\n\n\t//We'll save the group indices of the current set,\n\t\t\t\t// so as to test later and hopefully skip \n\t\t\t\t// past needless iterations of the loops\n\tvar currSetIdx;\n\t//Now a quick FOR loop to capture the group indices\n  for (var j = sets.length - 1; j >= 0; j--) {\n    seriesName = groupSetNames[j]; \n\t\tif (seriesName === e.setName) currSetIdx = j;\n  }\n  \n\tfor (var j = sets.length - 1; j >= 0; j--) {\n\t\t// If we're not dealing with the immediate plotted series or it's\n\t\t\t\t\t// immediate predecesor, skip all this stuff below\n\t\tif (j > (currSetIdx + 1) || j < currSetIdx) continue;\n\n    setName = groupSetNames[j];\n\n\t\tvar connectSeparated = g.getOption('connectSeparatedPoints', setName);\n    var logscale = g.attributes_.getForSeries(\"logscale\", setName);\n    \n    axis = g.axisPropertiesForSeries(setName);\n    \n    points = sets[j];\n    \n    for (var i = 0; i < points.length; i++) {\n      var point = points[i];\n      \n      var yval = point.yval;\n      \n      point.y_stacked = DygraphLayout.calcYNormal_(\n          axis, point.yval_stacked, logscale);\n          \n      if (yval !== null && !isNaN(yval)) {\n        yval = point.yval_stacked;\n      }\n      if (yval === null) {\n        yval = NaN;\n        if (!connectSeparated) {\n          point.yval = NaN;\n        }\n      }\n      point.y = DygraphLayout.calcYNormal_(axis, yval, logscale);\n    \n      point.canvasx = g.plotter_.area.w * point.x + g.plotter_.area.x;\n      point.canvasy = g.plotter_.area.h * point.y + g.plotter_.area.y;\n\t\t}\n\n\t\te.points = points;\n\n\t  var strokeWidth = e.strokeWidth;\n\t\n\t  var borderWidth = g.getNumericOption(\"strokeBorderWidth\", setName);\n\t  var drawPointCallback = g.getOption(\"drawPointCallback\", setName) ||\n\t      Dygraph.Circles.DEFAULT;\n\t  var strokePattern = g.getOption(\"strokePattern\", setName);\n\t  var drawPoints = g.getBooleanOption(\"drawPoints\", setName);\n\t  var pointSize = g.getNumericOption(\"pointSize\", setName);\n\t\t\n\t\t// We'll only draw the line plotter if the current series matches\n\t\t\t\t\t// the one in the top-level plotter call\n\t\tif (setName === e.setName) {\n\t  \tif (borderWidth && strokeWidth) {\n\t  \t  DygraphCanvasRenderer._drawStyledLine(e,\n\t  \t      g.getOption(\"strokeBorderColor\", setName),\n\t  \t      strokeWidth + 2 * borderWidth,\n\t  \t      strokePattern,\n\t  \t      drawPoints,\n\t  \t      drawPointCallback,\n\t  \t      pointSize\n\t  \t      );\n\t  \t}\n\t\n\t  \tDygraphCanvasRenderer._drawStyledLine(e,\n\t  \t    e.color,\n\t  \t    strokeWidth,\n\t  \t    strokePattern,\n\t  \t    drawPoints,\n\t  \t    drawPointCallback,\n\t  \t    pointSize\n\t  \t);\n\t\t}\n\t\t//END OF THE LINE PLOTTER\n\t\t\t\t\t//\n\t\t//BEGIN THE FILL\n    var stepPlot = g.getBooleanOption('stepPlot', setName);\n\t\tvar color = e.color;\n\t\tvar axis = g.axisPropertiesForSeries(setName);\n    var axisY = 1.0 + axis.minyval * axis.yscale;\n    if (axisY < 0.0) axisY = 0.0;\n    else if (axisY > 1.0) axisY = 1.0;\n    axisY = area.h * axisY + area.y;\n\n\n\t\t// setup graphics context\n  \tvar prevX = NaN;\n  \tvar prevYs = [-1, -1];\n  \tvar newYs;\n  \t\n\t\t// should be same color as the lines but only 15% opaque.\n  \tvar rgb = Dygraph.toRGB_(color);\n  \tvar err_color =\n  \t    'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + fillAlpha + ')';\n    \n\n    var iter = Dygraph.createIterator(points, 0, points.length,\n        DygraphCanvasRenderer._getIteratorPredicate(\n            g.getBooleanOption(\"connectSeparatedPoints\", setName)));\n\n    ctx.fillStyle = err_color;\n    ctx.beginPath();\n    var last_x, is_first = true;\n\n    // If the point density is high enough, dropping segments on their way to\n    // the canvas justifies the overhead of doing so.\n    if (points.length > 2 * g.width_ || Dygraph.FORCE_FAST_PROXY) {\n      ctx = DygraphCanvasRenderer._fastCanvasProxy(ctx);\n    }\n\n    // TODO(danvk): there are a lot of options at play in this loop.\n    //     The logic would be much clearer if some (e.g. stackGraph and\n    //     stepPlot) were split off into separate sub-plotters.\n    var point;\n\n\t\t// Throughout this loop, we test to see if the top-level called series\n\t\t\t\t\t// matches the one current in the parent FOR loop.  If not, we skip\n\t\t\t\t\t// the parts that draw the line but leave the others so the pathback\n\t\t\t\t\t// and prevYs and prevXs still get properly populated\n    while (iter.hasNext) {\n      point = iter.next();\n      if (!Dygraph.isOK(point.y) && !stepPlot) {\n\t\t\t\t//\n        if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\t\tctx, prevX, prevYs[1], pathBack);\n        pathBack = [];\n        prevX = NaN;\n        if (point.y_stacked !== null && !isNaN(point.y_stacked)) {\n          baseline[point.canvasx] = area.h * point.y_stacked + area.y;\n        }\n        continue;\n      }\n      if (!is_first && last_x == point.xval) {\n        continue;\n      } else {\n        is_first = false;\n        last_x = point.xval;\n      }\n\n      currBaseline = baseline[point.canvasx];\n      var lastY;\n      if (currBaseline === undefined) {\n        lastY = axisY;\n      } else {\n        if(prevStepPlot) {\n          lastY = currBaseline[0];\n        } else {\n          lastY = currBaseline;\n        }\n      }\n      newYs = [ point.canvasy, lastY ];\n\n      if (stepPlot) {\n        // Step plots must keep track of the top and bottom of\n        // the baseline at each point.\n        if (prevYs[0] === -1) {\n          baseline[point.canvasx] = [ point.canvasy, axisY ];\n        } else {\n          baseline[point.canvasx] = [ point.canvasy, prevYs[0] ];\n        }\n      } else {\n        baseline[point.canvasx] = point.canvasy;\n      }\n\n      if (!isNaN(prevX)) {\n\t\t\t\tif (e.setName === setName) {\n        \t// Move to top fill point\n        \tif (stepPlot) {\n        \t  ctx.lineTo(point.canvasx, prevYs[0]);\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t} else {\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t}\n        }\n\n        // Record the baseline for the reverse path.\n        pathBack.push([prevX, prevYs[1]]);\n        if (prevStepPlot && currBaseline) {\n          // Draw to the bottom of the baseline\n          pathBack.push([point.canvasx, currBaseline[1]]);\n        } else {\n          pathBack.push([point.canvasx, newYs[1]]);\n        }\n      } else if (e.setName === setName) {\n        ctx.moveTo(point.canvasx, newYs[1]);\n        ctx.lineTo(point.canvasx, newYs[0]);\n      }\n      prevYs = newYs;\n      prevX = point.canvasx;\n\t\t}\n    prevStepPlot = stepPlot;\n    if (newYs && point) {\n      if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\tctx, point.canvasx, newYs[1], pathBack);\n      pathBack = [];\n    }\n    ctx.fill();\n\t}\n}","group":"WorktimeVisit"},"Visit":{"axis":"y","plotter":"// the _lineplotter function extracted from dygraphs-combined-dev.js, available for use in conjunction with other per-series plotters and group plotters\n\nfunction linePlotter(e) {\n  //extracting and reducing the Dygraph.stackPoints_ function\n  stackPoints = function(points, cumulativeYval, seriesExtremes, fillMethod) {\n    var lastXval = null;\n    var prevPoint = null;\n    var nextPoint = null;\n    var nextPointIdx = -1;\n  \n    // Find the next stackable point starting from the given index.\n    var updateNextPoint = function(idx) {\n      // If we've previously found a non-NaN point and haven't gone past it yet,\n      // just use that.\n      if (nextPointIdx >= idx) return;\n  \n      // We haven't found a non-NaN point yet or have moved past it,\n      // look towards the right to find a non-NaN point.\n      for (var j = idx; j < points.length; ++j) {\n        // Clear out a previously-found point (if any) since it's no longer\n        // valid, we shouldn't use it for interpolation anymore.\n        nextPoint = null;\n        if (!isNaN(points[j].yval) && points[j].yval !== null) {\n          nextPointIdx = j;\n          nextPoint = points[j];\n          break;\n        }\n      }\n    };\n  \n    for (var i = 0; i < points.length; ++i) {\n      var point = points[i];\n      var xval = point.xval;\n      if (cumulativeYval[xval] === undefined) {\n        cumulativeYval[xval] = 0;\n      }\n  \n      var actualYval = point.yval;\n      if (isNaN(actualYval) || actualYval === null) {\n        if(fillMethod == 'none') {\n          actualYval = 0;\n        } else {\n          // Interpolate/extend for stacking purposes if possible.\n          updateNextPoint(i);\n          if (prevPoint && nextPoint && fillMethod != 'none') {\n            // Use linear interpolation between prevPoint and nextPoint.\n            actualYval = prevPoint.yval + (nextPoint.yval - prevPoint.yval) *\n                ((xval - prevPoint.xval) / (nextPoint.xval - prevPoint.xval));\n          } else if (prevPoint && fillMethod == 'all') {\n            actualYval = prevPoint.yval;\n          } else if (nextPoint && fillMethod == 'all') {\n            actualYval = nextPoint.yval;\n          } else {\n            actualYval = 0;\n          }\n        }\n      } else {\n        prevPoint = point;\n      }\n  \n      var stackedYval = cumulativeYval[xval];\n      if (lastXval != xval) {\n        // If an x-value is repeated, we ignore the duplicates.\n        stackedYval += actualYval;\n        cumulativeYval[xval] = stackedYval;\n      }\n      lastXval = xval;\n  \n      point.yval_stacked = stackedYval;\n      \n      if (stackedYval > seriesExtremes[1]) {\n        seriesExtremes[1] = stackedYval;\n      }\n      if (stackedYval < seriesExtremes[0]) {\n        seriesExtremes[0] = stackedYval;\n      }\n  \n    }\n  };\n  \n  // BEGIN HEADER BLOCK\n  // This first block can be copied to other plotters to capture the group \n  var g = e.dygraph;\n  \n  var group;\n  var groupIdx = [];\n  var sets = [];\n  var allSets = e.allSeriesPoints;\n  var minIdx = Infinity;\n  var setName = e.setName;\n  var setNames = g.getLabels().slice(1);\n  var groupSetNames = [];\n  var fillColors = [];\n  var strokeColors = g.getColors();\n  // this next one we use further down, but will be populated in a decreasing loop,\n  // so we'll establish the size in this forward loop so it has the structure to accept\n  // later on.\n  var seriesExtremes = [];\n  \n  var currGroup = g.attr_(\"group\", setName);\n  \n  for (var setIdx = 0; setIdx < allSets.length; setIdx++) {\n    // get the name and group of the current setIdx\n    setName = setNames[setIdx];\n    group = g.attr_(\"group\", setName);\n\n    if (group === currGroup) {\n      //save the indv index and the points\n      groupIdx.push(setIdx);\n      sets.push(allSets[setIdx]);\n      groupSetNames.push(setName);\n      fillColors.push(strokeColors[setIdx]);\n     \n      // the aforementioned stuff for later on \n      var tmpExtremes = [];\n      tmpExtremes[0] = Infinity;\n      tmpExtremes[1] = -Infinity;\n      \n      seriesExtremes.push(tmpExtremes);\n      \n      // capturing the min indx helps to ensure we don't render the plotter\n      // multiple times\n      if (setIdx < minIdx) minIdx = setIdx;\n    }\n  }\n  // END HEADER BLOCK\n\t\n\t//Stack the points\n  // set up cumulative records\n  var cumulativeYval = [];\n  var packed = g.gatherDatasets_(g.rolledSeries_, null);\n  var extremes = packed.extremes;\n  var seriesName;\n  \n  for (var j = sets.length - 1; j >= 0; j--) {\n    points = sets[j];\n    seriesName = groupSetNames[j]; \n    \n    //  stack the data \n    stackPoints(points, cumulativeYval, seriesExtremes[j],\n          g.getBooleanOption(\"stackedGraphNaNFill\"));\n    \n    extremes[seriesName] = seriesExtremes[j];\n  }\n  \n\t// Helper function to trace a line back along the baseline.\n  var traceBackPath = function(ctx, baselineX, baselineY, pathBack) {\n    ctx.lineTo(baselineX, baselineY);\n    for (var i = pathBack.length - 1; i >= 0; i--) {\n      var pt = pathBack[i];\n      ctx.lineTo(pt[0], pt[1]);\n    }\n  };\n  \n\t// Do the actual plotting.\n\t\t\t\t// First, we'll plot the line for this series, then...\n\t\t\t\t// Second, we'll add the fills\n\t\t\t\t// In contrast to stackedlinegroup, we do this in reverse\n\t\t\t\t// order to align with the fillplotter\n\tvar area = e.plotArea;\n  var fillAlpha = g.getNumericOption('fillAlpha');\n\t\n\tvar baseline = {};\n  var currBaseline;\n  var prevStepPlot;  // for different line drawing modes (line/step) per series\n\n  var ctx = e.drawingContext;\n    \n\t// For filled charts, we draw points from left to right, then back along\n  // the x-axis to complete a shape for filling.\n  // For stacked plots, this \"back path\" is a more complex shape. This array\n  // stores the [x, y] values needed to trace that shape.\n  var pathBack = [];\n\n\t//We'll save the group indices of the current set,\n\t\t\t\t// so as to test later and hopefully skip \n\t\t\t\t// past needless iterations of the loops\n\tvar currSetIdx;\n\t//Now a quick FOR loop to capture the group indices\n  for (var j = sets.length - 1; j >= 0; j--) {\n    seriesName = groupSetNames[j]; \n\t\tif (seriesName === e.setName) currSetIdx = j;\n  }\n  \n\tfor (var j = sets.length - 1; j >= 0; j--) {\n\t\t// If we're not dealing with the immediate plotted series or it's\n\t\t\t\t\t// immediate predecesor, skip all this stuff below\n\t\tif (j > (currSetIdx + 1) || j < currSetIdx) continue;\n\n    setName = groupSetNames[j];\n\n\t\tvar connectSeparated = g.getOption('connectSeparatedPoints', setName);\n    var logscale = g.attributes_.getForSeries(\"logscale\", setName);\n    \n    axis = g.axisPropertiesForSeries(setName);\n    \n    points = sets[j];\n    \n    for (var i = 0; i < points.length; i++) {\n      var point = points[i];\n      \n      var yval = point.yval;\n      \n      point.y_stacked = DygraphLayout.calcYNormal_(\n          axis, point.yval_stacked, logscale);\n          \n      if (yval !== null && !isNaN(yval)) {\n        yval = point.yval_stacked;\n      }\n      if (yval === null) {\n        yval = NaN;\n        if (!connectSeparated) {\n          point.yval = NaN;\n        }\n      }\n      point.y = DygraphLayout.calcYNormal_(axis, yval, logscale);\n    \n      point.canvasx = g.plotter_.area.w * point.x + g.plotter_.area.x;\n      point.canvasy = g.plotter_.area.h * point.y + g.plotter_.area.y;\n\t\t}\n\n\t\te.points = points;\n\n\t  var strokeWidth = e.strokeWidth;\n\t\n\t  var borderWidth = g.getNumericOption(\"strokeBorderWidth\", setName);\n\t  var drawPointCallback = g.getOption(\"drawPointCallback\", setName) ||\n\t      Dygraph.Circles.DEFAULT;\n\t  var strokePattern = g.getOption(\"strokePattern\", setName);\n\t  var drawPoints = g.getBooleanOption(\"drawPoints\", setName);\n\t  var pointSize = g.getNumericOption(\"pointSize\", setName);\n\t\t\n\t\t// We'll only draw the line plotter if the current series matches\n\t\t\t\t\t// the one in the top-level plotter call\n\t\tif (setName === e.setName) {\n\t  \tif (borderWidth && strokeWidth) {\n\t  \t  DygraphCanvasRenderer._drawStyledLine(e,\n\t  \t      g.getOption(\"strokeBorderColor\", setName),\n\t  \t      strokeWidth + 2 * borderWidth,\n\t  \t      strokePattern,\n\t  \t      drawPoints,\n\t  \t      drawPointCallback,\n\t  \t      pointSize\n\t  \t      );\n\t  \t}\n\t\n\t  \tDygraphCanvasRenderer._drawStyledLine(e,\n\t  \t    e.color,\n\t  \t    strokeWidth,\n\t  \t    strokePattern,\n\t  \t    drawPoints,\n\t  \t    drawPointCallback,\n\t  \t    pointSize\n\t  \t);\n\t\t}\n\t\t//END OF THE LINE PLOTTER\n\t\t\t\t\t//\n\t\t//BEGIN THE FILL\n    var stepPlot = g.getBooleanOption('stepPlot', setName);\n\t\tvar color = e.color;\n\t\tvar axis = g.axisPropertiesForSeries(setName);\n    var axisY = 1.0 + axis.minyval * axis.yscale;\n    if (axisY < 0.0) axisY = 0.0;\n    else if (axisY > 1.0) axisY = 1.0;\n    axisY = area.h * axisY + area.y;\n\n\n\t\t// setup graphics context\n  \tvar prevX = NaN;\n  \tvar prevYs = [-1, -1];\n  \tvar newYs;\n  \t\n\t\t// should be same color as the lines but only 15% opaque.\n  \tvar rgb = Dygraph.toRGB_(color);\n  \tvar err_color =\n  \t    'rgba(' + rgb.r + ',' + rgb.g + ',' + rgb.b + ',' + fillAlpha + ')';\n    \n\n    var iter = Dygraph.createIterator(points, 0, points.length,\n        DygraphCanvasRenderer._getIteratorPredicate(\n            g.getBooleanOption(\"connectSeparatedPoints\", setName)));\n\n    ctx.fillStyle = err_color;\n    ctx.beginPath();\n    var last_x, is_first = true;\n\n    // If the point density is high enough, dropping segments on their way to\n    // the canvas justifies the overhead of doing so.\n    if (points.length > 2 * g.width_ || Dygraph.FORCE_FAST_PROXY) {\n      ctx = DygraphCanvasRenderer._fastCanvasProxy(ctx);\n    }\n\n    // TODO(danvk): there are a lot of options at play in this loop.\n    //     The logic would be much clearer if some (e.g. stackGraph and\n    //     stepPlot) were split off into separate sub-plotters.\n    var point;\n\n\t\t// Throughout this loop, we test to see if the top-level called series\n\t\t\t\t\t// matches the one current in the parent FOR loop.  If not, we skip\n\t\t\t\t\t// the parts that draw the line but leave the others so the pathback\n\t\t\t\t\t// and prevYs and prevXs still get properly populated\n    while (iter.hasNext) {\n      point = iter.next();\n      if (!Dygraph.isOK(point.y) && !stepPlot) {\n\t\t\t\t//\n        if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\t\tctx, prevX, prevYs[1], pathBack);\n        pathBack = [];\n        prevX = NaN;\n        if (point.y_stacked !== null && !isNaN(point.y_stacked)) {\n          baseline[point.canvasx] = area.h * point.y_stacked + area.y;\n        }\n        continue;\n      }\n      if (!is_first && last_x == point.xval) {\n        continue;\n      } else {\n        is_first = false;\n        last_x = point.xval;\n      }\n\n      currBaseline = baseline[point.canvasx];\n      var lastY;\n      if (currBaseline === undefined) {\n        lastY = axisY;\n      } else {\n        if(prevStepPlot) {\n          lastY = currBaseline[0];\n        } else {\n          lastY = currBaseline;\n        }\n      }\n      newYs = [ point.canvasy, lastY ];\n\n      if (stepPlot) {\n        // Step plots must keep track of the top and bottom of\n        // the baseline at each point.\n        if (prevYs[0] === -1) {\n          baseline[point.canvasx] = [ point.canvasy, axisY ];\n        } else {\n          baseline[point.canvasx] = [ point.canvasy, prevYs[0] ];\n        }\n      } else {\n        baseline[point.canvasx] = point.canvasy;\n      }\n\n      if (!isNaN(prevX)) {\n\t\t\t\tif (e.setName === setName) {\n        \t// Move to top fill point\n        \tif (stepPlot) {\n        \t  ctx.lineTo(point.canvasx, prevYs[0]);\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t} else {\n        \t  ctx.lineTo(point.canvasx, newYs[0]);\n        \t}\n        }\n\n        // Record the baseline for the reverse path.\n        pathBack.push([prevX, prevYs[1]]);\n        if (prevStepPlot && currBaseline) {\n          // Draw to the bottom of the baseline\n          pathBack.push([point.canvasx, currBaseline[1]]);\n        } else {\n          pathBack.push([point.canvasx, newYs[1]]);\n        }\n      } else if (e.setName === setName) {\n        ctx.moveTo(point.canvasx, newYs[1]);\n        ctx.lineTo(point.canvasx, newYs[0]);\n      }\n      prevYs = newYs;\n      prevX = point.canvasx;\n\t\t}\n    prevStepPlot = stepPlot;\n    if (newYs && point) {\n      if (e.setName === setName) traceBackPath(\n\t\t\t\t\t\t\tctx, point.canvasx, newYs[1], pathBack);\n      pathBack = [];\n    }\n    ctx.fill();\n\t}\n}","group":"WorktimeVisit"},"Original EVs":{"axis":"y","strokeWidth":2,"strokePattern":[7,3]}},"ylabel":"Power (kW)","labels":["minute","Worktime","Visit","Original EVs"],"legend":"auto","labelsDivWidth":250,"labelsShowZeroValues":false,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":false,"fillGraph":false,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":2,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false,"colors":["#400080","#008080","gray"]},"scale":"minute","annotations":[],"shadings":[],"events":[{"pos":12,"label":"Grid capacity","labelLoc":"left","color":"red","strokePattern":[7,3],"axis":"y"}],"format":"date","data":[["2024-08-04T22:00:00.000Z","2024-08-04T22:15:00.000Z","2024-08-04T22:30:00.000Z","2024-08-04T22:45:00.000Z","2024-08-04T23:00:00.000Z","2024-08-04T23:15:00.000Z","2024-08-04T23:30:00.000Z","2024-08-04T23:45:00.000Z","2024-08-05T00:00:00.000Z","2024-08-05T00:15:00.000Z","2024-08-05T00:30:00.000Z","2024-08-05T00:45:00.000Z","2024-08-05T01:00:00.000Z","2024-08-05T01:15:00.000Z","2024-08-05T01:30:00.000Z","2024-08-05T01:45:00.000Z","2024-08-05T02:00:00.000Z","2024-08-05T02:15:00.000Z","2024-08-05T02:30:00.000Z","2024-08-05T02:45:00.000Z","2024-08-05T03:00:00.000Z","2024-08-05T03:15:00.000Z","2024-08-05T03:30:00.000Z","2024-08-05T03:45:00.000Z","2024-08-05T04:00:00.000Z","2024-08-05T04:15:00.000Z","2024-08-05T04:30:00.000Z","2024-08-05T04:45:00.000Z","2024-08-05T05:00:00.000Z","2024-08-05T05:15:00.000Z","2024-08-05T05:30:00.000Z","2024-08-05T05:45:00.000Z","2024-08-05T06:00:00.000Z","2024-08-05T06:15:00.000Z","2024-08-05T06:30:00.000Z","2024-08-05T06:45:00.000Z","2024-08-05T07:00:00.000Z","2024-08-05T07:15:00.000Z","2024-08-05T07:30:00.000Z","2024-08-05T07:45:00.000Z","2024-08-05T08:00:00.000Z","2024-08-05T08:15:00.000Z","2024-08-05T08:30:00.000Z","2024-08-05T08:45:00.000Z","2024-08-05T09:00:00.000Z","2024-08-05T09:15:00.000Z","2024-08-05T09:30:00.000Z","2024-08-05T09:45:00.000Z","2024-08-05T10:00:00.000Z","2024-08-05T10:15:00.000Z","2024-08-05T10:30:00.000Z","2024-08-05T10:45:00.000Z","2024-08-05T11:00:00.000Z","2024-08-05T11:15:00.000Z","2024-08-05T11:30:00.000Z","2024-08-05T11:45:00.000Z","2024-08-05T12:00:00.000Z","2024-08-05T12:15:00.000Z","2024-08-05T12:30:00.000Z","2024-08-05T12:45:00.000Z","2024-08-05T13:00:00.000Z","2024-08-05T13:15:00.000Z","2024-08-05T13:30:00.000Z","2024-08-05T13:45:00.000Z","2024-08-05T14:00:00.000Z","2024-08-05T14:15:00.000Z","2024-08-05T14:30:00.000Z","2024-08-05T14:45:00.000Z","2024-08-05T15:00:00.000Z","2024-08-05T15:15:00.000Z","2024-08-05T15:30:00.000Z","2024-08-05T15:45:00.000Z","2024-08-05T16:00:00.000Z","2024-08-05T16:15:00.000Z","2024-08-05T16:30:00.000Z","2024-08-05T16:45:00.000Z","2024-08-05T17:00:00.000Z","2024-08-05T17:15:00.000Z","2024-08-05T17:30:00.000Z","2024-08-05T17:45:00.000Z","2024-08-05T18:00:00.000Z","2024-08-05T18:15:00.000Z","2024-08-05T18:30:00.000Z","2024-08-05T18:45:00.000Z","2024-08-05T19:00:00.000Z","2024-08-05T19:15:00.000Z","2024-08-05T19:30:00.000Z","2024-08-05T19:45:00.000Z","2024-08-05T20:00:00.000Z","2024-08-05T20:15:00.000Z","2024-08-05T20:30:00.000Z","2024-08-05T20:45:00.000Z","2024-08-05T21:00:00.000Z","2024-08-05T21:15:00.000Z","2024-08-05T21:30:00.000Z","2024-08-05T21:45:00.000Z","2024-08-05T22:00:00.000Z","2024-08-05T22:15:00.000Z","2024-08-05T22:30:00.000Z","2024-08-05T22:45:00.000Z","2024-08-05T23:00:00.000Z","2024-08-05T23:15:00.000Z","2024-08-05T23:30:00.000Z","2024-08-05T23:45:00.000Z","2024-08-06T00:00:00.000Z","2024-08-06T00:15:00.000Z","2024-08-06T00:30:00.000Z","2024-08-06T00:45:00.000Z","2024-08-06T01:00:00.000Z","2024-08-06T01:15:00.000Z","2024-08-06T01:30:00.000Z","2024-08-06T01:45:00.000Z","2024-08-06T02:00:00.000Z","2024-08-06T02:15:00.000Z","2024-08-06T02:30:00.000Z","2024-08-06T02:45:00.000Z","2024-08-06T03:00:00.000Z","2024-08-06T03:15:00.000Z","2024-08-06T03:30:00.000Z","2024-08-06T03:45:00.000Z","2024-08-06T04:00:00.000Z","2024-08-06T04:15:00.000Z","2024-08-06T04:30:00.000Z","2024-08-06T04:45:00.000Z","2024-08-06T05:00:00.000Z","2024-08-06T05:15:00.000Z","2024-08-06T05:30:00.000Z","2024-08-06T05:45:00.000Z","2024-08-06T06:00:00.000Z","2024-08-06T06:15:00.000Z","2024-08-06T06:30:00.000Z","2024-08-06T06:45:00.000Z","2024-08-06T07:00:00.000Z","2024-08-06T07:15:00.000Z","2024-08-06T07:30:00.000Z","2024-08-06T07:45:00.000Z","2024-08-06T08:00:00.000Z","2024-08-06T08:15:00.000Z","2024-08-06T08:30:00.000Z","2024-08-06T08:45:00.000Z","2024-08-06T09:00:00.000Z","2024-08-06T09:15:00.000Z","2024-08-06T09:30:00.000Z","2024-08-06T09:45:00.000Z","2024-08-06T10:00:00.000Z","2024-08-06T10:15:00.000Z","2024-08-06T10:30:00.000Z","2024-08-06T10:45:00.000Z","2024-08-06T11:00:00.000Z","2024-08-06T11:15:00.000Z","2024-08-06T11:30:00.000Z","2024-08-06T11:45:00.000Z","2024-08-06T12:00:00.000Z","2024-08-06T12:15:00.000Z","2024-08-06T12:30:00.000Z","2024-08-06T12:45:00.000Z","2024-08-06T13:00:00.000Z","2024-08-06T13:15:00.000Z","2024-08-06T13:30:00.000Z","2024-08-06T13:45:00.000Z","2024-08-06T14:00:00.000Z","2024-08-06T14:15:00.000Z","2024-08-06T14:30:00.000Z","2024-08-06T14:45:00.000Z","2024-08-06T15:00:00.000Z","2024-08-06T15:15:00.000Z","2024-08-06T15:30:00.000Z","2024-08-06T15:45:00.000Z","2024-08-06T16:00:00.000Z","2024-08-06T16:15:00.000Z","2024-08-06T16:30:00.000Z","2024-08-06T16:45:00.000Z","2024-08-06T17:00:00.000Z","2024-08-06T17:15:00.000Z","2024-08-06T17:30:00.000Z","2024-08-06T17:45:00.000Z","2024-08-06T18:00:00.000Z","2024-08-06T18:15:00.000Z","2024-08-06T18:30:00.000Z","2024-08-06T18:45:00.000Z","2024-08-06T19:00:00.000Z","2024-08-06T19:15:00.000Z","2024-08-06T19:30:00.000Z","2024-08-06T19:45:00.000Z","2024-08-06T20:00:00.000Z","2024-08-06T20:15:00.000Z","2024-08-06T20:30:00.000Z","2024-08-06T20:45:00.000Z","2024-08-06T21:00:00.000Z","2024-08-06T21:15:00.000Z","2024-08-06T21:30:00.000Z","2024-08-06T21:45:00.000Z","2024-08-06T22:00:00.000Z","2024-08-06T22:15:00.000Z","2024-08-06T22:30:00.000Z","2024-08-06T22:45:00.000Z","2024-08-06T23:00:00.000Z","2024-08-06T23:15:00.000Z","2024-08-06T23:30:00.000Z","2024-08-06T23:45:00.000Z","2024-08-07T00:00:00.000Z","2024-08-07T00:15:00.000Z","2024-08-07T00:30:00.000Z","2024-08-07T00:45:00.000Z","2024-08-07T01:00:00.000Z","2024-08-07T01:15:00.000Z","2024-08-07T01:30:00.000Z","2024-08-07T01:45:00.000Z","2024-08-07T02:00:00.000Z","2024-08-07T02:15:00.000Z","2024-08-07T02:30:00.000Z","2024-08-07T02:45:00.000Z","2024-08-07T03:00:00.000Z","2024-08-07T03:15:00.000Z","2024-08-07T03:30:00.000Z","2024-08-07T03:45:00.000Z","2024-08-07T04:00:00.000Z","2024-08-07T04:15:00.000Z","2024-08-07T04:30:00.000Z","2024-08-07T04:45:00.000Z","2024-08-07T05:00:00.000Z","2024-08-07T05:15:00.000Z","2024-08-07T05:30:00.000Z","2024-08-07T05:45:00.000Z","2024-08-07T06:00:00.000Z","2024-08-07T06:15:00.000Z","2024-08-07T06:30:00.000Z","2024-08-07T06:45:00.000Z","2024-08-07T07:00:00.000Z","2024-08-07T07:15:00.000Z","2024-08-07T07:30:00.000Z","2024-08-07T07:45:00.000Z","2024-08-07T08:00:00.000Z","2024-08-07T08:15:00.000Z","2024-08-07T08:30:00.000Z","2024-08-07T08:45:00.000Z","2024-08-07T09:00:00.000Z","2024-08-07T09:15:00.000Z","2024-08-07T09:30:00.000Z","2024-08-07T09:45:00.000Z","2024-08-07T10:00:00.000Z","2024-08-07T10:15:00.000Z","2024-08-07T10:30:00.000Z","2024-08-07T10:45:00.000Z","2024-08-07T11:00:00.000Z","2024-08-07T11:15:00.000Z","2024-08-07T11:30:00.000Z","2024-08-07T11:45:00.000Z","2024-08-07T12:00:00.000Z","2024-08-07T12:15:00.000Z","2024-08-07T12:30:00.000Z","2024-08-07T12:45:00.000Z","2024-08-07T13:00:00.000Z","2024-08-07T13:15:00.000Z","2024-08-07T13:30:00.000Z","2024-08-07T13:45:00.000Z","2024-08-07T14:00:00.000Z","2024-08-07T14:15:00.000Z","2024-08-07T14:30:00.000Z","2024-08-07T14:45:00.000Z","2024-08-07T15:00:00.000Z","2024-08-07T15:15:00.000Z","2024-08-07T15:30:00.000Z","2024-08-07T15:45:00.000Z","2024-08-07T16:00:00.000Z","2024-08-07T16:15:00.000Z","2024-08-07T16:30:00.000Z","2024-08-07T16:45:00.000Z","2024-08-07T17:00:00.000Z","2024-08-07T17:15:00.000Z","2024-08-07T17:30:00.000Z","2024-08-07T17:45:00.000Z","2024-08-07T18:00:00.000Z","2024-08-07T18:15:00.000Z","2024-08-07T18:30:00.000Z","2024-08-07T18:45:00.000Z","2024-08-07T19:00:00.000Z","2024-08-07T19:15:00.000Z","2024-08-07T19:30:00.000Z","2024-08-07T19:45:00.000Z","2024-08-07T20:00:00.000Z","2024-08-07T20:15:00.000Z","2024-08-07T20:30:00.000Z","2024-08-07T20:45:00.000Z","2024-08-07T21:00:00.000Z","2024-08-07T21:15:00.000Z","2024-08-07T21:30:00.000Z","2024-08-07T21:45:00.000Z","2024-08-07T22:00:00.000Z"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,7.4,11.1,8.300000000000001,7.4,7.4,8.300000000000001,7.4,7.4,8.16,8.300000000000001,8.300000000000001,7.420000000000001,7.4,7.4,4.600000000000001,5.920000000000001,7.4,7.4,6.22,6.470000000000001,3.84,3.7,3.7,3.7,3.7,3.7,3.7,3.7,6.93,7.4,7.4,4.74,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,7.4,7.4,11.1,11.1,11.1,11.1,11.1,12,11.1,7.860000000000001,7.4,11.1,11.1,11.1,11.1,11.1,11.1,11.1,11.1,7.98,7.4,7.4,7.4,7.4,4.6,4.6,7.4,4.9,3.7,3.7,1.94,0,0,1.01,3.7,1.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,7.4,6.380000000000001,3.7,7.4,7.4,3.84,3.7,3.7,3.7,3.7,3.7,7.4,6.08,3.7,3.7,3.7,1.5,0,0,3.7,3.7,3.7,2.06,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,0.6,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,0.44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,7.4,7.4,3.38,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,7.4,11.1,18.5,22.2,21.18,18.5,22.2,22.2,18.64,16.3,14.8,11.12,11.1,11.1,14.8,13.48,11.1,11.1,9.920000000000002,5.2,0.14,0,3.7,3.7,3.7,2.06,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,0.6,0,0,0,0,0,0,0,0,3.7,3.7,7.4,7.4,7.4,11.1,7.840000000000001,11.1,11.1,11.1,11.1,11.1,12.14,11.1,7.86,7.4,11.1,11.1,11.1,11.1,11.1,11.1,11.1,11.1,7.98,7.4,11.1,11.1,11.1,14.8,14.8,10.78,4.9,3.7,7.4,5.640000000000001,3.7,3.7,3.7,3.7,1.64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":["attrs.series.Worktime.plotter","attrs.series.Visit.plotter"],"jsHooks":[]}</script><p>For a deeper analysis we can use function
<code><a href="../reference/summarise_smart_charging_sessions.html">summarise_smart_charging_sessions()</a></code>, which shows the
percentage of Considered, Responsive, Flexible and Exploited
sessions:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/summarise_smart_charging_sessions.html">summarise_smart_charging_sessions</a></span><span class="op">(</span><span class="va">sc_results</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">timecycle</th>
<th align="left">profile</th>
<th align="left">group</th>
<th align="left">subgroup</th>
<th align="right">n_sessions</th>
<th align="right">pct</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Workdays</td>
<td align="left">Visit</td>
<td align="left">Total</td>
<td align="left">Considered</td>
<td align="right">11</td>
<td align="right">92</td>
</tr>
<tr class="even">
<td align="left">Workdays</td>
<td align="left">Visit</td>
<td align="left">Total</td>
<td align="left">Not considered</td>
<td align="right">1</td>
<td align="right">8</td>
</tr>
<tr class="odd">
<td align="left">Workdays</td>
<td align="left">Visit</td>
<td align="left">Considered</td>
<td align="left">Responsive</td>
<td align="right">2</td>
<td align="right">18</td>
</tr>
<tr class="even">
<td align="left">Workdays</td>
<td align="left">Visit</td>
<td align="left">Considered</td>
<td align="left">Non responsive</td>
<td align="right">9</td>
<td align="right">82</td>
</tr>
<tr class="odd">
<td align="left">Workdays</td>
<td align="left">Visit</td>
<td align="left">Responsive</td>
<td align="left">Flexible</td>
<td align="right">2</td>
<td align="right">100</td>
</tr>
<tr class="even">
<td align="left">Workdays</td>
<td align="left">Visit</td>
<td align="left">Flexible</td>
<td align="left">Not exploited</td>
<td align="right">2</td>
<td align="right">100</td>
</tr>
<tr class="odd">
<td align="left">Workdays</td>
<td align="left">Worktime</td>
<td align="left">Total</td>
<td align="left">Considered</td>
<td align="right">9</td>
<td align="right">100</td>
</tr>
<tr class="even">
<td align="left">Workdays</td>
<td align="left">Worktime</td>
<td align="left">Considered</td>
<td align="left">Responsive</td>
<td align="right">5</td>
<td align="right">56</td>
</tr>
<tr class="odd">
<td align="left">Workdays</td>
<td align="left">Worktime</td>
<td align="left">Considered</td>
<td align="left">Non responsive</td>
<td align="right">4</td>
<td align="right">44</td>
</tr>
<tr class="even">
<td align="left">Workdays</td>
<td align="left">Worktime</td>
<td align="left">Responsive</td>
<td align="left">Flexible</td>
<td align="right">5</td>
<td align="right">100</td>
</tr>
<tr class="odd">
<td align="left">Workdays</td>
<td align="left">Worktime</td>
<td align="left">Flexible</td>
<td align="left">Exploited</td>
<td align="right">5</td>
<td align="right">100</td>
</tr>
</tbody>
</table>
<p>We can extract the following conclusions from this table:</p>
<ul>
<li>The Responsive percentages correspond to the configured 60% for
Worktime and 20% for Visit in the <code>responsive</code> parameter (the
difference is due to the small amount of sessions in the data)</li>
<li>None of the Flexible Visit sessions are Exploited, so they charge in
times where flexibility is not needed</li>
<li>All Worktime Flexible sessions are Exploited, trying to match the
setpoint and adapt to the Visit demand</li>
</ul>
<p>If we increase the participation of Worktime users up to 70% then we
accomplish with our grid capacity again:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc_results</span> <span class="op">&lt;-</span> <span class="va">ev_sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/smart_charging.html">smart_charging</a></span><span class="op">(</span></span>
<span>    opt_data <span class="op">=</span> <span class="va">opt_data</span>, </span>
<span>    opt_objective <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"curtail"</span>,</span>
<span>    window_days <span class="op">=</span> <span class="fl">1</span>, </span>
<span>    window_start_hour <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    responsive <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      Workdays <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Worktime <span class="op">=</span> <span class="fl">0.7</span>, Visit <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">sc_results</span>, <span class="va">ev_sessions</span>, show_setpoint <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dyLimit</span><span class="op">(</span><span class="va">grid_capacity</span>, <span class="st">"Grid capacity"</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-4018eef1a407a0df6b52" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-4018eef1a407a0df6b52">{"x":{"attrs":{"ylabel":"Power (kW)","labels":["minute","Flexible EVs","Original EVs"],"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"legend":"auto","labelsDivWidth":250,"labelsShowZeroValues":false,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":false,"fillGraph":false,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":2,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false,"colors":["navy","gray"],"series":{"Flexible EVs":{"axis":"y"},"Original EVs":{"axis":"y","strokeWidth":2,"strokePattern":[7,3]}}},"scale":"minute","annotations":[],"shadings":[],"events":[{"pos":12,"label":"Grid capacity","labelLoc":"left","color":"red","strokePattern":[7,3],"axis":"y"}],"format":"date","data":[["2024-08-04T22:00:00.000Z","2024-08-04T22:15:00.000Z","2024-08-04T22:30:00.000Z","2024-08-04T22:45:00.000Z","2024-08-04T23:00:00.000Z","2024-08-04T23:15:00.000Z","2024-08-04T23:30:00.000Z","2024-08-04T23:45:00.000Z","2024-08-05T00:00:00.000Z","2024-08-05T00:15:00.000Z","2024-08-05T00:30:00.000Z","2024-08-05T00:45:00.000Z","2024-08-05T01:00:00.000Z","2024-08-05T01:15:00.000Z","2024-08-05T01:30:00.000Z","2024-08-05T01:45:00.000Z","2024-08-05T02:00:00.000Z","2024-08-05T02:15:00.000Z","2024-08-05T02:30:00.000Z","2024-08-05T02:45:00.000Z","2024-08-05T03:00:00.000Z","2024-08-05T03:15:00.000Z","2024-08-05T03:30:00.000Z","2024-08-05T03:45:00.000Z","2024-08-05T04:00:00.000Z","2024-08-05T04:15:00.000Z","2024-08-05T04:30:00.000Z","2024-08-05T04:45:00.000Z","2024-08-05T05:00:00.000Z","2024-08-05T05:15:00.000Z","2024-08-05T05:30:00.000Z","2024-08-05T05:45:00.000Z","2024-08-05T06:00:00.000Z","2024-08-05T06:15:00.000Z","2024-08-05T06:30:00.000Z","2024-08-05T06:45:00.000Z","2024-08-05T07:00:00.000Z","2024-08-05T07:15:00.000Z","2024-08-05T07:30:00.000Z","2024-08-05T07:45:00.000Z","2024-08-05T08:00:00.000Z","2024-08-05T08:15:00.000Z","2024-08-05T08:30:00.000Z","2024-08-05T08:45:00.000Z","2024-08-05T09:00:00.000Z","2024-08-05T09:15:00.000Z","2024-08-05T09:30:00.000Z","2024-08-05T09:45:00.000Z","2024-08-05T10:00:00.000Z","2024-08-05T10:15:00.000Z","2024-08-05T10:30:00.000Z","2024-08-05T10:45:00.000Z","2024-08-05T11:00:00.000Z","2024-08-05T11:15:00.000Z","2024-08-05T11:30:00.000Z","2024-08-05T11:45:00.000Z","2024-08-05T12:00:00.000Z","2024-08-05T12:15:00.000Z","2024-08-05T12:30:00.000Z","2024-08-05T12:45:00.000Z","2024-08-05T13:00:00.000Z","2024-08-05T13:15:00.000Z","2024-08-05T13:30:00.000Z","2024-08-05T13:45:00.000Z","2024-08-05T14:00:00.000Z","2024-08-05T14:15:00.000Z","2024-08-05T14:30:00.000Z","2024-08-05T14:45:00.000Z","2024-08-05T15:00:00.000Z","2024-08-05T15:15:00.000Z","2024-08-05T15:30:00.000Z","2024-08-05T15:45:00.000Z","2024-08-05T16:00:00.000Z","2024-08-05T16:15:00.000Z","2024-08-05T16:30:00.000Z","2024-08-05T16:45:00.000Z","2024-08-05T17:00:00.000Z","2024-08-05T17:15:00.000Z","2024-08-05T17:30:00.000Z","2024-08-05T17:45:00.000Z","2024-08-05T18:00:00.000Z","2024-08-05T18:15:00.000Z","2024-08-05T18:30:00.000Z","2024-08-05T18:45:00.000Z","2024-08-05T19:00:00.000Z","2024-08-05T19:15:00.000Z","2024-08-05T19:30:00.000Z","2024-08-05T19:45:00.000Z","2024-08-05T20:00:00.000Z","2024-08-05T20:15:00.000Z","2024-08-05T20:30:00.000Z","2024-08-05T20:45:00.000Z","2024-08-05T21:00:00.000Z","2024-08-05T21:15:00.000Z","2024-08-05T21:30:00.000Z","2024-08-05T21:45:00.000Z","2024-08-05T22:00:00.000Z","2024-08-05T22:15:00.000Z","2024-08-05T22:30:00.000Z","2024-08-05T22:45:00.000Z","2024-08-05T23:00:00.000Z","2024-08-05T23:15:00.000Z","2024-08-05T23:30:00.000Z","2024-08-05T23:45:00.000Z","2024-08-06T00:00:00.000Z","2024-08-06T00:15:00.000Z","2024-08-06T00:30:00.000Z","2024-08-06T00:45:00.000Z","2024-08-06T01:00:00.000Z","2024-08-06T01:15:00.000Z","2024-08-06T01:30:00.000Z","2024-08-06T01:45:00.000Z","2024-08-06T02:00:00.000Z","2024-08-06T02:15:00.000Z","2024-08-06T02:30:00.000Z","2024-08-06T02:45:00.000Z","2024-08-06T03:00:00.000Z","2024-08-06T03:15:00.000Z","2024-08-06T03:30:00.000Z","2024-08-06T03:45:00.000Z","2024-08-06T04:00:00.000Z","2024-08-06T04:15:00.000Z","2024-08-06T04:30:00.000Z","2024-08-06T04:45:00.000Z","2024-08-06T05:00:00.000Z","2024-08-06T05:15:00.000Z","2024-08-06T05:30:00.000Z","2024-08-06T05:45:00.000Z","2024-08-06T06:00:00.000Z","2024-08-06T06:15:00.000Z","2024-08-06T06:30:00.000Z","2024-08-06T06:45:00.000Z","2024-08-06T07:00:00.000Z","2024-08-06T07:15:00.000Z","2024-08-06T07:30:00.000Z","2024-08-06T07:45:00.000Z","2024-08-06T08:00:00.000Z","2024-08-06T08:15:00.000Z","2024-08-06T08:30:00.000Z","2024-08-06T08:45:00.000Z","2024-08-06T09:00:00.000Z","2024-08-06T09:15:00.000Z","2024-08-06T09:30:00.000Z","2024-08-06T09:45:00.000Z","2024-08-06T10:00:00.000Z","2024-08-06T10:15:00.000Z","2024-08-06T10:30:00.000Z","2024-08-06T10:45:00.000Z","2024-08-06T11:00:00.000Z","2024-08-06T11:15:00.000Z","2024-08-06T11:30:00.000Z","2024-08-06T11:45:00.000Z","2024-08-06T12:00:00.000Z","2024-08-06T12:15:00.000Z","2024-08-06T12:30:00.000Z","2024-08-06T12:45:00.000Z","2024-08-06T13:00:00.000Z","2024-08-06T13:15:00.000Z","2024-08-06T13:30:00.000Z","2024-08-06T13:45:00.000Z","2024-08-06T14:00:00.000Z","2024-08-06T14:15:00.000Z","2024-08-06T14:30:00.000Z","2024-08-06T14:45:00.000Z","2024-08-06T15:00:00.000Z","2024-08-06T15:15:00.000Z","2024-08-06T15:30:00.000Z","2024-08-06T15:45:00.000Z","2024-08-06T16:00:00.000Z","2024-08-06T16:15:00.000Z","2024-08-06T16:30:00.000Z","2024-08-06T16:45:00.000Z","2024-08-06T17:00:00.000Z","2024-08-06T17:15:00.000Z","2024-08-06T17:30:00.000Z","2024-08-06T17:45:00.000Z","2024-08-06T18:00:00.000Z","2024-08-06T18:15:00.000Z","2024-08-06T18:30:00.000Z","2024-08-06T18:45:00.000Z","2024-08-06T19:00:00.000Z","2024-08-06T19:15:00.000Z","2024-08-06T19:30:00.000Z","2024-08-06T19:45:00.000Z","2024-08-06T20:00:00.000Z","2024-08-06T20:15:00.000Z","2024-08-06T20:30:00.000Z","2024-08-06T20:45:00.000Z","2024-08-06T21:00:00.000Z","2024-08-06T21:15:00.000Z","2024-08-06T21:30:00.000Z","2024-08-06T21:45:00.000Z","2024-08-06T22:00:00.000Z","2024-08-06T22:15:00.000Z","2024-08-06T22:30:00.000Z","2024-08-06T22:45:00.000Z","2024-08-06T23:00:00.000Z","2024-08-06T23:15:00.000Z","2024-08-06T23:30:00.000Z","2024-08-06T23:45:00.000Z","2024-08-07T00:00:00.000Z","2024-08-07T00:15:00.000Z","2024-08-07T00:30:00.000Z","2024-08-07T00:45:00.000Z","2024-08-07T01:00:00.000Z","2024-08-07T01:15:00.000Z","2024-08-07T01:30:00.000Z","2024-08-07T01:45:00.000Z","2024-08-07T02:00:00.000Z","2024-08-07T02:15:00.000Z","2024-08-07T02:30:00.000Z","2024-08-07T02:45:00.000Z","2024-08-07T03:00:00.000Z","2024-08-07T03:15:00.000Z","2024-08-07T03:30:00.000Z","2024-08-07T03:45:00.000Z","2024-08-07T04:00:00.000Z","2024-08-07T04:15:00.000Z","2024-08-07T04:30:00.000Z","2024-08-07T04:45:00.000Z","2024-08-07T05:00:00.000Z","2024-08-07T05:15:00.000Z","2024-08-07T05:30:00.000Z","2024-08-07T05:45:00.000Z","2024-08-07T06:00:00.000Z","2024-08-07T06:15:00.000Z","2024-08-07T06:30:00.000Z","2024-08-07T06:45:00.000Z","2024-08-07T07:00:00.000Z","2024-08-07T07:15:00.000Z","2024-08-07T07:30:00.000Z","2024-08-07T07:45:00.000Z","2024-08-07T08:00:00.000Z","2024-08-07T08:15:00.000Z","2024-08-07T08:30:00.000Z","2024-08-07T08:45:00.000Z","2024-08-07T09:00:00.000Z","2024-08-07T09:15:00.000Z","2024-08-07T09:30:00.000Z","2024-08-07T09:45:00.000Z","2024-08-07T10:00:00.000Z","2024-08-07T10:15:00.000Z","2024-08-07T10:30:00.000Z","2024-08-07T10:45:00.000Z","2024-08-07T11:00:00.000Z","2024-08-07T11:15:00.000Z","2024-08-07T11:30:00.000Z","2024-08-07T11:45:00.000Z","2024-08-07T12:00:00.000Z","2024-08-07T12:15:00.000Z","2024-08-07T12:30:00.000Z","2024-08-07T12:45:00.000Z","2024-08-07T13:00:00.000Z","2024-08-07T13:15:00.000Z","2024-08-07T13:30:00.000Z","2024-08-07T13:45:00.000Z","2024-08-07T14:00:00.000Z","2024-08-07T14:15:00.000Z","2024-08-07T14:30:00.000Z","2024-08-07T14:45:00.000Z","2024-08-07T15:00:00.000Z","2024-08-07T15:15:00.000Z","2024-08-07T15:30:00.000Z","2024-08-07T15:45:00.000Z","2024-08-07T16:00:00.000Z","2024-08-07T16:15:00.000Z","2024-08-07T16:30:00.000Z","2024-08-07T16:45:00.000Z","2024-08-07T17:00:00.000Z","2024-08-07T17:15:00.000Z","2024-08-07T17:30:00.000Z","2024-08-07T17:45:00.000Z","2024-08-07T18:00:00.000Z","2024-08-07T18:15:00.000Z","2024-08-07T18:30:00.000Z","2024-08-07T18:45:00.000Z","2024-08-07T19:00:00.000Z","2024-08-07T19:15:00.000Z","2024-08-07T19:30:00.000Z","2024-08-07T19:45:00.000Z","2024-08-07T20:00:00.000Z","2024-08-07T20:15:00.000Z","2024-08-07T20:30:00.000Z","2024-08-07T20:45:00.000Z","2024-08-07T21:00:00.000Z","2024-08-07T21:15:00.000Z","2024-08-07T21:30:00.000Z","2024-08-07T21:45:00.000Z","2024-08-07T22:00:00.000Z"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,7.4,11.1,11.99,12,12,11.99,12,12,12.01,12.01,12.01,11.11,11.11,11.11,11.99,11.99,11.11,11.11,9.91,5.19,0.14,0,4.45,8.73,11.1,9.460000000000001,7.4,7.4,7.4,7.4,7.4,5.96,5.48,1.78,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,0.6,0,0,0,0,0,0,0,0,3.7,3.7,7.4,7.4,7.4,11.1,7.840000000000001,11.1,11.1,11.1,11.1,11.1,11.99,11.1,7.859999999999999,7.4,11.1,11.1,11.1,11.1,11.1,11.1,11.1,11.1,7.98,7.41,11.1,11.1,11.1,12,12,10.78,4.9,3.7,7.390000000000001,5.64,3.7,3.7,4.71,7.4,2.68,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,7.4,11.1,18.5,22.2,21.18,18.5,22.2,22.2,18.64,16.3,14.8,11.12,11.1,11.1,14.8,13.48,11.1,11.1,9.920000000000002,5.2,0.14,0,3.7,3.7,3.7,2.06,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,1.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,0.6,0,0,0,0,0,0,0,0,3.7,3.7,7.4,7.4,7.4,11.1,7.840000000000001,11.1,11.1,11.1,11.1,11.1,12.14,11.1,7.86,7.4,11.1,11.1,11.1,11.1,11.1,11.1,11.1,11.1,7.98,7.4,11.1,11.1,11.1,14.8,14.8,10.78,4.9,3.7,7.4,5.640000000000001,3.7,3.7,3.7,3.7,1.64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,1.78,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":[],"jsHooks":[]}</script><p>Then we can say that <strong>we need at least 70% of the Worktime
users to participate</strong> in the smart charging program if we want
to respect our grid constraints.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marc Cañigueral.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
